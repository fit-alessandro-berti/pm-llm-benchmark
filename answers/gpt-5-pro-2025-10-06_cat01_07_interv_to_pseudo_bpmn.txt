BPMN-like textual process model: Invoice Approval and Payment Scheduling

1) Participants (pools/lanes)
- Pool: Organization (Internal)
  - Lane: Accounts Payable Clerk (APC) – Mary
  - Lane: Purchasing Officer (PO) – Dan
  - Lane: Department Manager (DM) – Carlos
  - Lane: AP Supervisor (APS) – Rita
  - Lane: Supplier Relationship Manager (SRM) – Karen
  - Lane: Department Head (DH) – various
  - Lane: Accounting System (SYS) – internal system actions/notifications
- Pool: Supplier (External)

2) Artifacts / data objects
- DO1: Invoice (usually received via email)
- DO2: Purchase Order (PO)
- DO3: Goods/services receipt or receipt confirmation
- DO4: Contract/price agreement/terms
- DO5: Corrected/revised invoice
- DO6: Approval record
- DO7: Payment schedule entry
- DO8: Rejection reason/communication

3) Nodes (IDs, type, lane, description)
- S1 StartEvent (APC): Invoice received (via email)
- T1 Task (APC): Check invoice for valid PO number/reference
- G1 ExclusiveGateway (APC): Does invoice include a valid PO?
- T2 Task (APC  Supplier): Request missing PO or details from Supplier
- E1 IntermediateMessageEvent (APC): Supplier response received with PO/details
- G2 ExclusiveGateway (APC): Is the provided PO valid/usable?
- T3 Task (APC  APS): Escalate missing/invalid PO
- T3a Task (APS + DH): Create retrospective PO or decide disposition
- G3 ExclusiveGateway (APS): Retrospective PO approved/created?
- End2 EndEvent: Invoice rejected/closed (no usable PO)
- T4 Task (APC): Log invoice in accounting system (create invoice record tied to PO)
- T5 Task (APC  PO): Forward invoice to Purchasing for receipt and PO verification
- T6 Task (PO): Verify receipt of goods/services and compare invoice vs PO (qty, price, delivery)
- G4 ExclusiveGateway (PO): Discrepancy detected at Purchasing?
- SP1 SubProcess (collapsed, cross-functional): Resolve discrepancy
  - Entry from: G4 [Yes], G5 [No match], or G6 [Manager hold/reject]
  - Internal activities (expanded for implementers):
    - T7a Task (PO  Supplier): Contact supplier to correct invoice/clarify
    - T11 Task (APS): Coordinate resolution across departments; remove blockers; decide path if unresolved
    - T12 Task (SRM  Supplier): Check contract/terms, liaise with supplier to resolve pricing/terms, obtain corrected invoice
    - E5 IntermediateMessageEvent: Corrected invoice/clarification received (DO5)
    - G7 ExclusiveGateway: Discrepancy resolved?
    - If No: T17 Task (APS/APC  Supplier): Notify supplier of rejection with reason (DO8)
    - If No: End3 EndEvent: Invoice rejected/closed (unresolvable discrepancy)
    - If Yes: return to verification flow
- T8 Task (PO  APC): Send confirmation to AP (goods/services received and invoice aligns to PO)
- T9 Task (APC + SYS): System match of invoice line items to PO (three-way match using receipt confirmation)
- G5 ExclusiveGateway (APC): Match successful in system?
- T10 Task (APC  PO): Request clarification from Purchasing (if system match fails)
- T13 Task (SYS): Trigger manager approval request (automatic notification) after confirmation + successful match
- E4 IntermediateMessageEvent (DM): Approval request received
- T14 Task (DM): Review invoice, PO, confirmation; decide approve vs hold/reject
- G6 ExclusiveGateway (DM): Approve?
- T15 Task (APC/APS): Place invoice on hold and investigate per manager’s request (may invoke SP1)
- T16 Task (APC): Schedule invoice for next payment cycle (create DO7)
- End1 EndEvent: Invoice scheduled for payment

4) Sequence flow and message flow (with conditions)
- F1: S1  T1
- F2: T1  G1
- F3: G1 [PO present]  T4
- F4: G1 [No PO]  T2
- F5: T2  E1 (await supplier response)
- F6: E1  G2
- F7: G2 [Valid PO]  T4
- F8: G2 [No/invalid PO or no response]  T3
- F9: T3  T3a
- F10: T3a  G3
- F11: G3 [Retrospective PO approved/created]  T4
- F12: G3 [Not approved]  End2
- F13: T4  T5 (message AP  Purchasing)
- F14: T5  T6
- F15: T6  G4
- F16: G4 [No discrepancy]  T8 (PO confirms)
- F17: G4 [Discrepancy]  SP1 (Resolve discrepancy)
- F18: SP1 [Resolved]  T6 (re-verify)
- F19: SP1 [Unresolved, reject]  T17  End3
- F20: T8  T9
- F21: T9  G5
- F22: G5 [Match successful]  T13
- F23: G5 [Match failed]  T10
- F24: T10  SP1 (Resolve discrepancy)
- F25: T13  E4 (manager notified)
- F26: E4  T14
- F27: T14  G6
- F28: G6 [Approve]  T16  End1
- F29: G6 [Hold/Reject]  T15
- F30: T15  SP1 (investigate/resolve)
- F31: SP1 [Resolved]  T9 (repeat match and re-approve path)
- F32: SP1 [Unresolved, reject]  T17  End3

5) Data associations (high level)
- T1 reads DO1
- T2 sends/requests DO1/PO details to/from Supplier; receives DO2 via E1
- T4 writes invoice record linking DO1 and DO2 in SYS
- T5/T6 exchange DO1, DO2, and DO3 (receipt confirmation)
- T6 reads DO2, DO1, DO3; outputs discrepancy flag or confirmation
- SP1 may read DO4 (contract) and request DO5 (corrected invoice)
- T8 sends confirmation reference to AP
- T9 reads DO1, DO2, DO3; records match result
- T13 creates DO6 (approval request)
- T14 writes DO6 (decision)
- T16 creates DO7 (payment schedule entry)
- T17 sends DO8 to Supplier

6) Exception handling and variations
- Missing PO on receipt:
  - APC requests PO from Supplier (T2). If no/invalid PO, escalate to APS (T3).
  - APS may create a retrospective PO with DH (T3a  G3). If not approved, invoice is rejected (End2).
- Discrepancies (qty/price/delivery/terms):
  - Detected by PO (G4) or by APC during system match (G5) or by DM during approval (G6 [Hold/Reject]).
  - All funnel into SP1 Resolve discrepancy:
    - Purchasing may contact Supplier for a corrected invoice (T7a).
    - APS coordinates cross-department resolution and removes blockers (T11).
    - SRM validates contract/terms and liaises with Supplier to set correct price/terms (T12).
    - If corrected invoice/clarification received (E5), process returns to PO verification (T6) then to APC match (T9).
    - If unresolvable, Supplier is notified of rejection (T17) and process ends (End3).
- Manager hold/reject:
  - DM can hold or reject if suspicious variance vs budget or unexpected items (G6 [Hold/Reject]).
  - On hold triggers investigation via SP1; after resolution, the invoice cycles back to APC match (T9) and DM re-approval.
- Ordering of verification vs matching:
  - Primary flow per APC: Purchasing confirms receipt (T6/T8) before APC performs system match (T9) and triggers approval (T13).
  - Note: Some stakeholders implied AP may compare/match while awaiting Purchasing confirmation; this model fixes the trigger for manager approval to require both Purchasing confirmation and a successful system match (per Mary’s statement).
- “Hold” handling:
  - When PO requests AP to hold, AP sets invoice status on hold and SP1 progresses until a corrected invoice is received or a rejection decision is made.

7) Triggers for manager approval (explicit condition)
- The system (T13) sends the manager approval request only after:
  - Purchasing confirmation has been received (T8), and
  - The system match is successful (G5 [Match successful]).

8) Outcomes (end states)
- End1: Invoice scheduled for payment (to be included in next payment run; payment execution is out of scope of these interviews).
- End2/End3: Invoice rejected/closed; Supplier informed with reason.

This textual model provides named nodes, roles, data, gateways, and flows with conditions so it can be directly translated into a BPMN collaboration diagram with pools/lanes, sequence flows, and message flows. Ambiguities and variations are noted explicitly.