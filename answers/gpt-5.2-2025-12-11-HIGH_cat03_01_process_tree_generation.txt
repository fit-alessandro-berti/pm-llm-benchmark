### Process tree (notation)

Readable n-ary form:

```
-> (
  'A', 'RG', 'IA', 'TI', 'TC',
  X( 'CE', 'FBP' ),
  X(
    tau,
    *(
      ->( 'SC', X('TM','SPT'), 'RDT', X('FCE','FBA') ),
      tau
    )
  ),
  +( 'AI', 'NC' ),
  'FAS', 'DDI',
  +( 'BL', 'ICP', 'MRF' )
)
```

Meaning of the “abnormal results” part:

- `X(tau, *(... , tau))` = either **skip** the abnormal-treatment loop (results normal) or **enter** a loop that executes at least once and can repeat.
- The loop body is `->('SC', X('TM','SPT'), 'RDT', X('FCE','FBA'))` and repeats as needed (redo part is `tau`).

---

### Same process tree built as a `pm4py` `ProcessTree`

```python
from pm4py.objects.process_tree.obj import ProcessTree, Operator

# Root: full patient journey
root = ProcessTree(operator=Operator.SEQUENCE)

# 1) Arrival -> Registration -> Intake
A  = ProcessTree(label="A",  parent=root)
RG = ProcessTree(label="RG", parent=root)
IA = ProcessTree(label="IA", parent=root)

# 2) Triage interview -> triage classification
TI = ProcessTree(label="TI", parent=root)
TC = ProcessTree(label="TC", parent=root)

# 3) Initial diagnostic test: CE xor FBP
init_test = ProcessTree(operator=Operator.XOR, parent=root)
CE  = ProcessTree(label="CE",  parent=init_test)
FBP = ProcessTree(label="FBP", parent=init_test)
init_test.children.extend([CE, FBP])

# 4) After initial test: either normal (tau) or abnormal loop
post_test = ProcessTree(operator=Operator.XOR, parent=root)

normal_tau = ProcessTree(label=None, parent=post_test)  # tau

loop = ProcessTree(operator=Operator.LOOP, parent=post_test)

# Loop body: SC -> (TM xor SPT) -> RDT -> (FCE xor FBA)
body = ProcessTree(operator=Operator.SEQUENCE, parent=loop)

SC = ProcessTree(label="SC", parent=body)

treat = ProcessTree(operator=Operator.XOR, parent=body)
TM  = ProcessTree(label="TM",  parent=treat)
SPT = ProcessTree(label="SPT", parent=treat)
treat.children.extend([TM, SPT])

RDT = ProcessTree(label="RDT", parent=body)

rdt_choice = ProcessTree(operator=Operator.XOR, parent=body)
FCE = ProcessTree(label="FCE", parent=rdt_choice)
FBA = ProcessTree(label="FBA", parent=rdt_choice)
rdt_choice.children.extend([FCE, FBA])

body.children.extend([SC, treat, RDT, rdt_choice])

redo_tau = ProcessTree(label=None, parent=loop)  # tau between repetitions
loop.children.extend([body, redo_tau])

post_test.children.extend([normal_tau, loop])

# 5) Advanced imaging and nutritional counseling in parallel
support = ProcessTree(operator=Operator.PARALLEL, parent=root)
AI = ProcessTree(label="AI", parent=support)
NC = ProcessTree(label="NC", parent=support)
support.children.extend([AI, NC])

# 6) Final admin/info sequence: FAS -> DDI
FAS = ProcessTree(label="FAS", parent=root)
DDI = ProcessTree(label="DDI", parent=root)

# 7) Final clearances in parallel: BL || ICP || MRF
clearance = ProcessTree(operator=Operator.PARALLEL, parent=root)
BL  = ProcessTree(label="BL",  parent=clearance)
ICP = ProcessTree(label="ICP", parent=clearance)
MRF = ProcessTree(label="MRF", parent=clearance)
clearance.children.extend([BL, ICP, MRF])

# Assemble the root sequence in order
root.children.extend([
    A, RG, IA,
    TI, TC,
    init_test,
    post_test,
    support,
    FAS, DDI,
    clearance
])
```