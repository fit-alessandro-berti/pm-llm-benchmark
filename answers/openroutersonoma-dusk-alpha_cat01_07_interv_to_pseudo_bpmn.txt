### BPMN-Like Textual Process Model: Invoice Approval Process

This textual representation describes the invoice approval process as a BPMN (Business Process Model and Notation) diagram in a structured, hierarchical format. It can be directly translated into a visual BPMN tool (e.g., using pools/lanes for roles, sequence flows for main paths, exclusive gateways for decisions, parallel gateways if needed, and annotations for exceptions/variations). The model consolidates the interviews into a coherent "as-is" process, prioritizing the typical flow described by Mary (Accounts Payable Clerk) while integrating perspectives from others. Conflicting or ambiguous details (e.g., exact escalation triggers or informal POs) are noted as variations or exceptions. Roles are grouped into lanes within a single pool ("Invoice Approval Process") for simplicity.

#### High-Level Overview
- **Pool:** Invoice Approval Process (encompassing all roles and systems).
- **Lanes (Roles/Participants):**
  - Accounts Payable (AP) Clerk (e.g., Mary).
  - Purchasing Officer (e.g., Dan).
  - Department Manager (e.g., Carlos).
  - AP Supervisor (e.g., Rita) – Handles escalations.
  - Supplier Relationship Manager (e.g., Karen) – Indirect support for resolutions.
  - Supplier (external, interacts via email/phone).
  - Accounting System (system lane for automated actions like notifications and logging).
- **Key Artifacts/Inputs/Outputs:**
  - **Input:** Incoming Invoice (e.g., via email, containing details like PO number, quantities, prices).
  - **Intermediate Artifacts:** Purchase Order (PO) document/reference; Confirmation Email (from Purchasing); Matched Invoice (post-validation); Escalation Report (for exceptions).
  - **Output:** Approved Invoice (scheduled for payment); Rejected Invoice (returned to supplier or archived).
- **Start Event:** Receipt of Invoice (message start event triggered by email from Supplier).
- **End Events:** 
  - Payment Scheduled (normal end).
  - Invoice Rejected (exception end, e.g., unresolvable discrepancy).
- **Main Sequence:** Linear with decision gateways for validations and escalations; includes loops for rework/resolution.
- **Exceptions/Variations:** Noted inline where accounts conflict or add nuance (e.g., informal POs per Rita; rare rejections per Carlos). No major conflicts, but ambiguity exists on whether Supplier Relationship Manager is always looped in (per Karen, it's indirect and case-specific).

#### Detailed Process Flow Description
The flow is described as a sequence of elements, using BPMN terminology. Sequence flows connect elements unless specified (e.g., via gateways). All flows are sequential unless parallel (none here). Gateways are exclusive (XOR) for decisions. Sub-processes are indented for clarity.

1. **Start Event: Receipt of Invoice**  
   - Trigger: Message from Supplier (email with Invoice artifact).  
   - Lane: AP Clerk.  
   - Description: Invoice arrives in AP inbox. No PO check yet.

2. **Task: Check for Valid PO Number** (User Task)  
   - Lane: AP Clerk.  
   - Input: Incoming Invoice.  
   - Output: Invoice with/without PO reference.  
   - Description: AP Clerk (Mary) verifies if the invoice includes a valid PO number.  
   - Sequence Flow: To XOR Gateway 1 (PO Valid?).

3. **XOR Gateway 1: PO Valid?** (Exclusive Decision)  
   - Conditions:  
     - Yes: Has valid PO  Proceed to Task 3 (Log Invoice).  
     - No: Missing/invalid PO  Proceed to Task: Request PO Details (sub-process).  
   - Description: Based on Mary's check; Dan emphasizes no approval without PO.

   - **Sub-Path for No (Exception Variation):**  
     3a. **Task: Request PO Details** (Send Task)  
        - Lane: AP Clerk.  
        - Output: Email to Supplier requesting PO or revised Invoice.  
        - Description: Invoice sent back to Supplier (per Mary). May loop back to Start Event if revised Invoice arrives.  
        - Sequence Flow: Message to Supplier  Potential loop to Start Event (rework).  
        - Variation (per Dan/Rita): If PO can't be obtained, escalate to AP Supervisor (see Escalation Sub-Process below).

4. **Task: Log Invoice** (Service Task)  
   - Lane: Accounting System (automated, initiated by AP Clerk).  
   - Input: Invoice with valid PO.  
   - Output: Logged Invoice (system record).  
   - Description: AP Clerk enters invoice into the accounting system (per Mary).  
   - Sequence Flow: To Task 5.

5. **Task: Forward to Purchasing for Receipt Confirmation** (Send Task)  
   - Lane: AP Clerk.  
   - Input: Logged Invoice.  
   - Output: Notification/Email to Purchasing with Invoice and PO details.  
   - Description: AP forwards for confirmation that goods/services were received (per Mary/Dan). System may automate email.  
   - Sequence Flow: Message to Purchasing Officer  Task 6.

6. **Task: Confirm Receipt and Match Invoice to PO** (User Task)  
   - Lane: Purchasing Officer.  
   - Input: Invoice, PO.  
   - Output: Confirmation Email (if match); or Discrepancy Report (if not).  
   - Description: Purchasing (Dan) compares invoice line items (quantities, prices, delivery charges) against PO and confirms receipt. If off (e.g., extra units), contact Supplier or hold invoice (per Dan).  
   - Sequence Flow: To XOR Gateway 2 (Match Successful?).

7. **XOR Gateway 2: Match Successful?** (Exclusive Decision)  
   - Conditions:  
     - Yes: Everything matches  Send Confirmation Email back to AP  Proceed to Task 7 (Prepare for Manager Approval).  
     - No: Discrepancy (e.g., pricing, missing items)  Proceed to Escalation Sub-Process.  
   - Description: Based on Purchasing's check; triggers return message to AP.

   - **Sub-Path for No (Exception Variation):**  
     6a. **Sub-Process: Resolve Discrepancy** (Collapsed Sub-Process with loop potential)  
        - Lane: Purchasing Officer (primary), with involvement from AP Clerk, AP Supervisor, Supplier Relationship Manager, or Supplier.  
        - Steps (internal to sub-process):  
          - Task: Email Purchasing/AP to Clarify (Send Task, per Mary/Dan).  
          - Variation (per Karen): If pricing/terms issue, loop in Supplier Relationship Manager to check contract and contact Supplier.  
          - Variation (per Rita): If unresolvable (e.g., informal services without PO), escalate to AP Supervisor for retrospective PO creation or rejection decision.  
          - Task: Contact Supplier for Correction (Send Task, potentially looping to revised Invoice  back to Task 6).  
        - Output: Resolved Invoice or Escalation Report.  
        - Description: Handles discrepancies; may involve multiple iterations. If resolved, return to Gateway 2 (Yes branch). If not, proceed to rejection (End Event: Invoice Rejected).  
        - Sequence Flow: After resolution  Back to Task 6 or to Task 8 if escalated.

8. **Task: Prepare for Manager Approval** (Service Task)  
   - Lane: AP Clerk / Accounting System.  
   - Input: Confirmation Email from Purchasing, Matched Invoice.  
   - Output: Approval Notification with Invoice details, PO, and confirmation.  
   - Description: After match confirmation (per Mary), system sends automatic email to Manager (per Carlos). Matches line items in system.  
   - Sequence Flow: Message to Department Manager  Task 9.

9. **Task: Manager Review and Approval** (User Task)  
   - Lane: Department Manager.  
   - Input: Approval Notification.  
   - Output: Approved Invoice or Rejection Note.  
   - Description: Manager (Carlos) reviews details; if good (e.g., matches budget), approves in system. Rare cases (once every couple months) of suspicion (e.g., amount variance) lead to rejection or hold for investigation.  
   - Sequence Flow: To XOR Gateway 3 (Approved?).

10. **XOR Gateway 3: Approved?** (Exclusive Decision)  
    - Conditions:  
      - Yes: Approved  Proceed to Task 10 (Schedule Payment).  
      - No: Rejected/Hold  Proceed to Escalation Sub-Process (from Step 6a, or new instance).  
    - Description: Per Carlos; rejection sends back to AP for investigation (e.g., email Mary to hold and resolve).

    - **Sub-Path for No (Exception Variation):**  
      9a. **Task: Investigate Rejection** (User Task)  
         - Lane: AP Clerk / AP Supervisor.  
         - Description: Hold invoice and escalate if needed (per Carlos/Rita); may loop back to Sub-Process: Resolve Discrepancy. If unresolvable, end with rejection.

11. **Task: Schedule for Payment** (User Task)  
    - Lane: AP Clerk / Accounting System.  
    - Input: Approved Invoice.  
    - Output: Payment Run Entry.  
    - Description: AP adds to next payment cycle (per Mary/Dan/Carlos/Rita).  
    - Sequence Flow: To End Event.

12. **End Event: Payment Scheduled** (Normal End)  
    - Description: Invoice processed successfully.

13. **End Event: Invoice Rejected** (Error End)  
    - Description: For unresolvable cases (e.g., after escalation); invoice returned to Supplier or archived (per Rita/Carlos).

#### Escalation Sub-Process (Cross-Referenced, for Exceptions)
- **Triggered From:** Gateways 1 (No PO), 2 (No Match), or 3 (Not Approved).  
- **Lane:** AP Supervisor (primary), with AP Clerk, Purchasing, Supplier Relationship Manager.  
- **Description (per Rita):** Handles stuck invoices (e.g., missing info, informal contracts). Steps: Coordinate with departments/Supplier; create retrospective PO if valid; or reject. After clearance, merge back to normal flow (e.g., to Task 6 or 8). Variation: Supplier Relationship Manager assists indirectly (per Karen) but not always involved.  
- **Output:** Resolved (continue main flow) or Rejected (to End Event).  
- **Loop Potential:** Yes, if Supplier provides corrections.

#### Additional Notes on Model
- **Ambiguities/Consolidations:** 
  - No major conflicts; all accounts align on core sequence (Receive  Check PO  Log  Confirm Receipt/Match  Approve  Pay). Variations are exception-based (e.g., Rita's retrospective POs for informal services are noted as a special condition, not standard).
  - Escalations are not always to Supervisor (per Mary: only if unresolvable); modeled as conditional.
  - Supplier interactions are message flows (external).
  - No parallel tasks mentioned; all sequential with decisions.
  - Pain Points (Implicit from Interviews): Delays from missing POs/discrepancies; manual emails; rare but impactful rejections.
- **Visualization Tip:** Use BPMN tools like Camunda Modeler or Lucidchart to render: Place lanes horizontally, gateways as diamonds, tasks as rounded rectangles, and annotate variations with text attachments. Total elements: ~12 main + sub-processes for exceptions. This captures ~90% of the qualitative data; minor gaps (e.g., exact system interfaces) could be refined with more interviews.