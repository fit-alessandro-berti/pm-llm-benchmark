Here is a comprehensive prompt designed to test the target LLM's ability to analyze process mining data, detect anomalies, and generate SQL for investigation.

***

**System Role / Context:**
You are a Senior Process Mining Analyst and Data Auditor. You have been provided with a dataset from an Order-to-Cash (O2C) process stored in a PostgreSQL database. Your goal is to audit the process for compliance, identify risks, and formulate technical investigations.

**Database Schema:**

1.  **`order_event_log`** (Main transactional table)
    *   `case_id` (INTEGER): Unique order identifier.
    *   `event_id` (INTEGER): Primary key.
    *   `activity` (VARCHAR): The step performed (e.g., 'Register Order').
    *   `timestamp` (TIMESTAMP): Time of occurrence.
    *   `resource` (VARCHAR): ID of the employee/bot performing the task.
    *   `additional_info` (VARCHAR): Contextual data (e.g., JSON-like strings or tags).

2.  **`orders`** (Case attributes)
    *   `case_id` (INTEGER): Foreign Key.
    *   `customer_id` (INTEGER): Customer identifier.
    *   `order_type` (VARCHAR): E.g., 'standard', 'priority'.
    *   `order_value` (DECIMAL): Total amount.

3.  **`resources`** (Employee details)
    *   `resource_id` (VARCHAR): Matches `order_event_log.resource`.
    *   `role` (VARCHAR): Job title.
    *   `department` (VARCHAR): Department name.

**The "Happy Path" (Standard Operating Procedure):**
1.  Register Order
2.  Perform Credit Check
3.  Validate Stock
4.  Confirm Shipment
5.  Ship Goods
6.  Issue Invoice
7.  Receive Payment

**Sample Data Snippet (for analysis):**

*Case 1001:*
`Register Order` -> `Perform Credit Check` -> `Validate Stock` -> `Confirm Shipment` -> `Ship Goods` -> `Issue Invoice` -> `Receive Payment`

*Case 1002 (Order Type: Priority, Value: 2000.00):*
`Register Order` -> `Confirm Shipment` -> `Ship Goods` -> `Perform Credit Check` -> `Validate Stock` -> `Issue Invoice` -> `Receive Payment`

*Case 1003 (Order Type: Standard, Value: 1500.00):*
`Register Order` -> `Perform Credit Check` -> `Ship Goods` -> `Issue Invoice` -> `Confirm Shipment` -> `Receive Payment`

*Case 1004 (Order Type: Standard, Value: 3000.00):*
`Register Order` -> `Receive Payment` -> `Issue Invoice` -> `Confirm Shipment` -> `Ship Goods`

**Your Task:**

Based on the schema and the sample data provided above, perform the following analysis:

1.  **Process Diagnosis:**
    Analyze Cases 1002, 1003, and 1004. Compare them against the "Happy Path" (Case 1001). specific deviations, such as skipped steps, out-of-order activities, or logical impossibilities (e.g., shipping before confirming).

2.  **Hypothesis Generation:**
    For each anomaly identified, propose a business or technical hypothesis. *Why* is this happening? Consider possibilities such as:
    *   Is this a "Maverick Buying" issue?
    *   Are specific employees or departments bypassing controls?
    *   Is the system allowing steps to be recorded retrospectively?
    *   Does the `order_type` influence the deviation?

3.  **SQL Investigation Plan:**
    Write **PostgreSQL queries** to investigate your hypotheses on the full dataset. Your queries should not just look for these specific Case IDs, but rather detect the *patterns* of behavior across the whole database.
    *   *Example requirement:* If you suspect shipping happens before credit checks often, write a query to count how many cases violate this specific sequence.
    *   *Example requirement:* Join with the `resources` table to see if specific roles are responsible for skipping steps.
    *   *Example requirement:* Check if high-value orders (from `orders` table) are more prone to process violations.

**Output Format:**
Please structure your response with clear headings: **1. Anomaly Analysis**, **2. Hypotheses**, and **3. Proposed SQL Queries**. Ensure the SQL is syntactically correct for PostgreSQL.