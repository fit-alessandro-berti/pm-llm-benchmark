# Updated DECLARE Model with Bias Mitigation Constraints

```python
declare_model = {
    "existence": {
        "StartApplication": {"support": 1.0, "confidence": 1.0},
        "FinalDecision": {"support": 1.0, "confidence": 1.0},
        "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
    },
    "absence": {},
    "exactly_one": {},
    "init": {
        "StartApplication": {"support": 1.0, "confidence": 1.0}
    },
    "responded_existence": {
        "CheckApplicantAge": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantRace": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}}
    },
    "coexistence": {
        "StartApplication": {"FinalDecision": {"support": 1.0, "confidence": 1.0}},
        "Approve_Minority": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Reject_Minority": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Approve_Senior": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Reject_Senior": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Approve_Female": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Reject_Female": {"ManualReview": {"support": 1.0, "confidence": 1.0}}
    },
    "response": {
        "StartApplication": {"RequestAdditionalInfo": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantRace": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "BiasMitigationCheck": {"FinalDecision": {"support": 1.0, "confidence": 1.0}}
    },
    "precedence": {
        "BiasMitigationCheck": {"Approve": {"support": 1.0, "confidence": 1.0}},
        "BiasMitigationCheck": {"Reject": {"support": 1.0, "confidence": 1.0}},
        "ManualReview": {"FinalDecision": {"support": 1.0, "confidence": 1.0}}
    },
    "succession": {
        "RequestAdditionalInfo": {"FinalDecision": {"support": 1.0, "confidence": 1.0}},
        "BiasMitigationCheck": {"FinalDecision": {"support": 1.0, "confidence": 1.0}}
    },
    "altresponse": {},
    "altprecedence": {},
    "altsuccession": {},
    "chainresponse": {
        "CheckApplicantRace": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}}
    },
    "chainprecedence": {
        "BiasMitigationCheck": {"Approve": {"support": 1.0, "confidence": 1.0}},
        "BiasMitigationCheck": {"Reject": {"support": 1.0, "confidence": 1.0}}
    },
    "chainsuccession": {},
    "noncoexistence": {
        "CheckApplicantRace": {"Reject": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge": {"Reject": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"Reject": {"support": 1.0, "confidence": 1.0}}
    },
    "nonsuccession": {
        "CheckApplicantRace": {"Reject": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge": {"Reject": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"Reject": {"support": 1.0, "confidence": 1.0}}
    },
    "nonchainsuccession": {
        "CheckApplicantRace": {"Reject": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge": {"Reject": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"Reject": {"support": 1.0, "confidence": 1.0}}
    }
}
```

---

## Rationale for Added Bias-Mitigating Constraints

### 1. **Existence: BiasMitigationCheck**
   - **Rationale:** Every loan application must include a bias mitigation check to ensure fair evaluation regardless of applicant demographics. This is a mandatory step in the process.

### 2. **Responded Existence: Sensitive Attributes  BiasMitigationCheck**
   - **Rationale:** Whenever sensitive applicant attributes (Age, Gender, Race) are checked, a `BiasMitigationCheck` must occur somewhere in the trace. This ensures that sensitivity awareness is triggered whenever demographic information is accessed.

### 3. **Coexistence: Decisions on Sensitive Groups  ManualReview**
   - **Rationale:** Any decision involving applicants from sensitive demographics (e.g., `Approve_Minority`, `Reject_Senior`, `Approve_Female`) must coexist with a `ManualReview` activity. This ensures human oversight and reduces the risk of algorithmic bias affecting vulnerable groups.

### 4. **Response: Sensitive Attributes  BiasMitigationCheck**
   - **Rationale:** Ensures that whenever a sensitive attribute is checked, a bias mitigation check is triggered as a response, creating accountability for every demographic data access.

### 5. **Response: BiasMitigationCheck  FinalDecision**
   - **Rationale:** Requires that after a bias mitigation check, the final decision must follow, ensuring decisions are always made through a fairness-aware lens.

### 6. **Precedence: BiasMitigationCheck  (Approve/Reject)**
   - **Rationale:** No approval or rejection decision can occur without first performing a bias mitigation check. This prevents hasty, potentially biased decisions.

### 7. **Precedence: ManualReview  FinalDecision**
   - **Rationale:** For cases involving sensitive demographics, a manual review must precede the final decision, ensuring human judgment mitigates algorithmic bias.

### 8. **Chain Response: Sensitive Attributes  BiasMitigationCheck (immediate)**
   - **Rationale:** When sensitive attributes are discovered, the very next activity must be a bias mitigation check—no intermediate activities allowed. This tightens the constraint to prevent delayed or bypassed fairness checks.

### 9. **Chain Precedence: BiasMitigationCheck  (Approve/Reject) (immediate)**
   - **Rationale:** After bias mitigation, decisions must follow immediately without intervening steps that could re-introduce bias.

### 10. **Noncoexistence: Sensitive Attributes  Reject (no direct co-occurrence)**
   - **Rationale:** Prevents the direct association of sensitive demographic attributes with rejections in the same trace, discouraging patterns where rejection is implicitly tied to protected characteristics.

### 11. **Non-succession: Sensitive Attributes  Reject (no immediate succession)**
   - **Rationale:** A rejection cannot immediately follow the discovery of a sensitive attribute. This blocks "single-step" biased decisions and forces the interposition of fairness checks.

### 12. **Non-chain-succession: Sensitive Attributes  Reject (no direct chaining)**
   - **Rationale:** Strengthens the non-succession constraint to explicitly forbid direct chaining, ensuring the strongest protection against immediate biased outcomes following demographic data discovery.

---

## Summary

These added constraints create a **multi-layered fairness framework** that:

1. **Mandates fairness checks** (`BiasMitigationCheck`) for all applications
2. **Enforces human oversight** (`ManualReview`) for sensitive demographic cases
3. **Prevents direct bias pathways** by blocking immediate succession from demographic data to adverse decisions
4. **Ensures accountability** by requiring fairness mechanisms to activate whenever sensitive attributes are accessed
5. **Decouples sensitive attributes from negative outcomes** through non-coexistence and non-succession constraints

This model significantly reduces the risk of algorithmic and procedural discrimination in the loan application process while maintaining the core business logic of the original model.