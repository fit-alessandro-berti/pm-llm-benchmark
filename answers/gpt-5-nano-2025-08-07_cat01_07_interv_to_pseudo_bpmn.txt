BPMN-like textual model: Invoices for Approval (Accounts Payable) – based on interviews with Mary, Dan, Carlos, Rita, Karen

Pool and lanes
- Pool: Company Invoice Approval Process
  - Lane Mary: Accounts Payable Clerk (AP Clerk)
  - Lane Dan: Purchasing Officer (Purchasing)
  - Lane Carlos: Department Manager (Manager)
  - Lane Rita: Accounts Payable Supervisor (AP Supervisor)
  - Lane Karen: Supplier Relationship Manager (SRM)
  - Lane System: Automated system / emails / data objects

Start
- Start Event: Invoice arrives (email) with data object: Invoice document (and PO reference if present)

Main process flow (textual BPMN steps)

1) Mary: Validate PO presence on the invoice
   - Task 1.1: Check if PO number is present on the invoice.
   - Data: Invoice, PO reference (if any)

2) Gateway: Is PO present?
   - Yes path:
     - Mary: Log invoice into accounting system
       - Data: Logged Invoice record
     - Mary: Forward invoice to Purchasing to confirm goods/services were received
       - Data: Invoice forwarded to Purchasing
     - System/ Dan: Dan reviews against PO
       - Dan Task 2.1: Open PO and compare quantities, prices, and delivery charges against the invoice
       - Data: PO, Invoice, comparison results
     - Gateway: Do details match?
       - Yes path:
         - Dan: Send confirmation email back to AP
           - Data: Confirmation of match
         - Mary: Receive confirmation and perform line-item matching
           - Mary Task 2.2: Match invoice line items against the PO in the system
           - Data: Line-item match result
         - Gateway: Do line items match PO?
           - Yes path:
             - Carlos: Manager review (system shows invoice details, PO, and confirmation)
               - Carlos Task 3.1: Review and decide to approve or reject
               - Data: Invoice details, PO, confirmation
             - Gateway: Approved?
               - Yes path:
                 - System (auto): Schedule payment run
                   - Data: Payment schedule
                 - End: Invoice approved and payment scheduled
               - No path (Manager rejection/hold):
                 - Carlos Task 3.2: Reject or hold for investigation
                   - If held/rejected for investigation:
                     - Rita may be engaged for exception handling (see Exception flow)
                   - After resolution, flow returns to Manager review (3.1) or to exception path as appropriate
           - No path (Line items do not match PO):
             - Trigger exception handling (see Rita and Karen)
       - No path (Details do not match):
         - Dan: Handle discrepancy
           - Dan Task 2.3: Resolve discrepancy (contact supplier for corrections or hold invoice for correction)
           - If pricing or contract terms appear wrong, involve Karen (SRM)
             - Karen Task 4.1: Review contract/terms and advise correct pricing
             - Data: Correct pricing guidance
             - Return to Dan for re-check (2.1) with updated PO/invoice data
           - If the discrepancy cannot be resolved easily, escalate to Rita (AP Supervisor)
           - After resolution (supplier sends corrected invoice or info updated), flow returns to Dan 2.1 (re-check) and on success proceeds to 2.1 -> 2.2 -> 3.x as above
   - No path (PO missing) path:
     - Mary: PO missing on invoice
       - Mary Task 1.2: Send request back to supplier asking for PO or details
       - Data: Incomplete Invoice, Supplier reply
     - Loop: Wait for corrected invoice with PO; whenPO provided, return to Step 1 (PO present path)

3) Gateway: If PO missing or if discrepancy/exception occurs, how is it handled? (Uncertain/alternative paths)
   - In some cases, after Step 1 (PO present) but before final approval, if issues persist:
     - Rita (AP Supervisor) step can be invoked for exceptions
     - Rita Task 3.x: Exception handling
       - Actions: Contact suppliers, coordinate between departments, decide whether to create a retrospective PO for informal services, or decide to reject
       - If a retrospective PO is created:
         - Return to Dan for confirmation from Purchasing, then to Carlos for approval, then to payment scheduling
       - If invoice is rejected: process halts or follows company policy for refund/credit
     - After exceptions are cleared, flow returns to the normal path: confirmation from Purchasing, manager approval, then payment scheduling

4) Gateway: Karen involvement (Pricing/Contract questions)
   - Trigger: Pricing discrepancy or contract terms mismatch detected during Dan’s verification or during Manager review
   - Karen Task 4.1: Review contract terms and advise correct price
   - Data: Contract terms, correct price
   - Return flow: Karen’s guidance is used to re-check the PO/invoice (Dan 2.1), then continue through the normal flow (Mary 2.2, Carlos 3.1/3.2)

5) Mary/Manager flow after match
   - If line-item matching succeeds (2.2 and 2.3 path are resolved):
     - Carlos Task 3.1: Manager approves in the system
     - Data: Manager approval event
     - System: Schedule payment run
     - End: Invoice payment scheduled

6) Exception and hold scenarios (explicit)
   - If Carlos sees suspicious differences (e.g., large variance vs. budget or unexpected items):
     - Carlos Task 3.2: Reject or ask Mary to hold and investigate
     - Rita may be engaged to resolve the exception
     - After resolution, flow returns to: Purchasing confirmation (2.1) -> Mary line-item match (2.2) -> Manager approval (3.1) -> Payment schedule
   - If the invoice is for services with no PO:
     - Rita handles by creating a retrospective PO or deciding to reject
     - After resolution, flow returns to normal path: Purchasing confirmation -> Manager approval -> Payment

7) End
- End Event: Payment run scheduled and invoice process completed

Artifacts, inputs, and outputs (data objects moving through the process)
- Invoice document (input)
- Purchase Order (PO) document (input)
- Goods/services receipt confirmation (input/output from Purchasing)
- System matching results (data)
- Line-item match results (data)
- Discrepancy notes and communications (data)
- Retrospective PO (data object, if created) (output of Rita)
- Corrected invoice from supplier (data)
- Manager approval (output)
- Payment schedule / payment run (output)
- Contract terms / price data (used via Karen)

Roles and responsibilities mapped to BPMN flow
- Mary (AP Clerk): Initial PO validation, logging invoice, forwarding to Purchasing, line-item matching, escalating mismatches
- Dan (Purchasing): Validate invoice against PO, handle discrepancies, confirm receipt, re-check after issues
- Carlos (Manager): Final approval decision, potential rejection or hold if anomalies detected
- Rita (AP Supervisor): Escalation point for unresolved exceptions, coordination with suppliers/departments, retrospective PO option for informal services
- Karen (SRM): Consulted for pricing discrepancies and contract terms; provides authoritative price guidance; does not directly approve invoices
- System: Automates email notifications, enforces policy such as “never approve without confirmed PO,” and schedules payments

Notes on ambiguities and alternate paths
- The exact sequencing between “Goods receipt confirmation” (Purchasing) and “Line-item matching” (AP) is consistently described, but some interview lines imply potential minor reordering in practice. This model treats goods receipt confirmation as a prerequisite for line-item matching, with a feasible exception loop if mismatches arise.
- If a mismatch cannot be resolved by Dan (or after Karen’s pricing guidance), Rita handles the exception and the invoice can be returned to normal flow after resolution. This creates a loop to the purchasing confirmation, manager approval, and payment steps.
- For invoices without PO (formal or retrospective), Rita’s option to create a retrospective PO is included as an explicit exception path, after which the flow re-enters at the Purchasing confirmation step.
- Some steps may occur in parallel in practice (e.g., Karen advising while Dan reviews). This model presents a clear, sequential depiction that is still faithful to the interviews; parallel execution can be added if needed for a more detailed diagram.

Summary of how the model can be converted to BPMN
- Use lanes for Mary, Dan, Carlos, Rita, Karen, and System
- Start with a Start Event: Invoice arrives
- Use a PO-present gateway with Yes/No branches
- Map Mary’s logging, forwarding to Purchasing, then Dan’s PO comparison
- Insert a discrepancy gateway with branches to: standard correction loop, Karen involvement, and Rita exception handling
- Include a line-item match gateway
- Include Manager approval gateway with an exception path back to hold/reject
- Include a final payment scheduling task by the System after Manager approval
- End with End Event: Payment scheduled

If you’d like, I can also provide this as a clean BPMN XML snippet or as a simplified ASCII diagram to paste into a diagramming tool.