# Textual BPMN-like Process Model (v1.0)

## Scope
The model depicts the core "Invoice Approval" journey that takes an incoming invoice through:
- Validation
- Verification
- Approval
- Payment-scheduling

**Actors and supporting groups** (Accounts Payable (AP) Clerk, Purchasing Officer, Department Manager, AP Supervisor, Supplier-Relationship Manager) are shown by swim-lanes.  
**Artifacts/document types** (Invoice in various media, Purchase-Order (PO) reference, Confirmation e-mail, etc.) are mentioned inline.

## Key Assumptions
- All parties participate within the same shared system (ERP).
- A supplier/manually created retrospective PO is produced only when a valid pre-approved PO cannot be matched to an invoice.
- Exception escalation is always possible and documented.

## 1. **Start Event**
**Trigger:** "Invoice arrives (email, PDF, paper, etc.)".

## 2. **Receive Invoice**
- **Actor:** AP Clerk (Mary)
- **Action:** Receive invoice into AP inbox.

**Input:** Raw invoice document (any format).

## 3. **[Gateway] Has PO Number?**
**Branch Criteria:** Invoice contains a valid purchase-order reference.
- **YES  4A (Invoice with PO Number)**
- **NO  4B (Invoice without PO Number)**

**Corresponding outputs to downstream tasks:**
- YES  Email from AP log with PO reference
- NO  Outgoing email to supplier requesting PO/reference; loop back when response received

## 4A. Invoice with PO Number
1. **Log Invoice**
   - System records (invoice, PO, supplier, date)
2. **Forward to Purchasing**
   - Trigger: automated notification to Purchasing Officer (Dan)

## 4B. Invoice without PO Number
- **Action:** Send supplier notice requesting missing information
- **Post-action loop back to:** "Receive Invoice" when response received

## 5. **[Gateway] Does Invoice Match PO Recorded by Purchasing?**
**Branch Criteria:** Purchasing confirms line items, quantities, prices, delivery charges.
**Actors:** Purchasing Officer
- **YES  6A (Matched Invoice)**
- **NO  5B (Discrepancy Handling)**

## 5B. Discrepancy Handling
1. **Fourth-party review**
   - Purchasing checks PO or supplier contract with Karen (Supplier-Relationship Manager)
2. Four possible sub-branches:
   - Dependent on nature and resolution path
     - (a) Supplier corrects invoice  LOG & FORWARD to Manager
     - (b) Negotiation continues offline  Suspend Invoice
3. While "suspended", no automatic routing to Manager.

## 6A. [Task] Confirm Match & Forward to Manager
**Actor:** Purchasing Officer
**Action:** Send e-mail confirmation system-banner.

## 7. **[Gateway] Manager Approval Requested**
**Trigger:** Automatic e-mail when:
- Invoice matched
- Purchase confirmed
- No escalation

## 8. **[Gateway] Examine Invoice Details in System**
**Actor:** Department Manager (Carlos)
**Inputs:** Invoice + PO + confirmation
**Gateway logic:**
- **GOOD**  9A (Manager Approves)
- **SUSPICIOUS** (budget variance/unclear items)  8B (Manager Rejects)

## 8B. Manager Rejects Invoice
1. **Inform AP Supervisor (Rita)**
2. **Create exception record**
3. **Action list:**
   - Raise dispute / hold invoice
   - Escalate to Supplier-Relationship Manager (Karen) to resolve via contract or contract amendment
4. Return to "Receive Invoice" after resolution.

## 9A. [Task] Manager Approves
**Party:** Department Manager

## 10. **[Artifact] Approved Invoice Ready**
**Data Object:** Approved Invoice
**Actor:** System
**Action:** State "ready for payment run"

## 11. **[Task] Queue for Next Payment Run**
**Actor:** AP Clerk (Mary)
**Action:** Schedule for payment.

*End Event  Payment.*

## 12. **[Lane-Specific] AP Supervisor Exception Role**
- **Arrival Weight:** triggered only when:
  - Discrepancy exists after:
    - PO check AND
    - Purchasing's match attempt failed OR
  - Invoice lacks contract reference
- **Actions:** Coordinate with Karen + audit trail of supplier/supplier-corrected items
- **Re-entry point:** "Receive Invoice" after final correction

## Model Variations & Uncertainty Notes
- Path A (Manager via Manager Approval) is assumed deterministic; in some accounts uncertain
- There is no explicit "Revert to Supplier" gateway after Manager approval
- Some interview records mention additional route for "high-risk / high-value invoices" to Audit: The model does **not** depict it due to insufficient details in these transcripts
- Payment-run integration shown as a single task; concrete due-date calculation logic omitted

## Legend
- Solid Arrow  Flow with task/role
- Dashed arrow  feedback/exception loop (e.g., 4B back to 2)
- Diamond with "?"  Decision gateway (e.g., 3,5,7,8)
- Swim-lanes  Behavior/role sets as implied above

This textual model should be sufficient for a process-designer to recreate an equivalent BPMN diagram while preserving every business rule and escalation discussed in the interviews.