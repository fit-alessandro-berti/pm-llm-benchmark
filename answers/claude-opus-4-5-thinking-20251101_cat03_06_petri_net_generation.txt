# Insurance Claim Management Petri Net

Here's the Python code to construct an accepting Petri net for the insurance claim management process:

```python
from pm4py.objects.petri_net.obj import PetriNet, Marking
from pm4py.objects.petri_net.utils import petri_utils

# Create the Petri net
net = PetriNet(name="Insurance Claim Management Process")

# ============================================
# CREATE PLACES
# ============================================
# Places represent states between activities
source = PetriNet.Place(name="source")           # Start: New claim arrives
p1 = PetriNet.Place(name="p1")                   # After Claim Registration
p2 = PetriNet.Place(name="p2")                   # After Document Verification
p3 = PetriNet.Place(name="p3")                   # After Fraud Check
p4 = PetriNet.Place(name="p4")                   # After Claim Assessment
p5 = PetriNet.Place(name="p5")                   # After Approval
p6 = PetriNet.Place(name="p6")                   # After Payment
p7 = PetriNet.Place(name="p7")                   # After Notification
sink = PetriNet.Place(name="sink")               # End: Claim Closed

# Add all places to the net
net.places.add(source)
net.places.add(p1)
net.places.add(p2)
net.places.add(p3)
net.places.add(p4)
net.places.add(p5)
net.places.add(p6)
net.places.add(p7)
net.places.add(sink)

# ============================================
# CREATE TRANSITIONS
# ============================================
# Transitions represent activities with labels
t_cr = PetriNet.Transition(name="t_cr", label="Claim Registration")
t_dv = PetriNet.Transition(name="t_dv", label="Document Verification")
t_rds = PetriNet.Transition(name="t_rds", label="Re-Document Submission")
t_fc = PetriNet.Transition(name="t_fc", label="Fraud Check")
t_ii = PetriNet.Transition(name="t_ii", label="In-depth Investigation")
t_ca = PetriNet.Transition(name="t_ca", label="Claim Assessment")
t_ap = PetriNet.Transition(name="t_ap", label="Approval")
t_p = PetriNet.Transition(name="t_p", label="Payment")
t_n = PetriNet.Transition(name="t_n", label="Notification")
t_cl = PetriNet.Transition(name="t_cl", label="Closure")

# Add all transitions to the net
net.transitions.add(t_cr)
net.transitions.add(t_dv)
net.transitions.add(t_rds)
net.transitions.add(t_fc)
net.transitions.add(t_ii)
net.transitions.add(t_ca)
net.transitions.add(t_ap)
net.transitions.add(t_p)
net.transitions.add(t_n)
net.transitions.add(t_cl)

# ============================================
# CREATE ARCS - Main Sequential Flow
# ============================================
# source -> Claim Registration -> p1
petri_utils.add_arc_from_to(source, t_cr, net)
petri_utils.add_arc_from_to(t_cr, p1, net)

# p1 -> Document Verification -> p2
petri_utils.add_arc_from_to(p1, t_dv, net)
petri_utils.add_arc_from_to(t_dv, p2, net)

# p2 -> Fraud Check -> p3
petri_utils.add_arc_from_to(p2, t_fc, net)
petri_utils.add_arc_from_to(t_fc, p3, net)

# p3 -> Claim Assessment -> p4
petri_utils.add_arc_from_to(p3, t_ca, net)
petri_utils.add_arc_from_to(t_ca, p4, net)

# p4 -> Approval -> p5
petri_utils.add_arc_from_to(p4, t_ap, net)
petri_utils.add_arc_from_to(t_ap, p5, net)

# p5 -> Payment -> p6
petri_utils.add_arc_from_to(p5, t_p, net)
petri_utils.add_arc_from_to(t_p, p6, net)

# p6 -> Notification -> p7
petri_utils.add_arc_from_to(p6, t_n, net)
petri_utils.add_arc_from_to(t_n, p7, net)

# p7 -> Closure -> sink
petri_utils.add_arc_from_to(p7, t_cl, net)
petri_utils.add_arc_from_to(t_cl, sink, net)

# ============================================
# CREATE ARCS - Loop for Document Re-Submission
# ============================================
# If documents are incomplete after DV, go to RDS and back to p1
petri_utils.add_arc_from_to(p2, t_rds, net)
petri_utils.add_arc_from_to(t_rds, p1, net)

# ============================================
# CREATE ARCS - Loop for In-depth Investigation
# ============================================
# If fraud check raises doubts, perform II and go back to p2 (before FC)
petri_utils.add_arc_from_to(p3, t_ii, net)
petri_utils.add_arc_from_to(t_ii, p2, net)

# ============================================
# DEFINE INITIAL AND FINAL MARKINGS
# ============================================
# Initial marking: one token in source (new claim filed)
im = Marking()
im[source] = 1

# Final marking: one token in sink (claim closed)
fm = Marking()
fm[sink] = 1

# ============================================
# The accepting Petri net is now complete: (net, im, fm)
# ============================================
print(f"Places: {len(net.places)}")
print(f"Transitions: {len(net.transitions)}")
print(f"Arcs: {len(net.arcs)}")
```

## Process Flow Diagram

```
                    
                                                 
                                                 
[source]  (CR)  [p1]  (DV)  [p2]  (RDS) 
                              
                              
                     (FC)  
                                     
                                     
                           [p3]       
                                     
                     (II)         
                                      
                                      
                            (CA)  [p4]  (AP)  [p5]  (P)  [p6]  (N)  [p7]  (CL)  [sink]
```

## Key Features

| Component | Count | Description |
|-----------|-------|-------------|
| **Places** | 10 | States between activities (source, p1-p7, sink) |
| **Transitions** | 10 | Activities (CR, DV, RDS, FC, II, CA, AP, P, N, CL) |
| **Arcs** | 22 | Connections forming the process flow |

## Loop Behaviors

1. **DV-RDS Loop**: From `p2`, if documents are incomplete:
   - `p2`  `RDS`  `p1`  `DV`  `p2` (repeatable)

2. **FC-II Loop**: From `p3`, if fraud investigation is needed:
   - `p3`  `II`  `p2`  `FC`  `p3` (repeatable multiple times)