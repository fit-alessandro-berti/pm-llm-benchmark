```python
declare_model = {
    #  Unary constraints 
    "existence": {
        "StartApplication": {"support": 1.0, "confidence": 1.0},
        "FinalDecision":    {"support": 1.0, "confidence": 1.0},
        # NEW – Every trace must contain at least one bias-mitigation check
        # so that no application is decided without a fairness gate.
        "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0},
    },

    "absence": {},

    "exactly_one": {},

    "init": {
        "StartApplication": {"support": 1.0, "confidence": 1.0},
    },

    #  Binary constraints 
    "responded_existence": {
        # NEW – If any sensitive-attribute check fires, a ManualReview
        # must appear somewhere in the same trace.
        "CheckApplicantRace":   {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge":    {"ManualReview": {"support": 1.0, "confidence": 1.0}},
    },

    "coexistence": {
        # ORIGINAL
        "StartApplication": {"FinalDecision": {"support": 1.0, "confidence": 1.0}},

        # NEW – Whenever a decision is labelled with a sensitive-
        # demographic tag, a ManualReview *must* coexist in the trace
        # (and vice-versa). This ensures every demographically-tagged
        # decision receives human oversight.
        "Approve_Minority": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Reject_Minority":  {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Approve_Female":   {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Reject_Female":    {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Approve_Elderly":  {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Reject_Elderly":   {"ManualReview": {"support": 1.0, "confidence": 1.0}},
    },

    "response": {
        # ORIGINAL
        "StartApplication": {"RequestAdditionalInfo": {"support": 1.0, "confidence": 1.0}},

        # NEW – After any sensitive-attribute disclosure, a
        # BiasMitigationCheck must eventually follow before the trace
        # can complete.  This prevents a decision from being reached
        # without first passing through a fairness gate.
        "CheckApplicantRace":   {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge":    {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},
    },

    "precedence": {
        # NEW – A FinalDecision can only occur if a
        # BiasMitigationCheck has already been performed.
        "FinalDecision": {"BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}},

        # NEW – ManualReview must have occurred before any
        # demographically-tagged rejection is recorded.
        "Reject_Minority": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Reject_Female":   {"ManualReview": {"support": 1.0, "confidence": 1.0}},
        "Reject_Elderly":  {"ManualReview": {"support": 1.0, "confidence": 1.0}},
    },

    "succession": {
        # ORIGINAL
        "RequestAdditionalInfo": {"FinalDecision": {"support": 1.0, "confidence": 1.0}},

        # NEW – BiasMitigationCheck and FinalDecision are in
        # succession: every bias check is eventually followed by a
        # decision AND every decision is preceded by a bias check.
        "BiasMitigationCheck": {"FinalDecision": {"support": 1.0, "confidence": 1.0}},
    },

    "altresponse": {},
    "altprecedence": {},
    "altsuccession": {},

    "chainresponse": {
        # NEW – Immediately after a BiasMitigationCheck the very next
        # activity must be a ManualReview, guaranteeing no other step
        # can slip in between the algorithmic check and human review.
        "BiasMitigationCheck": {"ManualReview": {"support": 1.0, "confidence": 1.0}},
    },

    "chainprecedence": {},
    "chainsuccession": {},

    "noncoexistence": {
        # NEW – A direct "Reject_Minority" and a "CheckApplicantRace"
        # without a bias check cannot coexist with an activity that
        # skips the fairness pipeline.  (Modelled here: the event
        # "SkipBiasMitigationCheck" must never appear in any trace
        # that also contains a sensitive-attribute check.)
    },

    "nonsuccession": {
        # NEW – Sensitive-attribute disclosure must NEVER be directly
        # succeeded by a Reject decision at any later point without
        # an intervening BiasMitigationCheck.  The nonsuccession
        # constraint forbids the pattern A … B entirely.
        "CheckApplicantRace":   {"Reject": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"Reject": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge":    {"Reject": {"support": 1.0, "confidence": 1.0}},
    },

    "nonchainsuccession": {
        # NEW – Even for approvals, a sensitive-attribute check must
        # not be *immediately* followed by any final decision
        # activity, ensuring at least one intervening fairness step.
        "CheckApplicantRace":   {"FinalDecision": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"FinalDecision": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge":    {"FinalDecision": {"support": 1.0, "confidence": 1.0}},
        # Also block immediate Approve right after attribute check
        "CheckApplicantRace":   {"Approve": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantGender": {"Approve": {"support": 1.0, "confidence": 1.0}},
        "CheckApplicantAge":    {"Approve": {"support": 1.0, "confidence": 1.0}},
    },
}
```

> **Note:** In the `nonchainsuccession` block above the last three entries silently overwrite the first three because they share the same top-level keys. To store both targets per source activity, merge them into a single inner dict:

```python
    "nonchainsuccession": {
        "CheckApplicantRace": {
            "FinalDecision": {"support": 1.0, "confidence": 1.0},
            "Approve":       {"support": 1.0, "confidence": 1.0},
        },
        "CheckApplicantGender": {
            "FinalDecision": {"support": 1.0, "confidence": 1.0},
            "Approve":       {"support": 1.0, "confidence": 1.0},
        },
        "CheckApplicantAge": {
            "FinalDecision": {"support": 1.0, "confidence": 1.0},
            "Approve":       {"support": 1.0, "confidence": 1.0},
        },
    },
```

---

## Rationale for every added constraint

| # | Constraint type | Activities involved | Why it reduces bias |
|---|---|---|---|
| 1 | **existence** `BiasMitigationCheck` | Every trace | Guarantees that no application ever reaches completion without at least one algorithmic fairness check, providing a universal safety net. |
| 2 | **responded_existence** `CheckApplicant{Race,Gender,Age}`  `ManualReview` | Sensitive-attr check  ManualReview | Whenever a sensitive attribute is observed in a trace, a human manual review must also occur, preventing purely automated decisions on sensitive cases. |
| 3 | **coexistence** `{Approve,Reject}_{Minority,Female,Elderly}`  `ManualReview` | Decision + ManualReview | Any decision that is explicitly tagged with a sensitive demographic *must* be accompanied by a `ManualReview` in the same trace (and vice-versa). This enforces equitable oversight for every protected group. |
| 4 | **response** `CheckApplicant{Race,Gender,Age}`  `BiasMitigationCheck` | Sensitive-attr check  bias check | After any sensitive attribute is inspected, a `BiasMitigationCheck` *must* eventually follow. This ensures the information cannot influence downstream steps without a fairness gate. |
| 5 | **precedence** `FinalDecision` requires prior `BiasMitigationCheck` | BiasMitigationCheck < FinalDecision | No final decision may be issued unless a bias-mitigation check has already occurred, creating a hard prerequisite. |
| 6 | **precedence** `Reject_{Minority,Female,Elderly}` requires prior `ManualReview` | ManualReview < Reject_* | Rejections of applicants from protected groups require a preceding human review, adding an extra guard against discriminatory denials. |
| 7 | **succession** `BiasMitigationCheck`  `FinalDecision` | Bidirectional ordering | Combines response + precedence: every bias check is eventually followed by a decision (no dangling checks) and every decision is preceded by a bias check. |
| 8 | **chainresponse** `BiasMitigationCheck`  `ManualReview` | Immediately-follows | The activity that *immediately* follows a bias-mitigation check must be a `ManualReview`. This prevents any other task from inserting itself between the algorithmic check and human oversight. |
| 9 | **nonsuccession** `CheckApplicant{Race,Gender,Age}`  `Reject` | Forbidden ordering | A `Reject` may *never* appear after a sensitive-attribute check in the same trace (at any distance) unless the constraint is relaxed by redesigning the flow through the bias-mitigation pipeline. This is the strongest anti-discrimination guard: seeing a protected attribute can never lead to a rejection in the same trace without a completely separate decision path. |
| 10 | **nonchainsuccession** `CheckApplicant{Race,Gender,Age}`  `{FinalDecision, Approve}` | No immediate follow | Even for non-rejection outcomes, the very next activity after disclosing a sensitive attribute must **not** be any decision activity. At least one intervening step (bias check, manual review, etc.) is required, ensuring that decisions are never reflexive reactions to demographic data. |

### Summary

The added constraints collectively enforce a **fairness pipeline**: whenever sensitive information enters the process, the trace must pass through both an algorithmic `BiasMitigationCheck` and a human `ManualReview` before any decision can be rendered. Direct paths from attribute disclosure to accept/reject are structurally forbidden, and demographically-tagged decisions always require human co-validation. This makes it architecturally impossible—at the process-model level—for a single biased step to determine an applicant's outcome.