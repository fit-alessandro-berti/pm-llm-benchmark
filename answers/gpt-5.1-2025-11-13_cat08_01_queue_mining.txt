---

## 1. Queue Identification and Characterization

### 1.1. How to compute waiting (queue) times

**Definition of waiting time**

For a given visit (case) and ordered activities:

- **Activity service time** = `Timestamp(COMPLETE) – Timestamp(START)` for that activity.
- **Waiting time between activities A  B** =  
  `Timestamp(START of B) – Timestamp(COMPLETE of A)`  
  if `START of B` occurs after `COMPLETE of A`.

In this outpatient context:

- Registration wait = arrival to registration START (if arrival timestamp is available; otherwise approximated).
- Nurse queue = Nurse Assessment START – Registration COMPLETE.
- Doctor queue = Doctor START – Nurse COMPLETE.
- Test queue (e.g., ECG) = Test START – preceding activity COMPLETE.
- Check-out queue = Check-out START – last clinical activity COMPLETE.

Each of these intervals represents a **queue** in front of the next activity/resource.

**Implementation steps (conceptual):**

1. **Sort events by Case ID and Timestamp.**
2. **Pair START / COMPLETE** for each activity instance to get service times.
3. **Compute inter-activity waits** for each case:
   - Identify process steps (e.g., Registration  Nurse  Doctor  Test  Check-out).
   - For each consecutive pair, compute waiting = next.START – previous.COMPLETE.
4. **Assign each waiting time to a “queue name”**, e.g.:
   - Queue_Registration
   - Queue_Nurse_Assessment
   - Queue_Doctor_Cardio
   - Queue_ECG
   - Queue_Checkout

You can refine queues by resource (e.g., Queue_Doctor_Cardio_DrSmith vs Queue_Doctor_Cardio_Overall) or by location (e.g., for Radiology Room 1 vs Room 2).

### 1.2. Key queue metrics

For each queue (e.g., Nurse queue), and for relevant segments (per specialty, per urgency, per time-of-day), compute:

- **Mean waiting time**  
  Average minutes waiting. Useful for overall load picture.

- **Median waiting time**  
  Robust to outliers; closer to “typical” patient experience.

- **Percentiles (e.g., 75th, 90th, 95th)**  
  Reflect tail behavior. The 90th percentile is critical for satisfaction (“10% of patients wait more than X minutes”).

- **Maximum waiting time**  
  Highlights extreme cases; often triggers complaints and clinical risk.

- **Queue frequency**  
  - Number of cases that experience that queue.
  - Proportion of visits affected (e.g., 85% of cardiology visits go through doctor queue).

- **Excessive wait count**  
  Number and proportion of visits where waiting exceeds a threshold (e.g., > 20 minutes for nurse, > 30 minutes for doctor) based on clinical standards or patient expectations.

- **Time-of-day / day-of-week profiles**  
  Average and percentile waits by:
  - Hour of day
  - Day of week
  - Seasonality or known clinic patterns (e.g., Monday mornings)

- **Resource-specific metrics**  
  For queues in front of specific resources:
  - Average wait per doctor, nurse, room.
  - Utilization metrics (from service times, see section 2).

- **Patient-type stratification**  
  For each queue, compare:
  - New vs Follow-up
  - Urgent vs Normal
  - Specialty (Cardio, Ortho, etc.)

This combination shows both **where** and **for whom** queues are problematic.

### 1.3. Identifying the most critical queues

To prioritize, combine three dimensions:

1. **Severity of waiting**
   - High **mean** and **90th percentile** waiting (e.g., Nurse queue mean 18 min, p90 40 min).
   - Respect to clinical / satisfaction thresholds:
     - E.g., any queue where p90 > 30 minutes might be classified as “red”.

2. **Volume / reach**
   - Queues affecting many patients or high-value streams:
     - Queue encountered in > 50% of all cases.
     - Or dominates a high-volume specialty.

3. **Impact on total visit duration and satisfaction**
   - Contribution to **total lead time**:
     - For each queue, estimate contribution to total visit duration (e.g., regression or decomposition: total =  waits +  service).
   - Clinical risk or special groups:
     - Long waits for urgent patients.
     - Long doctor waits for complex specialties (cardio, oncology).

**Practical prioritization rule:**

For each queue, compute a “criticality score,” e.g.:

- Normalize:
  - A = mean wait / target wait
  - B = p90 wait / target wait
  - C = proportion of patients going through the queue
- Score = 0.4·A + 0.4·B + 0.2·C

Rank queues by score. The top 3–5 queues are candidates for immediate intervention (e.g., Doctor_Cardio, Nurse_Assessment_Morning, Blood_Test_Lab).

---

## 2. Root Cause Analysis

### 2.1. Potential root cause categories

1. **Resource bottlenecks**
   - Insufficient doctors/nurses/technicians in certain time windows.
   - Limited rooms/equipment (e.g., one ECG machine).
   - Unbalanced workloads between staff (Dr. Smith overbooked, Dr. Jones underused).

2. **Activity dependencies and handovers**
   - Sequential steps that could be parallelized.
   - Poorly managed handoffs (e.g., nurse completes assessment, but doctor is not alerted promptly or schedule not aligned).

3. **Variability in service times**
   - High variability in doctor consultation times (complex vs simple cases).
   - Unpredictable test durations.
   - Large variance leads to queue buildup even with average capacity sufficient.

4. **Appointment scheduling policies**
   - Overbooking of certain slots.
   - Large block scheduling (e.g., multiple patients booked at 9:00 for the same doctor).
   - Poor alignment of appointment times across dependencies (e.g., lab tests scheduled too tightly against doctor consults).

5. **Patient arrival patterns**
   - Peaks: many patients scheduled/arriving at the same time.
   - Walk-ins not integrated into capacity planning.

6. **Patient type / urgency differentiation**
   - Prioritization of urgent patients causing delays for routine ones.
   - New patients taking longer but scheduled like follow-ups.

### 2.2. Using process mining techniques to pinpoint root causes

**1) Bottleneck analysis (performance mining)**

- **Activity performance analysis**:
  - For each activity: mean/median service time; wait before it.
  - Overlay performance on process model to visually locate slow spots.

- **Resource utilization and workload:**
  From event logs:
  - For each resource (e.g., Doctor, Nurse, Room):
    - Service intervals = [START, COMPLETE] for tasks they perform.
    - Compute **utilization**: total busy time per hour / total available time.
      - High utilization (> 80–85%) suggests risk of queues.
  - Plot workload over time-of-day to reveal peaks.

Insight examples:
- If Doctor Smith’s utilization is 90–95% from 9–11 am and his queue p90 is 40 minutes, that supports a resource bottleneck hypothesis.

**2) Resource analysis and handovers**

- **Handover-of-work graph**:
  - Build graph: edges from resource A to B when A’s activity is followed by B’s activity in a case.
  - High-frequency, high-delay edges pinpoint problematic handovers (e.g., from Nurse 1 to Dr. Smith).
- **Role-based analysis**:
  - Group by role (e.g., all nurses) to see whether queues are global (role-level shortage) or local (specific staff).

**3) Variant analysis (process variants)**

- Compare different “paths” (variants) patients follow:
  - Variant 1: Registration  Nurse  Doctor  ECG  Check-out
  - Variant 2: Registration  Nurse  Blood Test  Doctor  Check-out
- For each variant:
  - Total visit duration.
  - Waiting at each step.
- Identify variants with systematically longer waits:
  - Perhaps cardio patients needing ECG have a large gap between doctor and ECG due to room scheduling.

**4) Case attribute analysis**

Segment waiting times by:

- Patient type:
  - New vs Follow-up – maybe new patients systematically cause longer doctor queues because they are scheduled back-to-back like follow-ups.
- Urgency:
  - Urgent vs Normal – urgent patients jumping ahead create intermittent spikes in normal patient waits.
- Time-of-day / day-of-week:
  - Morning vs afternoon peaks, Monday vs Friday patterns.

**5) Appointment-policy inference**

From event times and resources:

- Examine arrival patterns at each resource versus appointment times.
- Look for:
  - High concurrency of starts around certain clock times (e.g., 5 patients booked at 9:00 for the same doctor).
  - Systematic early/late arrivals compared to scheduled times (if available in a separate table).

**6) Service time variability analysis**

- For each activity and resource:
  - Distribution of service times (mean, standard deviation, coefficient of variation).
- High variation activities (e.g., doctor consultations) are prime candidates for:
  - Separate scheduling rules (long vs short slots).
  - Triage routing to manage complexity.

---

## 3. Data-Driven Optimization Strategies

Below are three concrete strategies, each tied to specific queues, root causes, and data support.

### Strategy 1: Dynamic Doctor Scheduling & Load Balancing

**Targeted queues:**

- Doctor consultation queues, e.g.:
  - Queue_Doctor_Cardio (especially mornings)
  - Queue_Doctor_InternalMed
- Particularly where p90 wait > 30–40 minutes and utilization > 85%.

**Root causes:**

- Resource bottlenecks: Some doctors systematically overbooked.
- Appointment policy: Too many patients clustered at certain time slots.
- Service-time variability: Long/complex visits not accounted for.

**Data-driven design:**

1. **Identify overloaded doctors/time blocks:**
   - For each doctor and hour:
     - Mean wait to doctor.
     - Utilization.
     - Number of concurrent appointments.
   - Flag time segments with:
     - Utilization > 85–90%
     - Mean wait > threshold.

2. **Reallocate and/or stagger bookings:**
   - For doctors in the same specialty:
     - Shift some appointment volume from overloaded doctor/time block to underutilized peers/time blocks.
   - Introduce **staggered starts**:
     - Instead of 4 patients at 9:00, schedule at 9:00, 9:10, 9:20, 9:30 aligning with average service time.

3. **Slot differentiation by visit type:**
   - Derive average + variability of service times for:
     - New vs follow-up
     - Specific procedures (e.g., new cardiac patients).
   - Schedule:
     - Longer slots for new/complex visits.
     - Shorter slots for routine follow-ups.

4. **Data feedback loop:**
   - Implement new schedule for a pilot period (e.g., cardiology for 1–2 months).
   - Re-measure:
     - Doctor queue mean/p90.
     - Doctor utilization.
     - Number of overtime consultations.

**Expected impact:**

- If current average doctor wait is 25 minutes with p90 of 50, and data shows 20% overbooking in mornings:
  - By smoothing and redistributing load, it is realistic to aim for:
    - 20–40% reduction in mean doctor waiting time.
    - Reduced extremes (p90 from 50 to ~30–35 min).
- Positive side-effect: More predictable doctor schedules and reduced overtime.

---

### Strategy 2: Parallelizing Tests and Pre-Work (Nurse & Diagnostics)

**Targeted queues:**

- Nurse Assessment queues.
- Diagnostic test queues (ECG, blood tests, X-ray).
- Doctor queues that are largely “downstream” of these queues.

**Root causes:**

- Strictly sequential flows: everything waits for prior steps even when clinically unnecessary.
- Poor alignment between nurse assessments and downline tests.
- Underutilized testing capacity in some time windows.

**Data-driven design:**

1. **Identify parallelization opportunities via variant analysis:**
   - Analyze which activities are always in sequence vs sometimes parallel.
   - For example, for cardio patients needing ECG:
     - Current: Registration  Nurse  Doctor  ECG  Check-out.
     - Alternative: Registration  Nurse  ECG  Doctor  Check-out (or parallel nurse + lab processes where medically acceptable).

2. **Quantify impact of “reordering” using historical data:**
   - For cases where ECG occurred before/after doctor’s consultation (if variation already exists):
     - Compare total visit duration and wait times.
     - If patients with early ECG have shorter doctor waits, this supports reordering.

3. **Create standardized parallel pathways:**
   - For specific patient types (e.g., repeat cardio patients with known protocol), automatically:
     - Order ECG (or lab) before doctor, scheduled soon after registration.
   - For patients needing multiple tests (blood + ECG):
     - Schedule tests back-to-back before seeing doctor, using multi-resource scheduling.

4. **Operational guardrails:**
   - Only for clinically appropriate cases (define criteria with clinical leadership).
   - Build rules into appointment system and triage protocols.

**Expected impact:**

- Moving tests earlier reduces “dead time” between doctor and tests and can:
  - Reduce doctor queue by ensuring the doctor sees patients once key data is ready.
  - Reduce overall visit duration by 10–20% for pathways that involve multiple tests, based on typical parallelization gains.

Example:
- If ECG queue is 20 minutes average and doctor queue is 30 minutes, and current pathway has patients wait twice (before ECG, then again before doctor), reordering could:
  - Replace two large waits with a single integrated wait while tests happen.
  - Reduce perceived idle waiting.

---

### Strategy 3: Smart Check-in and Real-Time Flow Coordination

**Targeted queues:**

- Registration queue.
- Early nurse assessment queue.
- Downstream propagation of delays (doctor and tests).

**Root causes:**

- Arrivals bunched at certain times due to appointment patterns and patient behavior.
- No real-time coordination of flows (patients all come to the clinic early “just in case,” then wait).
- Static scheduling not adjusted for real-time congestion.

**Data-driven design:**

1. **Arrival and early-stage analysis:**
   - Using logs (plus appointment data if available), analyze:
     - Arrival time vs scheduled time.
     - Registration wait patterns by time-of-day.
     - Impact of late/early arrivals on subsequent queues.

2. **Implement “smart check-in” policies:**
   - Communicate **recommended arrival windows** based on data:
     - For example, new patients: 15–20 minutes before doctor’s slot (accounting for registration + nurse).
     - Follow-ups: 10 minutes before.
   - Spread arrival times more evenly.

3. **Real-time queue monitoring & triage:**
   - Create an operational dashboard fed by event data (or near real-time system logs):
     - Current queue lengths and estimated waits for registration, nurse, each doctor, each test.
   - Use simple rules:
     - If nurse queue is high and doctor queue low, temporarily increase nurse capacity (float nurse from a low-demand area).
     - If lab queue spikes, temporarily delay sending patients from nurse to lab (when clinically safe), or reprioritize urgent vs routine.

4. **Digital notifications to patients:**
   - If system detects doctor running 20 minutes behind:
     - Inform patients via SMS or at kiosk displays to adjust expectations.
   - Optionally allow some patients to remain in waiting area closer to tests or other services rather than queueing physically.

**Expected impact:**

- Even modest **smoothing of arrivals** can reduce peak queue lengths materially:
  - A 20–30% reduction in peak registration and nurse waits is achievable in many settings.
- Real-time balancing reduces extreme waits and gives staff actionable visibility.

---

## 4. Trade-offs and Constraints

### 4.1. Potential trade-offs / negative side-effects

1. **Shifting bottlenecks**
   - Reducing doctor queues by moving tests earlier might create bigger queues at ECG or lab if capacity is not adjusted.
   - More parallelization may crowd diagnostic areas at certain times.

2. **Cost and staffing impact**
   - Adjusting schedules (e.g., adding staff at peak times) may increase labor costs or require redistributing existing staff from other departments.

3. **Staff workload and satisfaction**
   - More dynamic scheduling and real-time adjustments can increase cognitive load and perceived instability for staff.
   - Cross-coverage (e.g., nurses floating between areas) must be managed to avoid burnout.

4. **Care quality and safety**
   - Over-optimization for speed could risk rushing clinical assessments or tests.
   - Parallelizing or reordering steps must respect clinical logic (e.g., some tests may only be safe/meaningful after a doctor’s preliminary exam).

5. **Patient equity**
   - Prioritizing urgent or high-revenue patients can increase waits for routine cases, potentially impacting equity and general satisfaction.

6. **IT and process complexity**
   - Implementing smart check-in & real-time monitoring requires reliable data integration and change management.

### 4.2. Balancing conflicting objectives

To balance wait-time reduction, cost, and quality:

- **Set multi-dimensional targets:**
  - Wait-time targets per queue (e.g., doctor wait p90  30 minutes).
  - Quality metrics (e.g., guideline compliance, clinical error rates).
  - Cost constraints (e.g., no net increase in total staffing hours beyond X%).

- **Use scenario analysis / simulation:**
  - Based on event logs, build a simple discrete-event simulation (or use process mining simulation tools) to test:
    - “What-if we add 1 FTE nurse in the morning?”
    - “What-if we change doctor slot lengths for new vs follow-up?”
  - Select strategies that meet wait-time goals without exceeding cost thresholds.

- **Pilot before full rollout:**
  - Start with one specialty (e.g., cardiology) or a time window.
  - Evaluate impact on both performance and staff satisfaction.
  - Adjust policies before scaling.

- **Include clinicians and staff in design:**
  - Co-design the new flows to ensure they are clinically sound and acceptable to staff, avoiding “speed over safety.”

---

## 5. Measuring Success

### 5.1. KPIs to evaluate effectiveness

**Queue-related KPIs:**

- **Per queue (Registration, Nurse, Doctor_X, ECG, Check-out):**
  - Mean, median, and 90th percentile waiting times.
  - Proportion of patients exceeding defined thresholds (e.g., > 20 minutes nurse, > 30 minutes doctor).
  - Time-of-day specific waits (e.g., mornings vs afternoons).

**Overall process KPIs:**

- **Total visit duration**:
  - Mean and 90th percentile from first activity (arrival/registration) to check-out.
- **Proportion of visits completed within target time** (e.g.,  2 hours).
- **Number of steps per visit** and degree of parallelization where relevant.

**Resource KPIs:**

- Utilization per resource (doctor, nurse, technician, room).
- Overtime hours per resource.
- Variability of workload over the day.

**Quality & safety KPIs:**

- Clinical outcome proxies (e.g., rework steps, repeated tests).
- Rate of guideline deviations (e.g., mandatory pre-test assessment done).

**Patient experience KPIs:**

- Patient satisfaction scores, especially regarding waiting times and perceived coordination (via surveys).
- Complaint volume about waits.

### 5.2. Ongoing monitoring with process mining

**1) Continuous event log extraction**

- Maintain the same event log structure:
  - Case ID, Activity, Resource, START/COMPLETE, Patient Type, Urgency.
- Extract data daily/weekly into the process mining tool.

**2) Control charts and dashboards**

- For key queues (e.g., Doctor_Cardio, Nurse_Overall):
  - Track weekly mean and p90 waits over time.
  - Use statistical process control charts to identify:
    - Sustained improvements.
    - Regression to previous patterns.
- Visual dashboards:
  - Heatmaps of waits by hour and day.
  - Bottleneck visualizations overlaid on process models.

**3) Before–after comparisons**

- For each implemented intervention:
  - Define a pre-period (baseline) and post-period.
  - Compare KPIs using proper statistical tests where appropriate (e.g., difference in medians, variance).
  - Attribute changes to interventions, factoring in seasonal effects.

**4) Iterative improvement**

- Use “process conformance” analysis:
  - Check if staff follow new target pathways (e.g., tests before doctor in specific protocols).
  - If deviations are frequent, investigate:
    - Feasibility issues.
    - Training gaps.
- Regular review meetings:
  - Bring operational and clinical stakeholders to review dashboards and decide next refinement.

---

**Summary**

Using the event log’s START/COMPLETE timestamps, queue mining can quantify waits between all stages of the outpatient visit. By characterizing queues with robust metrics (means, percentiles, frequency, and segmentation by patient type and time-of-day) and applying process mining techniques (bottleneck analysis, resource analysis, variant and case attribute analysis), the clinic can identify true bottlenecks and their root causes.

Data-driven interventions—such as dynamic doctor scheduling, parallelized diagnostic pathways, and smart, real-time coordinated check-in—can reduce critical queue times and overall visit duration while keeping costs under control. Continuous monitoring with clearly defined KPIs ensures that improvements are sustained, unintended consequences are caught early, and the clinic moves toward a more efficient, patient-centered operation.