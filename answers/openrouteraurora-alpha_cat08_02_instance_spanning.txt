## 1. Identifying InstanceSpanning Constraints and Their Impact  

| Constraint | How to Detect it in the Log | Quantitative Impact Metrics | Separating WithinInstance vs. BetweenInstance Waiting |
|------------|----------------------------|----------------------------|----------------------------------------------------------|
| **Shared ColdPacking Stations** | • Filter events where `Requires Cold Packing = TRUE`.<br>• Group by `Resource` (e.g., StationC1C5).<br>• Build a **resourceutilisation timeline** (startcomplete intervals).<br>• Identify overlapping intervals belonging to different cases  contention periods. | • **ColdPacking Queue Time** = starttime of Packing – completiontime of preceding activity (Item Picking) **minus** the intrinsic packing duration (average of noncontended cases).<br>• **Station Utilisation %** = (duration of all coldpacking events) / (observation window × #stations).<br>• **Average Number of Orders Waiting** per station. | • **WithinInstance**: If an order’s packing duration is unusually long (e.g., outlier in the distribution of packing times for that order type).<br>• **BetweenInstance**: If the start of packing is delayed **only** because the station is occupied by another case (detected by overlapping intervals). Use a **waitingtime decomposition**:`Waiting = Start_i – (Completion of previous activity_i)`. If `Start_i` > `Completion of previous activity_i` **and** the station is busy at that moment  betweeninstance. |
| **Batching for Shipping (Geographic Regions)** | • Identify all `Shipping Label Generation` events.<br>• Tag each case with `Destination Region`.<br>• Detect **batch identifiers** (e.g., System (BatchB1)) or infer batches by clustering events that share the same region and have a short interarrival window (e.g., 5min). | • **Batch Formation Delay** = timestamp of the **last** order that joins a batch – timestamp of the **first** order in that batch.<br>• **PostBatch Waiting** = completion time of Shipping Label Generation – time when the batch became “ready” (i.e., when the last order entered the batch).<br>• **Batch Size Distribution** per region. | • **WithinInstance**: If an order’s own processing (e.g., Packing) is slow, it pushes the batch readytime forward.<br>• **BetweenInstance**: If an order finishes early but must wait for slower orders to complete before the batch can be released. Compare each order’s *individual* completion time of the preceding activity to the *batch readytime*. The gap is pure interinstance waiting. |
| **Priority (Express) Handling** | • Flag events where `Order Type = Express`.<br>• Examine resource logs for preemptions: a standard order’s activity is paused (START  later START of the same activity) while an express order starts the same resource.<br>• Build a **preemption matrix** (express vs. standard). | • **ExpressInduced Delay** for standard orders = (actual start of the activity after preemption) – (expected start if no preemption).<br>• **Express Order Leadtime Reduction** = time saved relative to a baseline (e.g., median leadtime of standard orders).<br>• **Preemption Frequency** per resource. | • **WithinInstance**: Long activity duration for a specific order (e.g., a complex packing).<br>• **BetweenInstance**: A standard order’s activity start is postponed **only** because a higherpriority order seized the same resource. Use the preemption matrix to attribute the delay. |
| **Regulatory HazardousMaterial Limit (10 simultaneous)** | • Filter events where `Hazardous Material = TRUE` and activity  {Packing, Quality Check}.<br>• Build a **concurrentcase count** over time: slide a 1minute window and count active hazardous cases. | • **Regulatory Violation Count** = number of timestamps where concurrent hazardous cases >10.<br>• **Hazardous Queue Time** = waiting time before Packing/Quality Check caused by the limit (i.e., when the case is ready but cannot start because the concurrent count is already 10).<br>• **Throughput of Hazardous Orders** (orders per hour). | • **WithinInstance**: A hazardous order that takes longer than average to pack/check.<br>• **BetweenInstance**: Delay that occurs because the global concurrenthazardous limit is already reached. Detect by checking whether the start time of a hazardous activity is later than the completion of the previous activity *and* the concurrenthazardous count at that moment is 10. |

**Why it matters** – Quantifying each metric gives a baseline (current state) and a clear “pain point” that can be tracked after any change.

---

## 2. Analyzing Constraint Interactions  

| Interaction | Potential Effect | Why Understanding It Is Critical |
|-------------|------------------|-----------------------------------|
| **Express+ColdPacking** | Express orders that need coldpacking can **preempt** standard coldpacking jobs, causing a cascade of delays for those standard orders. Because coldpacking stations are limited, a burst of express orders may starve the queue, increasing coldpacking waiting time dramatically. | If we only optimise coldpacking capacity without considering priority, we may inadvertently increase expressorder leadtimes (the very metric we want to improve). |
| **Batching+Hazardous Limit** | A batch for a region may contain many hazardous orders. If the batch size exceeds the regulatory limit, some hazardous orders must wait **outside** the batch, breaking the batch and forcing a reformation, which inflates batch formation delay and reduces overall throughput. | Ignoring the hazardous limit when redesigning batch logic could cause more frequent batch splits, worsening the very metric (batch formation delay) we aim to improve. |
| **ColdPacking+Batching** | Orders that need coldpacking may be spread across regions. If a batch is formed before all coldpacked orders are ready, the batch will wait for the last coldpacked order, increasing batch waiting time. Conversely, forcing a batch to wait for coldpacking can idle other resources. | A balanced approach must synchronise coldpacking completion with batch formation; otherwise we waste capacity on both sides. |
| **Express+Hazardous Limit** | An express hazardous order may need to jump the queue, but the regulatory limit caps simultaneous hazardous processing. The system may need to **pause** a nonexpress hazardous order to admit the express one, potentially violating the limit if not carefully managed. | A naïve priority rule could cause compliance breaches; we must embed the limit into the priorityscheduling logic. |
| **All Four Together** | A surge of express, coldpacking, hazardous orders heading to the same region can create a **perfect storm**: resource contention, batch waiting, priority preemptions, and regulatory caps simultaneously. | Understanding the combined effect is essential for any “global” optimisation (e.g., dynamic staffing) because fixing one constraint in isolation may shift the bottleneck to another. |

**Analytical approach** – Use **processaware conformance checking** with **multicase constraints** (e.g., Declare or Temporal Logic) to detect violations that involve two or more cases simultaneously. Visualise with **resourceutilisation heatmaps** and **batchcompletion timelines** to spot overlapping peaks.

---

## 3. Developing ConstraintAware Optimization Strategies  

### Strategy1 – **Dynamic, PrioritySensitive ColdPacking Scheduler**  

| Aspect | Detail |
|--------|--------|
| **Primary constraint(s)** | Shared ColdPacking, Express Priority, Hazardous Limit |
| **Change** | Implement a **realtime scheduler** that: <br>1. Maintains a *priority queue* per coldpacking station.<br>2. Guarantees that express orders are placed at the head **only if** the station is idle; otherwise, the scheduler may **preempt** a standard order **iff** the standard order has not yet entered the “critical” phase (e.g., <30% of its packing duration elapsed).<br>3. Enforces the hazardous limit by tagging hazardous orders and allowing at most 10 concurrent hazardous activities across all stations. If an express hazardous order arrives, the scheduler may **temporarily pause** a nonexpress hazardous order (recorded as a “pauseresume” event). |
| **Data/analysis used** | • Predictive model (e.g., Gradient Boosted Trees) trained on historic coldpacking demand to forecast the number of arriving coldpack orders in the next 15min.<br>• Realtime monitoring of station utilisation and hazardouscase count.<br>• Simulation of preemption impact on downstream activities (using historic leadtime distributions). |
| **Expected outcomes** | • **Reduced Express Leadtime** (target 5min from Picking end to Packing start).<br>• **Controlled Standard Order Delay** – preemptions limited to earlystage packing, keeping average standard waiting <3min.<br>• **Regulatory compliance** – hazardous count never exceeds 10 because the scheduler blocks new hazardous starts when the limit is reached. |

### Strategy2 – **Adaptive Batch Formation with HazardousOrder Buffer**  

| Aspect | Detail |
|--------|--------|
| **Primary constraint(s)** | Shipping Batching, Hazardous Limit, ColdPacking |
| **Change** | Redesign the batchtrigger logic: <br>1. **Dynamic batch size** – instead of a fixed time window, the system forms a batch when **either** (a) a target size (e.g., 20 orders) is reached **or** (b) the **hazardousorder buffer** reaches 10 (the regulatory limit). <br>2. Introduce a **hazardousorder buffer queue** that holds hazardous orders until a batch can accommodate them without exceeding the limit. <br>3. Allow **partial batch release** for nonhazardous orders when the buffer is full, while hazardous orders wait for the next batch. |
| **Data/analysis used** | • Historical batch formation times per region to calibrate target size vs. waiting tradeoff.<br>• Hazardousorder arrival rate estimation (Poisson process) to size the buffer. <br>• Simulation of “partial batch” scenarios to evaluate impact on overall throughput and on the average waiting time of hazardous orders. |
| **Expected outcomes** | • **Lower average batch formation delay** (target 4min). <br>• **No violation of hazardous limit** (buffer ensures 10 hazardous orders per batch). <br>• **Higher throughput** – nonhazardous orders can flow continuously, while hazardous orders are batched efficiently. |

### Strategy3 – **CrossTraining & Flexible Resource Pool (Hybrid ColdPacking/Standard Stations)**  

| Aspect | Detail |
|--------|--------|
| **Primary constraint(s)** | Shared ColdPacking, Express Priority, Batch Delays |
| **Change** | • Identify a subset of standard packing stations (e.g., S5S7) that can be **reconfigured** onthefly to act as coldpacking stations (e.g., by adding portable refrigeration units). <br>• Create a **flex pool** of staff trained on both standard and coldpacking tasks. <br>• Implement a **rulebased trigger**: when the queue length for coldpacking exceeds a threshold (e.g., 3 orders), automatically convert one standard station to coldpacking for a limited time (e.g., 30min). <br>• After the period, the station reverts to standard mode, unless the queue remains high. |
| **Data/analysis used** | • Realtime queue length monitoring (derived from event log streaming). <br>• Costbenefit analysis of reconfiguration time vs. saved waiting time (using historical transition durations). <br>• Sensitivity analysis to determine optimal threshold and duration. |
| **Expected outcomes** | • **Higher effective coldpacking capacity** during peak periods (reducing waiting time by up to 40%). <br>• **Improved express order flow** because express orders that need coldpacking are less likely to be blocked. <br>• **Minimal impact on standard order throughput** because the pool is only activated when standard queue is low (checked via monitoring). |

---

## 4. Simulation and Validation  

1. **Build a DiscreteEvent Simulation (DES) Model**  
   * **Entities** – Orders (with attributes: Order Type, Requires Cold Packing, Hazardous, Destination Region).  
   * **Resources** – Pickers, Standard Packing Stations, ColdPacking Stations, QC Staff, Shipping Batch Processor.  
   * **Activities** – Item Picking, Packing, Quality Check, Shipping Label Generation.  
   * **Rules** – Encode the four constraints as *resourcecapacity* and *globalstate* rules:  
     - ColdPacking capacity = 5 (or dynamic pool size).  
     - Hazardous concurrent limit = 10 (global semaphore).  
     - Batch formation: orders of the same region are collected until batchtrigger condition (size or time) is met.  
     - Priority preemption: express order can preempt a standard order if the preempted order is in the first 30% of its packing duration.  

2. **Parameterisation**  
   * Use **empirical distributions** derived from the event log for activity durations (e.g., Picking ~ LogNormal, Packing ~ Weibull).  
   * Calibrate interarrival rates per order type and region from the threemonth log (e.g., Poisson process with timeofday seasonality).  

3. **Scenario Experiments**  
   * **Baseline** – current process (no optimisation).  
   * **Strategy1** – apply the dynamic scheduler (simulate preemptions, hazardous semaphore).  
   * **Strategy2** – implement adaptive batch logic and hazardous buffer.  
   * **Strategy3** – add flexible stations with crosstraining.  
   * **Combined** – test interactions (e.g., Scheduler + Adaptive Batch).  

4. **KPIs to Capture**  
   * **Average EndtoEnd Leadtime** (order receipt  shipping label).  
   * **Waiting Time Breakdown** (resourcecontention, batchwaiting, prioritypreempt, hazardouslimit).  
   * **Resource Utilisation** (per station, per staff).  
   * **Batch Size & Formation Time** (per region).  
   * **Regulatory Compliance** – % of time hazardousconcurrent count 10.  

5. **Validation Checks**  
   * **Statistical comparison** (e.g., paired ttest) between baseline and each scenario for each KPI.  
   * **Sensitivity analysis** on key parameters (arrival surge, number of coldstations).  
   * **Stresstest** with extreme peaks (e.g., flashsale day) to ensure the solution scales.  

The simulation must **preserve the intercase dependencies**: when an order is delayed because of a shared resource, the model should keep the other order’s progress unchanged, thereby reproducing the true “betweeninstance” waiting effect.

---

## 5. Monitoring PostImplementation  

### Dashboard 1 – **ResourceContention Overview**  

| Widget | Metric | Target |
|--------|--------|--------|
| **ColdPacking Queue Length** (timeseries) | Number of orders waiting for a coldpacking station | 3 (average) |
| **Station Utilisation** | % of time each coldpacking station is busy | 75%±10% |
| **Preemption Frequency** | Count of express preemptions per hour | 5 |
| **Hazardous Concurrent Count** | Realtime semaphore value | 10 (never exceed) |

### Dashboard 2 – **Batch & Shipping Performance**  

| Widget | Metric | Target |
|--------|--------|--------|
| **Batch Formation Time** (by region) | Avg time from first to last order in a batch | 4min |
| **Batch Size Distribution** | Histogram of orders per batch | 1525 (most common) |
| **Batch Release Delay** | Time between batch ready and Shipping Label Generation | 2min |
| **Express Leadtime** | Avg time from Picking end to Shipping label for express orders | 12min |

### Dashboard 3 – **Overall Process Health**  

| Widget | Metric | Target |
|--------|--------|--------|
| **EndtoEnd Leadtime** (overall) | Median and 90th percentile | 30min (median), 45min (90pct) |
| **Compliance Violations** | Count of timestamps where hazardous concurrent >10 | 0 |
| **Throughput** | Orders completed per hour | 120 (baseline +15%) |
| **Average Waiting Time Decomposition** | % waiting due to resource, batch, priority, hazardous | 15% resource, 10% batch, 5% priority, 5% hazardous |

### Continuous Improvement Loop  

1. **Data Ingestion** – Realtime streaming of event logs into a processmining platform (e.g., ProM, Celonis).  
2. **Conformance Checking** – Run a **Declare** model that encodes the four constraints; flag violations instantly.  
3. **RootCause Drilldown** – For any KPI breach, the dashboard links to the underlying cases, showing which constraint caused the delay.  
4. **Feedback to Scheduler** – The dynamic scheduler receives the live queue lengths and hazardcount as inputs, allowing it to adapt thresholds onthefly.  

By regularly reviewing these dashboards, the fulfillment centre can verify that the **instancespanning constraints are being respected** and that the **optimisation strategies are delivering the expected performance gains**. Any regression (e.g., a sudden rise in hazardous concurrent count) triggers an alert and a rapidresponse analysis to adjust staffing or batch parameters.  

---  

### Bottom Line  

* **Identify** the intercase constraints using resourceutilisation timelines, batchformation analysis, and preemption detection.  
* **Quantify** their impact with waitingtime decompositions and compliance metrics.  
* **Model** interactions to avoid “solving one problem and breaking another”.  
* **Implement** three concrete, datadriven strategies that respect the constraints while improving throughput and leadtimes.  
* **Validate** through a DES model that faithfully reproduces the multicase dynamics.  
* **Monitor** with dedicated dashboards and continuous conformance checking to ensure sustained improvement and regulatory compliance.  

These steps provide a pragmatic, processminingcentric roadmap to turn the complex, instancespanning constraints from a bottleneck into a manageable, optimised part of the fulfillment workflow.