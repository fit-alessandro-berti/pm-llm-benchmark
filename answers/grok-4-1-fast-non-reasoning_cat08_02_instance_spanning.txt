# Optimizing E-Commerce Fulfillment Center Operations: Addressing Instance-Spanning Constraints

## 1. Identifying Instance-Spanning Constraints and Their Impact

### Process Mining Techniques for Constraint Identification
Using the event log, I would apply **process discovery** (e.g., Heuristics Miner or Alpha++ Miner) to generate a process model highlighting deviations caused by inter-instance dependencies, supplemented by **dotted chart analysis** and **resource-performance spectograms** to visualize contention.

#### Specific Techniques per Constraint:
- **Shared Cold-Packing Stations**:
  - **Resource Occupancy Analysis**: Filter events where `Requires Cold Packing = TRUE` and `Resource LIKE 'C%'`. Use **resource calendars** to plot station utilization over time, identifying queue formation when >5 concurrent orders.
  - **Metric**: *Cold-Packing Wait Time* = `Packing.START - Previous Activity.COMPLETE` for cold orders only.

- **Shipping Batches**:
  - **Batching Pattern Discovery**: Group events by `Destination Region` and `Resource LIKE 'Batch%'`. Use **context-aware process discovery** to detect artificial waiting patterns before "Shipping Label Gen."
  - **Metric**: *Batch Waiting Time* = `Shipping Label Gen.COMPLETE - Quality Check.COMPLETE` when Resource contains batch ID.

- **Priority Handling (Express Orders)**:
  - **Preemption Analysis**: Identify sequences where `Order Type = Express` interrupts `Standard` orders at shared resources (timestamp overlap + resource switch).
  - **Metric**: *Express-Induced Delay* = Additional time Standard orders spend in activity after Express order starts on same resource.

- **Hazardous Material Limits**:
  - **Concurrency Analysis**: Create sliding windows of 10-minute intervals; count concurrent `Packing`/`Quality Check` events where `Hazardous Material = TRUE`. Flag violations (>10 simultaneous).
  - **Metric**: *Hazardous Throttling Time* = Time orders wait when regulatory limit reached.

### Differentiating Within- vs. Between-Instance Waiting
| Waiting Type | Detection Method | Example Event Pattern |
|--------------|------------------|----------------------|
| **Within-Instance** | Long `COMPLETE-START` gaps for *same case* with no intervening events from other cases on same resource | `ORD-5001 Packing START  25min  COMPLETE` (no other orders on Station S7) |
| **Between-Instance** | `START` events queued behind other cases' `COMPLETE` on same resource, or batch formation waits | `ORD-5002 Packing START` while `ORD-5001` still occupies Station S7 |

**Key Metric**: *Contention Ratio* = (Between-instance wait time) / (Total wait time) per activity-resource pair.

## 2. Analyzing Constraint Interactions

### Critical Interaction Examples:
1. **Express + Cold-Packing**: An Express order requiring cold-packing preempts a Standard order, doubling queue length for remaining cold-pack orders (resource starvation).
2. **Batching + Hazardous Limits**: Multiple hazardous orders to same region (`Destination = North`) complete Quality Check simultaneously but wait for batch  risk of regulatory violation if batching delays expose >10 hazardous orders.
3. **Priority + Hazardous**: Express hazardous order bypasses queue  temporarily violates limit (9 standard + 1 express = 10), blocking all subsequent hazardous orders.

### Visualization of Interactions:
```
Resource Contention Heatmap (Time × Resource):
10:20  Station C2: [ORD-5001-Std]  [ORD-5002-Exp*]  [ORD-5004-Haz-WAIT*]
*Exp preemption + Haz regulatory block
```

**Why Crucial**: Isolated fixes fail. Optimizing batching without considering cold-packing queues creates upstream bottlenecks. Interaction analysis via **network mining** (resource flows between constraints) reveals 30-40% of delays stem from *cascading effects*.

## 3. Developing Constraint-Aware Optimization Strategies

### Strategy 1: Dynamic Priority-Aware Resource Allocation
- **Targets**: Shared Cold-Packing + Priority Handling
- **Changes**:
  | Priority Tier | Cold-Packing Access Rule |
  |---------------|-------------------------|
  | Express       | Immediate preemption (<5min current job) |
  | Standard-Haz  | Reserved slot every 3rd position |
  | Standard      | Fill remaining capacity |
- **Data Leverage**: Predict hourly cold-packing demand using **time-series clustering** from event log (peak 10-12 PM).
- **Outcome**: Reduces Express end-to-end time by 25%, Standard cold-packing wait by 15% via reserved slots.

### Strategy 2: Adaptive Batching with Regulatory Safeguards
- **Targets**: Shipping Batches + Hazardous Limits
- **Changes**:
  ```pseudocode
  if (hazardous_orders_in_batch > 3 OR time_since_first_complete > 20min):
      trigger_early_batch_close()
  else:
      wait_for_target_batch_size(8-12 orders)
  ```
- **Data Leverage**: Cluster historical batch data by region + hazardous ratio to optimize dynamic thresholds.
- **Outcome**: 18% faster shipping label generation for hazardous orders; maintains <10 concurrent hazardous compliance.

### Strategy 3: Decoupled Pre-Batching Quality Check
- **Targets**: All constraints (decoupling mechanism)
- **Changes**: Split Quality Check  "QC-Packing" (before packing) + "QC-Shipping" (after batching but before label gen).
  - Hazardous limit applies only to QC-Packing.
  - Batching occurs post-QC-Packing.
- **Data Leverage**: **Conformance checking** validates no quality issues arise from decoupling (historical QC reject rate <1%).
- **Outcome**: Parallelizes batching wait with final QC; eliminates 40% of batch-induced hazardous limit violations.

## 4. Simulation and Validation

### Simulation Approach:
**Discrete Event Simulation (DES)** seeded with process mining outputs:
```
Model Inputs (from PM):
 Discovered process model (with 92% fitness)
 Resource calendars (5 Cold stations, variable pickers)
 Order arrival patterns (Poisson, =15/hr peak)
 Constraint rules (priority, batching, haz limits)
```

### Key Simulation Features to Capture Constraints:
| Constraint | Simulation Element |
|------------|-------------------|
| **Cold-Packing** | Finite resource pool (5 stations); FCFS with priority queue |
| **Batching** | Dynamic batch formation logic; orders "park" in batch-wait buffer |
| **Priority** | Preemption rules coded as resource state changes |
| **Hazardous** | Global counter; throttles new starts when >10 |

**KPIs to Test**:
```
Throughput (orders/hr), Mean End-to-End Time, 
Max Hazardous Concurrency (target 10), 
Express Service Level (95% <2hr)
```

**Validation**: Run *Baseline* vs. *Strategy 1/2/3* vs. *Combined* scenarios over 1000 simulated days. Accept if throughput +15% and constraints respected.

## 5. Monitoring Post-Implementation

### Key Dashboards and Metrics:

#### Dashboard 1: Constraint Health Monitor
| Metric | Target | Alert Trigger |
|--------|--------|---------------|
| Avg Cold-Packing Queue Length | <2 orders | >4 |
| Batch Formation Time (95th percentile) | <25min | >40min |
| Hazardous Concurrency (Max 15min window) | 10 | >10 |
| Express Preemption Rate | 85-95% success | <80% |

#### Dashboard 2: Interaction Effects
**Sankey Diagram**: Orders flowing through constraint combinations (e.g., ExpressColdBatch).
- *Red Flag*: >20% orders hitting Express+Cold+Batching combo.

#### Dashboard 3: Waiting Time Decomposition
**Stacked Bar Chart** per order:
```
Total Wait = Within-Instance (blue) + Cold Contention (orange) + 
             Batch Wait (green) + Haz Throttle (red) + Priority Delay (purple)
```

### Continuous Improvement Loop:
1. **Weekly**: Process mining on new data  detect emerging bottlenecks.
2. **Monthly**: Recalibrate simulation with live data  test parameter updates.
3. **Quarterly**: Conformance checking vs. optimized model  redesign if fitness drops <90%.

This strategy transforms instance-spanning constraints from bottlenecks into manageable flows, achieving 20-30% end-to-end time reduction while maintaining compliance and service levels.