# Log Skeleton for Order Fulfillment Process

Based on the order fulfillment scenario, I'll construct a Log Skeleton that captures the declarative constraints governing this process.

## Analysis

The process follows a main flow: **RO  CA  RI  PI  QC  PO  GSL  D**, with a parallel financial track: **IC  RP** (which can occur after RO).

## Log Skeleton Dictionary

```python
log_skeleton = {
    'equivalence': {
        ('RO', 'D'),      # Every received order must be dispatched
        ('RO', 'CA'),     # Every order needs availability check
        ('PI', 'QC'),     # Every pick requires quality check
        ('PO', 'GSL'),    # Every packed order needs a shipping label
        ('IC', 'RP')      # Every invoice has corresponding payment record
    },
    
    'always_before': {
        ('CA', 'RO'),     # Check Availability requires Receive Order first
        ('RI', 'CA'),     # Reserve Items requires Check Availability first
        ('PI', 'RI'),     # Pick Items requires Reserve Items first
        ('QC', 'PI'),     # Quality Check requires Pick Items first
        ('PO', 'QC'),     # Pack Order requires Quality Check first
        ('GSL', 'PO'),    # Generate Shipping Label requires Pack Order first
        ('D', 'GSL'),     # Dispatch requires Generate Shipping Label first
        ('D', 'PO'),      # Dispatch requires Pack Order first
        ('IC', 'RO'),     # Invoice Customer requires Receive Order first
        ('RP', 'IC')      # Record Payment requires Invoice Customer first
    },
    
    'always_after': {
        ('RO', 'CA'),     # After Receive Order, Check Availability follows
        ('CA', 'RI'),     # After Check Availability, Reserve Items follows
        ('RI', 'PI'),     # After Reserve Items, Pick Items follows
        ('PI', 'QC'),     # After Pick Items, Quality Check follows
        ('QC', 'PO'),     # After Quality Check, Pack Order follows
        ('PO', 'GSL'),    # After Pack Order, Generate Shipping Label follows
        ('GSL', 'D'),     # After Generate Shipping Label, Dispatch follows
        ('RO', 'IC'),     # After Receive Order, Invoice Customer follows
        ('IC', 'RP'),     # After Invoice Customer, Record Payment follows
        ('RO', 'D')       # After Receive Order, Dispatch eventually follows
    },
    
    'never_together': set(),  # No mutually exclusive activities in this process
    
    'activ_freq': {
        'RO': {1},        # Receive Order occurs exactly once
        'CA': {1},        # Check Availability occurs exactly once
        'RI': {1},        # Reserve Items occurs exactly once
        'PI': {1},        # Pick Items occurs exactly once
        'QC': {1, 2},     # Quality Check may occur 1-2 times (re-inspection possible)
        'PO': {1},        # Pack Order occurs exactly once
        'GSL': {1},       # Generate Shipping Label occurs exactly once
        'D': {1},         # Dispatch occurs exactly once
        'IC': {1},        # Invoice Customer occurs exactly once
        'RP': {1}         # Record Payment occurs exactly once
    },
    
    'directly_follows': {
        ('RO', 'CA'),     # Check Availability immediately after Receive Order
        ('PI', 'QC'),     # Quality Check immediately after Pick Items
        ('PO', 'GSL'),    # Generate Shipping Label immediately after Pack Order
        ('GSL', 'D')      # Dispatch immediately after Generate Shipping Label
    }
}
```

## Key Design Decisions

| Constraint Type | Rationale |
|----------------|-----------|
| **Equivalence** | Core activities must occur same number of times to ensure complete fulfillment |
| **Always Before** | Captures sequential dependencies in warehouse operations |
| **Always After** | Ensures subsequent activities will eventually occur |
| **Never Together** | Empty since all activities can coexist in a successful order |
| **Activity Freq** | Most activities occur once; QC allows for re-inspection |
| **Directly Follows** | Tight coupling for critical handoffs (receiving, picking, shipping) |