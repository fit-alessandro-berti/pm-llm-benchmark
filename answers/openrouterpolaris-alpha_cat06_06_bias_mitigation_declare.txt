declare_model = {
    "existence": {
        "StartApplication": {"support": 1.0, "confidence": 1.0},
        "FinalDecision": {"support": 1.0, "confidence": 1.0},
        # Ensure fairness-related control activities are present in traces that use them
        "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0},
        "ManualReview": {"support": 1.0, "confidence": 1.0},
        # Ensure sensitive-attribute checks are modeled as explicit activities
        "CheckApplicantRace": {"support": 1.0, "confidence": 1.0},
        "CheckApplicantGender": {"support": 1.0, "confidence": 1.0},
        "CheckApplicantAge": {"support": 1.0, "confidence": 1.0}
    },
    "absence": {
    },
    "exactly_one": {
    },
    "init": {
        "StartApplication": {"support": 1.0, "confidence": 1.0}
    },
    "responded_existence": {
        # If a race-based decision for a minority applicant occurs, ManualReview must also occur.
        "Approve_Minority": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_Minority": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        # If a gender-based decision for a sensitive group occurs, ManualReview must also occur.
        "Approve_Female": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_Female": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        # If an age-based decision for an older/younger sensitive group occurs, ManualReview must also occur.
        "Approve_OlderApplicant": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_OlderApplicant": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        }
    },
    "coexistence": {
        "StartApplication": {
            "FinalDecision": {"support": 1.0, "confidence": 1.0}
        },
        # If sensitive-attribute-specific decisions occur, they must coexist with ManualReview.
        "Approve_Minority": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_Minority": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        "Approve_Female": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_Female": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        "Approve_OlderApplicant": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_OlderApplicant": {
            "ManualReview": {"support": 1.0, "confidence": 1.0}
        }
    },
    "response": {
        "StartApplication": {
            "RequestAdditionalInfo": {"support": 1.0, "confidence": 1.0}
        },
        # After checking any sensitive attribute, a BiasMitigationCheck must eventually follow
        # before the process completes.
        "CheckApplicantRace": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantGender": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantAge": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        # Before issuing a FinalDecision, BiasMitigationCheck must have occurred after
        # attributes have been evaluated.
        "BiasMitigationCheck": {
            "FinalDecision": {"support": 1.0, "confidence": 1.0}
        }
    },
    "precedence": {
        # Key fairness rule: a decision cannot be made immediately in ignorance of bias checks.
        # Any FinalDecision (Approve/Reject variants) must be preceded by BiasMitigationCheck.
        "FinalDecision": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Approve_Minority": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_Minority": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Approve_Female": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_Female": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Approve_OlderApplicant": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_OlderApplicant": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        }
    },
    "succession": {
        "RequestAdditionalInfo": {
            "FinalDecision": {"support": 1.0, "confidence": 1.0}
        },
        # When sensitive attributes are checked, they must be followed (eventually)
        # by BiasMitigationCheck, not directly (only) by immediate decision.
        "CheckApplicantRace": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantGender": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantAge": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        }
    },
    "altresponse": {
    },
    "altprecedence": {
    },
    "altsuccession": {
    },
    "chainresponse": {
        # Strong protection against immediate biased decisions:
        # After checking a sensitive attribute, the very next step must NOT be a decision.
        # Instead, it must be a BiasMitigationCheck or a neutral step; here we enforce
        # that the next step is BiasMitigationCheck.
        "CheckApplicantRace": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantGender": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantAge": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        }
    },
    "chainprecedence": {
        # Ensure that sensitive-attribute-specific decisions are directly grounded
        # in a preceding BiasMitigationCheck (immediate causal check).
        "Approve_Minority": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_Minority": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Approve_Female": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_Female": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Approve_OlderApplicant": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        },
        "Reject_OlderApplicant": {
            "BiasMitigationCheck": {"support": 1.0, "confidence": 1.0}
        }
    },
    "chainsuccession": {
        # Enforce that once BiasMitigationCheck is done, the process moves to a
        # decision step without inserting a new unchecked sensitive-attribute event.
        "BiasMitigationCheck": {
            "FinalDecision": {"support": 1.0, "confidence": 1.0}
        }
    },
    "noncoexistence": {
        # Prevent purely attribute-driven rejections without checks.
        "Reject_Minority": {
            "FinalDecision_Without_BiasMitigation": {"support": 1.0, "confidence": 1.0}
        }
    },
    "nonsuccession": {
        # Core anti-bias rule: no direct jump from sensitive attribute check to decision.
        "CheckApplicantRace": {
            "Approve": {"support": 1.0, "confidence": 1.0},
            "Reject": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantGender": {
            "Approve": {"support": 1.0, "confidence": 1.0},
            "Reject": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantAge": {
            "Approve": {"support": 1.0, "confidence": 1.0},
            "Reject": {"support": 1.0, "confidence": 1.0}
        }
    },
    "nonchainsuccession": {
        # Forbid the immediate next-step pattern: sensitive attribute -> immediate decision.
        "CheckApplicantRace": {
            "Reject": {"support": 1.0, "confidence": 1.0},
            "Approve": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantGender": {
            "Reject": {"support": 1.0, "confidence": 1.0},
            "Approve": {"support": 1.0, "confidence": 1.0}
        },
        "CheckApplicantAge": {
            "Reject": {"support": 1.0, "confidence": 1.0},
            "Approve": {"support": 1.0, "confidence": 1.0}
        }
    }
}


# Brief rationale for the added constraints

# 1) Coexistence and responded_existence with ManualReview:
#    - For decisions involving sensitive groups (e.g., Approve_Minority, Reject_Minority, etc.),
#      we require that ManualReview is present in the same trace.
#    - This enforces consistent extra scrutiny in all such cases, avoiding selective/manual
#      review only for certain demographics and documenting that decisions are checked.

# 2) Response, precedence, succession with BiasMitigationCheck:
#    - After any CheckApplicantRace/Gender/Age, a BiasMitigationCheck must occur, and
#      FinalDecision (and sensitive-attribute-specific decisions) must be preceded by it.
#    - This structurally embeds a fairness check between attribute inspection and decisions,
#      reducing the chance that sensitive attributes alone drive outcomes.

# 3) Chainresponse, chainprecedence, chainsuccession:
#    - Chainresponse from sensitive checks to BiasMitigationCheck prevents the next step
#      from being an immediate decision.
#    - Chainprecedence ensures sensitive-group decisions directly follow a BiasMitigationCheck,
#      strengthening causal accountability.
#    - Chainsuccession from BiasMitigationCheck to FinalDecision ensures decisions are made
#      promptly after checks, minimizing untracked influences introduced later.

# 4) Nonsuccession and nonchainsuccession:
#    - These constraints explicitly forbid patterns where an attribute check is immediately
#      followed by Approve/Reject (especially Reject), blocking the most direct form of bias
#      where sensitive data triggers an instantaneous decision without safeguards.

# Collectively, these constraints:
# - Force fairness-relevant activities (ManualReview, BiasMitigationCheck) to surround
#   and justify decisions involving sensitive attributes.
# - Disallow direct attribute-to-decision flows.
# - Promote consistent treatment and verifiable audit trails across demographic groups.