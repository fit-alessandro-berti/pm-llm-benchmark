# **Comprehensive Process Mining Approach for Speedy Parcels: Optimizing Last-Mile Delivery Operations**

## **1. Process Discovery and Conformance Checking**

### **Data Preprocessing and Integration**
To prepare the heterogeneous event logs (GPS, scanners, dispatch, maintenance) for process mining, the following steps are essential:

1. **Data Alignment and Case Identification**
   - **Challenge:** Different sources use varied timestamps, case IDs, and event types. The "Case ID" (e.g., `V12-20241205`) suggests a vehicle-day granularity, but GPS events may lack explicit case links.
   - **Solution:**
     - **Link GPS events to cases** by matching timestamps and vehicle IDs. For example, a GPS speed log at `2024-12-05 08:10:55` for `V12` should align with the same case ID as the preceding scanner event (`Arrive Customer`).
     - **Resolve timestamp discrepancies** (e.g., scanner events may be recorded at exact milestones, while GPS logs are continuous). Use a **time threshold** (e.g., 1-minute tolerance) to align events.
     - **Merge event types** into a unified schema, ensuring consistent attributes (e.g., `Location`, `Speed`, `Activity`).

2. **Handling Missing or Incomplete Data**
   - **GPS gaps:** If a vehicle is stationary (e.g., waiting at a customer), use scanner events (`Arrive Customer`) to infer activity.
   - **Maintenance logs:** Link unscheduled stops (e.g., `Unscheduled Stop` at `11:05:00`) to vehicle maintenance records to classify them as breakdowns or routine checks.

3. **Data Cleaning and Normalization**
   - Remove duplicates (e.g., duplicate `Arrive Customer` events).
   - Standardize location formats (e.g., convert `Lat/Lon` strings to decimal degrees).
   - Filter out irrelevant events (e.g., depot movements if not tied to a specific case).

---
### **Process Discovery: Visualizing the Actual Delivery Process**
Using **discovery algorithms** (e.g., **Alpha Miner**, **Heuristics Miner**, or **Inductive Miner**), we generate a **process model** of the actual delivery workflow:

- **Key Process Flow:**
  - **Depot  Route Assignment  Departure  Travel  Customer Arrival  Delivery (Success/Failure)  Departure  Return to Depot**
  - **Deviations:**
    - Unplanned stops (e.g., `Unscheduled Stop` due to engine warnings).
    - Failed deliveries requiring reattempts.
    - Long dwell times at customers (e.g., `Arrive Customer`  `Delivery Failed`  `Depart Customer` with high speed).

- **Visualization:**
  - A **process map** showing:
    - **Success paths** (e.g., `Depot  Travel  Delivery Success  Departure  Return`).
    - **Failure paths** (e.g., `Depot  Travel  Delivery Failed  Reattempt  Departure`).
    - **Hotspots** (e.g., frequent low-speed detections at specific locations).

---
### **Conformance Checking: Comparing Actual vs. Planned Routes**
To identify deviations from the dispatch system’s planned routes:

1. **Define the Planned Process Model**
   - Extract the **dispatch system’s route structure** (e.g., sequence of stops, time windows).
   - Represent it as a **predefined process tree** (e.g., using **BPMN** or **Petri nets**).

2. **Conformance Analysis Techniques**
   - **Sequence Deviations:**
     - Did the driver follow the planned stop order? (e.g., Stop 3 before Stop 2).
   - **Timing Deviations:**
     - Did the driver exceed the planned travel time between stops?
     - Were there **unplanned delays** (e.g., `Unscheduled Stop` at `11:05:00` instead of continuing to the next customer).
   - **Resource Deviations:**
     - Did the vehicle exceed capacity? (e.g., multiple failed deliveries requiring reattempts).
     - Were there **maintenance interruptions** during critical phases (e.g., late-night shifts).

3. **Key Deviations to Monitor**
   - **Route deviations** (e.g., taking a longer route due to traffic).
   - **Time window violations** (e.g., arriving at a customer after the requested time window).
   - **Unplanned stops** (e.g., engine issues, customer not home).
   - **Driver behavior** (e.g., excessive idling, slow speeds in traffic).

---
## **2. Performance Analysis and Bottleneck Identification**

### **Key Performance Indicators (KPIs)**
| **KPI**                          | **Calculation Method**                                                                 | **Business Impact**                          |
|----------------------------------|---------------------------------------------------------------------------------------|---------------------------------------------|
| **On-Time Delivery Rate**        | (# Deliveries within time window) / (Total Deliveries)                              | Measures punctuality.                      |
| **Average Time per Delivery Stop**| Sum of all stop durations (travel + service) / Total Stops                              | Identifies slow routes or customer interactions. |
| **Travel Time vs. Service Time Ratio** | (Total Travel Time) / (Total Service Time)                                         | High ratio suggests inefficient routing.   |
| **Fuel Consumption per km/package** | (Fuel Used) / (Total Distance / Number of Packages)                                  | Reduces operational costs.                 |
| **Vehicle Utilization Rate**      | (Total Distance Traveled) / (Vehicle Capacity × Shift Duration)                     | Measures efficiency.                       |
| **Traffic Delay Frequency**       | (# Low-Speed Events) / (Total Travel Time)                                           | Identifies congestion hotspots.            |
| **Failed Delivery Rate**         | (# Failed Deliveries) / (Total Deliveries)                                          | Reduces re-delivery costs.                  |

---
### **Process Mining Techniques for Bottleneck Identification**
1. **Process Variants Analysis**
   - Compare **high-performing vs. low-performing routes/drivers** to find differences in:
     - **Route efficiency** (e.g., shorter travel times).
     - **Customer interaction times** (e.g., faster dwell times).
     - **Maintenance-related delays** (e.g., fewer unscheduled stops).

2. **Traffic and Speed Analysis**
   - Use **speed logs** to identify:
     - **Traffic hotspots** (e.g., high frequency of low-speed events in certain areas).
     - **Driver behavior** (e.g., aggressive driving vs. cautious driving).

3. **Dwell Time Analysis**
   - Analyze **time between `Arrive Customer` and `Delivery Success/Failure`**:
     - Long dwell times may indicate **customer unavailability** or **poor route planning**.
     - Short dwell times may suggest **overloaded vehicles** (requiring more packages).

4. **Maintenance and Breakdown Analysis**
   - Correlate **unscheduled stops** with:
     - **Vehicle age** (older vehicles may have more breakdowns).
     - **Shift timing** (e.g., more breakdowns during peak hours).
     - **Route complexity** (e.g., hilly routes may stress vehicles).

---
## **3. Root Cause Analysis for Inefficiencies**

### **Potential Root Causes of Delays and Costs**
| **Inefficiency**               | **Possible Root Cause**                                                                 | **Process Mining Insight**                          |
|--------------------------------|----------------------------------------------------------------------------------------|----------------------------------------------------|
| **Late Deliveries**            | Suboptimal routing, traffic congestion, driver fatigue.                                | High frequency of low-speed events in certain routes. |
| **High Fuel Consumption**      | Inefficient speeds, unnecessary stops, poor route planning.                          | Long travel times with high average speeds.         |
| **Failed Deliveries**          | Inaccurate time windows, customer unavailability, vehicle capacity issues.            | High rate of `Delivery Failed` events in specific areas. |
| **Unscheduled Maintenance**     | Poor predictive maintenance, vehicle wear over time.                                    | Frequent `Unscheduled Stop` events linked to vehicle age. |
| **Driver Behavior Issues**     | Aggressive driving, slow responses to traffic.                                         | High variance in speed logs for certain drivers.    |

---
### **Process Mining Techniques for Root Cause Validation**
1. **Correlation Analysis**
   - **Traffic Delays:** Compare low-speed events with **dispatch system time windows**.
   - **Failed Deliveries:** Analyze whether failures occur in **specific neighborhoods** or **time periods**.

2. **Variant Analysis**
   - Compare **top 10% most efficient routes** vs. **bottom 10% inefficient routes**:
     - **Route structure** (e.g., do efficient routes cluster customers in one area?).
     - **Driver assignments** (e.g., do certain drivers follow optimal routes?).

3. **Predictive Modeling**
   - Use **machine learning** (e.g., Random Forest) on process logs to predict:
     - Likely causes of delays (e.g., "If speed < 10 km/h for 5 mins, predict 80% chance of traffic").
     - Optimal routing adjustments based on historical patterns.

---
## **4. Data-Driven Optimization Strategies**

### **Strategy 1: Dynamic Routing Adjustments Based on Real-Time Traffic**
- **Targeted Inefficiency:** Late deliveries due to static routing ignoring traffic.
- **Root Cause:** Static routes assume uniform traffic, but real-time conditions vary.
- **Process Mining Support:**
  - Use **discovered process models** to identify **traffic-correlated delays**.
  - Integrate **real-time GPS speed logs** with dispatch system for dynamic rerouting.
- **Expected Impact:**
  - **On-Time Delivery Rate ** (by 10-15%).
  - **Fuel Consumption ** (by optimizing speed profiles).

### **Strategy 2: Optimized Delivery Territories and Route Sequencing**
- **Targeted Inefficiency:** Inefficient stop sequences leading to long travel times.
- **Root Cause:** Poor clustering of customers in routes.
- **Process Mining Support:**
  - **Cluster analysis** on customer locations to group similar areas.
  - **Variant analysis** to find **optimal stop orders** (e.g., grouping high-value customers).
- **Expected Impact:**
  - **Average Time per Stop ** (by 15-20%).
  - **Vehicle Utilization ** (by reducing empty miles).

### **Strategy 3: Predictive Maintenance and Driver Training**
- **Targeted Inefficiency:** Unscheduled breakdowns increasing operational costs.
- **Root Cause:** Lack of predictive maintenance and driver inefficiencies.
- **Process Mining Support:**
  - **Maintenance log analysis** to identify **vehicle wear patterns**.
  - **Driver behavior analysis** (e.g., aggressive driving causing wear).
- **Expected Impact:**
  - **Maintenance Costs ** (by reducing breakdowns).
  - **Driver Efficiency ** (via targeted training on optimal speeds).

---
## **5. Considering Operational Constraints and Continuous Monitoring**

### **Operational Constraints Integration**
1. **Driver Working Hours**
   - Ensure **dynamic routing** does not exceed **legal hours** (e.g., 10-hour shifts).
   - Use **process mining dashboards** to monitor shift compliance.

2. **Vehicle Capacity**
   - **Route optimization** must respect **package limits** (e.g., no overloading).
   - **Variant analysis** can identify **high-capacity routes**.

3. **Customer Time Windows**
   - **Time window management** should align with **discovered delivery patterns** (e.g., peak hours).
   - **Predictive analytics** can suggest **buffer times** for high-risk deliveries.

---
### **Continuous Monitoring Plan**
1. **Process Mining Dashboards**
   - **Real-time process flow visualization** (e.g., live delivery progress).
   - **KPI tracking** (e.g., On-Time Delivery Rate, Fuel Consumption).

2. **Automated Alerts**
   - Trigger alerts for:
     - **Unplanned delays** (e.g., `Unscheduled Stop` > 5 mins).
     - **Driver behavior anomalies** (e.g., excessive idling).

3. **Iterative Improvement**
   - **Monthly process mining reviews** to adjust strategies.
   - **A/B testing** of new routing algorithms.

---
## **Conclusion**
By applying **process mining** to Speedy Parcels’ event logs, the company can:
 **Discover and conform** the actual delivery process to identify deviations.
 **Quantify bottlenecks** (traffic, maintenance, routing) and their impact.
 **Propose data-driven optimizations** (dynamic routing, predictive maintenance, route clustering).
 **Monitor performance** continuously to ensure sustainability.

**Next Steps:**
1. **Implement data integration** (ETL pipeline for event logs).
2. **Run process discovery** to generate baseline models.
3. **Conduct KPI analysis** to identify top inefficiencies.
4. **Pilot dynamic routing** and monitor results.

This approach ensures **actionable insights** that align with Speedy Parcels’ goals of **improved punctuality and cost reduction**.