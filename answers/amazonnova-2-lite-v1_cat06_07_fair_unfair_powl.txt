## Step 1: Extract & Map the Given Business Process description

1. **Mapping of Process steps & activities:**

From the textual description, we extract key activities and control-flow structures:

- **Receive Application:** Starting point — capture jobs and applications.
- **Initial Screening / Resume Parsing:** This step parses the resume and checks for completeness.
- **Data Completeness Check:** If resume lacks some required data, trigger a loop asking for missing info (loop between resume parsing and request).
- **Request Missing Info (if needed):** Silent / conditional activity to request extra details.
- **Skill Assessment:** The skill test. Binary outcome: pass / fail.
- **Cultural Fit / Community Affiliation Check:** Two possible paths:
   - Standard Cultural Fit Evaluation.
   - Community Affiliation path: If applicant indicates membership in e.g. “Global Business Leaders Club,” or locality flag — then a biased uplift is applied. (XOR branch)
- **Managerial Review:** Human reviewer checks borderline candidates.
- **Final Decision:** Approve or reject.

**Control structures:**
- **Loop:** To collect missing data (resume parsing  check  if missing  loop back  resume parsing)
- **XOR:** For the community affiliation branch that introduces bias
- **Sequence:** For the rest of the process; no parallelism in the description.

---

## Step 2: Construct two POWL models

We build **two POWL models** using pm4py:
1. **POWL with Potential Unfairness** (includes a biased path for community affiliation)
2. **POWL without Unfairness** (all applicants undergo the same cultural fit check)

Both models will be represented as **Powl objects**, built **step by step** using:
- `Transition` for the activities labeled in the process.
- `SilentTransition` for hidden / optional steps.
- `OperatorPOWL` with `Operator.XOR` for the branching (unfair) step.
- `OperatorPOWL` with `Operator.LOOP` for the loop to ensure data completeness before proceeding.

We’ll label each activity using the exact label derived from the process description, and show how the structure maps to the textual description.  
The **root** of each POWL will be a `StrictPartialOrder`, ensuring **correct ordering** between steps, and the use of edges to reflect the flow.

Below are the **two representations**:



### **POWL Model with Potential Unfairness**

This model includes the **XOR branching** that creates a biased path for applicants who belong to the Global Business Leaders Club or live locally. This particular branch gives those applicants an unfair advantage in the cultural fit evaluation.

```python
# Dependencies
import pm4py
from pm4py.objects.powl.obj import StrictPartialOrder, OperatorPOWL, Transition, SilentTransition
from pm4py.objects.process_tree.obj import Operator

### ACTIVITY INSTANCES ##################################################

receive_application = Transition(label="ReceiveApplication")
resume_parsing = Transition(label="ResumeParsing")
data_completeness_check = Transition(label="DataCompletenessCheck")
request_missing_info = SilentTransition()  # No label; optional
skill_assessment = Transition(label="SkillAssessment")
cultural_fit_standard = Transition(label="CulturalFitCheck")
community_affiliation_check = Transition(label="CommunityAffiliationCheck")
managerial_review = Transition(label="ManagerialReview")
final_decision = Transition(label="FinalDecision")

### LOOP & XOR OPERATORS ###############################################

# Loop for data completeness: if missing, loop back to request info.
loop_data_check = OperatorPOWL(operator=Operator.LOOP,
                              children=[resume_parsing, data_completeness_check, request_missing_info])

# XOR for the cultural fit evaluation - the source of unfairness.
# Either you go through Standard Cultural Fit
# OR you go through CommunityAffiliationCheck (if applicant belongs to the Global Business Leaders Club or is local)

xor_cultural_fit = OperatorPOWL(operator=Operator.XOR,
                                children=[cultural_fit_standard, community_affiliation_check])

### ROOT PARTIAL ORDER #################################################

# Build the root model with a strict partial order:
root_unfair = StrictPartialOrder(nodes=[
    receive_application,
    loop_data_check,              # Ensures resume is complete
    skill_assessment,             # Skill test
    xor_cultural_fit,             # Branching: biased vs fair cultural evaluation
    managerial_review,            # Human review, especially for borderline cases
    final_decision               # Outcome: hire or reject
])

# Define order of execution:
root_unfair.order.add_edge(receive_application, loop_data_check)             # Apply must come first
root_unfair.order.add_edge(loop_data_check, skill_assessment)               # Only proceed once resume is complete
root_unfair.order.add_edge(skill_assessment, xor_cultural_fit)              # After skill test, choose evaluation path
root_unfair.order.add_edge(xor_cultural_fit, managerial_review)             # After cultural evaluation
root_unfair.order.add_edge(managerial_review, final_decision)               # Final human check and business outcome

print("POWL Model with Potential Unfairness built.")
```

**Explanation of Potential Bias:**  
In this model, the `XOR` operator `xor_cultural_fit` **branches** into two routes:
- **Standard Cultural Fit**: Generic evaluation for everyone.
- **CommunityAffiliationCheck**: Extra advantage given to applicants affiliated with “Global Business Leaders Club” or local residents, giving them an **unfair boost**.

Since this branch **depends on community membership**, **some applicants (based on affiliations) are more likely to pass**, even if their **actual skills or fit are similar to others**. The **bias** is explicit in the model structure — **an XOR path is used to give special treatment for specific groups**.



### **POWL Model Without Unfairness**

This version removes the biased path, so **all** applicants **go through the same cultural fit evaluation**, ensuring a **fairer** hiring process.

```python

### ACTIVITY INSTANCES ##################################################

receive_application = Transition(label="ReceiveApplication")
resume_parsing = Transition(label="ResumeParsing")
data_completeness_check = Transition(label="DataCompletenessCheck")
request_missing_info = SilentTransition() 
skill_assessment = Transition(label="SkillAssessment")
cultural_fit_check = Transition(label="CulturalFitCheck")
managerial_review = Transition(label="ManagerialReview")
final_decision = Transition(label="FinalDecision")

### LOOP & OPERATOR ###############################################


loop_data_check = OperatorPOWL(operator=Operator.LOOP,
                              children=[resume_parsing, data_completeness_check, request_missing_info])

### ROOT PARTIAL ORDER #################################################

# Build the root model with a strict partial order:
root_fair = StrictPartialOrder(nodes=[
    receive_application,
    loop_data_check,              # Ensures resume is complete
    skill_assessment,             # Skill test
    cultural_fit_check,           # Everyone goes through same cultural evaluation; no branching
    managerial_review,            # Human review
    final_decision               # Outcome
])

# Define order of execution:
root_fair.order.add_edge(receive_application, loop_data_check)             # Application triggers check
root_fair.order.add_edge(loop_data_check, skill_assessment)               # Only proceed once resume complete
root_fair.order.add_edge(skill_assessment, cultural_fit_check)             # After skills, evaluate culture
root_fair.order.add_edge(cultural_fit_check, managerial_review)             # Human review
root_fair.order.add_edge(managerial_review, final_decision)                # Outcome

print("POWL Model without Unfairness built.")
```

**Explanation of Fairness:**  
In this new model, **there is no XOR branching**. **All** applicants go **directly** to the same activity, `CulturalFitCheck`.  
There is also a **loop** to ensure that resumes meet data **requirements** before any evaluation takes place — **preserving process integrity** while **eliminating bias**. This structure **ensures equal evaluation**, **preventing any community group from receiving preferential treatment**.



## Step 3: Summary of Business Meaning & Use Cases 
Both models **capture the same hiring process flow**, i.e., from **application  resume parsing  skill test  cultural evaluation  review  decision**, but **differ in how cultural fit is assessed**:

| Feature                     | POWL with Unfairness                        | POWL without Unfairness                         |
|----------------------------|--------------------------------------------|-------------------------------------------------|
| Control-flow for culture    | XOR branch: biased path + standard path   | Simple sequential activity: single path         |
| Potential bias source       | “CommunityAffiliationCheck” branch        | None                                            |
| Business impact             | Could disadvantage applicants not affiliated with specific groups (e.g., those not in GBLC or not local)   | Consistent and neutral; no implicit advantage   |
| Use case                   | For auditing & impact analysis: identify where bias exists               | For implementing a fair hiring system           |

**Model validation**:
- Use `pm4py.objects.powl.obj.utils.serialize_powl(model)` to export and share as an archival or audit artifact.
- Simulate execution traces with `pm4py.util.powl_util.apply_powl` to **confirm that the unfair model indeed produces traces of the form**: `ReceiveApplication  ResumeParsing  Loop  SkillAssessment  CommunityAffiliationCheck  ManagerialReview  FinalDecision`; while the fair model only follows: `ReceiveApplication  ResumeParsing  Loop  SkillAssessment  CulturalFitCheck  ManagerialReview  FinalDecision`.

---

**Business Outcome:**  
The POWL models demonstrate how **process mining can uncover hidden bias** by analyzing the **execution graph of a business process**. In **real-world settings**, organizations can implement the **“fair”** POWL and **audit** against the **“unfair”** model, ensuring **transparent, equal hiring**. 