```sql
-- Parameter: set K here
WITH params AS (
  SELECT 5::INTEGER AS k
),

-- 1) Build the ordered activity sequence (variant) per case_id
case_variants AS (
  SELECT
    case_id,
    -- sequence as a list to preserve order; ties broken deterministically
    list(activity ORDER BY timestamp, activity) AS activity_seq
  FROM event_log
  GROUP BY case_id
),

-- 2) Count cases per unique sequence (= variant)
variant_counts AS (
  SELECT
    activity_seq,
    COUNT(*) AS case_count
  FROM case_variants
  GROUP BY activity_seq
),

-- 3) Select the top K variants by frequency
top_k_variants AS (
  SELECT vc.activity_seq
  FROM variant_counts vc, params p
  ORDER BY vc.case_count DESC, vc.activity_seq
  LIMIT p.k
),

-- Cases that belong to those top K variants
top_k_cases AS (
  SELECT cv.case_id
  FROM case_variants cv
  JOIN top_k_variants tk
    ON cv.activity_seq = tk.activity_seq
)

-- 4) Return all original events for cases in the top K variants
SELECT e.*
FROM event_log e
JOIN top_k_cases c
  ON e.case_id = c.case_id
ORDER BY e.case_id, e.timestamp, e.activity;
```

This query:
- derives an ordered activity sequence per `case_id` via `list(... ORDER BY timestamp, ...)`,
- groups identical sequences to define variants and counts cases per variant,
- keeps only the top `K` variants, then
- returns all events whose `case_id` belongs to those variants.