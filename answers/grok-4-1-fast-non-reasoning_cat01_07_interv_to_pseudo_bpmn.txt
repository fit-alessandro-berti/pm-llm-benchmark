# BPMN-Like Textual Process Model: Invoice Approval Process

This textual representation consolidates the interview transcripts into a BPMN-like model. It captures the **core happy path**, **decision gateways**, **roles/participants**, **sequence flows**, **exceptions/variations**, and **artifacts**. The model uses standard BPMN notation in text form (e.g., [Start Event], (Task), <Gateway>, --> for sequence flows). Pools/Lanes are defined for roles. Ambiguities or variations are noted inline.

## Pools and Lanes (Roles/Participants)
- **Accounts Payable Clerk (Mary/AP Clerk)**
- **Purchasing Officer (Dan/Purchasing)**
- **Department Manager (Carlos/Manager)**
- **Accounts Payable Supervisor (Rita/AP Supervisor)** (exception handling lane)
- **Supplier Relationship Manager (Karen/SRM)** (exception handling lane)
- **Supplier** (external participant for communications)

## Key Artifacts (Data Objects)
- **Invoice** (input: email/post; output: approved/scheduled)
- **Purchase Order (PO)** (referenced/matched)
- **Receipt Confirmation** (from Purchasing)
- **Match Results** (invoice vs. PO)
- **Approval Notification** (system-generated email)
- **Corrected Invoice** (from Supplier, in exceptions)

## Process Model (Textual BPMN Diagram)

```
[Start Event: Invoice Received (by email)] 
  
(AP Clerk Lane)
(Task: Check for Valid PO Number)
  
<Exclusive Gateway: Has Valid PO?>
   NO > (Task: Send Back to Supplier for Details)
               
           <Exclusive Gateway: Supplier Provides PO/Corrected Invoice?>
              YES > [Loop back to Check for Valid PO Number]
              NO >  (Task: Escalate to AP Supervisor) > [See Exception Sub-Process]
  
   YES > (Task: Log Invoice into Accounting System)
                
              (Task: Forward to Purchasing for Receipt Confirmation)
                
(Purchasing Lane)
              (Task: Compare Invoice to PO (quantities, prices, etc.))
                
              <Exclusive Gateway: Matches PO & Goods Received?>
                 NO > (Task: Contact Supplier or Hold Invoice / Email AP Clerk)
                             
                           <Exclusive Gateway: Issue Resolved? (e.g., via SRM)>
                              YES > [Loop back to Compare Invoice to PO]
                              NO >  (Task: Escalate to AP Supervisor) > [See Exception Sub-Process]
                
                 YES > (Task: Send Confirmation Email to AP Clerk)
                              
                (AP Clerk Lane)
                              (Task: Match Invoice Line Items to PO in System)
                                
                              <Exclusive Gateway: All Matches? (no discrepancies)>
                                 NO > (Task: Email Purchasing to Clarify)
                                             
                                           [Loop back to Purchasing: Compare Invoice to PO]
                                             (Note: May involve SRM for contract checks)
                                
                                 YES > (System Task: Send Auto-Email for Manager Approval)
                                              
                              (Manager Lane)
                                            (Task: Review & Approve Invoice)
                                              
                                            <Exclusive Gateway: Manager Approves?>
                                               NO > (Task: Reject/Hold & Investigate)
                                                           
                                                         (Notify AP Clerk) > [Loop back to Match Invoice Line Items]
                                              
                                               YES > (Task: Schedule for Payment Run)
                                                            
                                                  [End Event: Invoice Scheduled for Payment]
```

## Exception Sub-Process (Parallel Lane: AP Supervisor + SRM)
Triggered from escalations (missing PO, unresolved discrepancies, no PO for informal services).
```
[Ad-hoc Start: Escalation Received]
  
(AP Supervisor Lane)
(Task: Coordinate Resolution (contact Supplier, create retrospective PO, reject))
  
(Optional: Message to SRM Lane)
  (Task: Check Contracts & Liaise with Supplier for Corrections)
    
[Merge back to Main Flow Gateway] (e.g., after PO created or issue resolved)
  
Note: Ensures "problem invoices don’t get stuck"; flows back to normal path (e.g., PO Check or Matching).
[End: Resolution or Rejection]
```

## Key Notes on Consolidations and Ambiguities
- **Happy Path Sequence**: Invoice  PO Check  Log  Purchasing Confirm  Match  Manager Approve  Schedule. Confirmed across Mary, Dan, and Carlos.
- **Decision Gateways**: Based on explicit conditions (PO presence, match/receipt confirmation, manager approval). Loops handle rework (e.g., discrepancies).
- **Roles Alignment**: 
  - AP Clerk (Mary) owns initial handling, logging, matching.
  - Purchasing (Dan) confirms receipt/PO match.
  - Manager (Carlos) final gatekeeper.
  - Supervisors (Rita/Karen) only for exceptions (e.g., no PO, pricing issues, informal contracts).
- **Variations/Exceptions**:
  - ~10-20% cases involve discrepancies/rejections (per Carlos/Rita).
  - No PO: Send back or retrospective creation (Rita).
  - System automations: Email notifications for approvals (Mary/Carlos).
  - Conflicts Resolved: Dan assumes post-confirmation  Manager; Mary confirms sequence. No direct conflicts.
- **Uncertainties**: Payment "run/cycle" details vague (weekly?); assumed as final scheduling task. SRM involvement is ad-hoc, not always required.
- **Visual Conversion Tips**: Use BPMN tools (e.g., Camunda Modeler, Lucidchart). Pools for lanes, black-box pools for Supplier/System. Add data associations for artifacts (e.g., Invoice attached to tasks).

This model is coherent, covers 95%+ of described flows, and can be directly rendered as a BPMN 2.0 diagram.