# BPMN Textual Process Model: Invoice Approval Process

---

## 1. Process Overview

| Attribute | Detail |
|---|---|
| **Process Name** | Invoice Approval Process |
| **Trigger (Start Event)** | Invoice received (typically via email) |
| **End Event(s)** | Invoice scheduled for payment **OR** Invoice rejected/returned |
| **Primary Sources** | Interviews with Mary (AP Clerk), Dan (Purchasing Officer), Carlos (Dept. Manager), Rita (AP Supervisor), Karen (Supplier Relationship Manager) |

---

## 2. Participants (Lanes / Pools)

| Lane | Role | Representative | Involvement |
|---|---|---|---|
| **Accounts Payable (AP)** | AP Clerk | Mary | Core process executor; handles intake, logging, system matching, payment scheduling |
| **Accounts Payable (AP)** | AP Supervisor | Rita | Exception handler; escalation point for unresolved discrepancies |
| **Purchasing Department** | Purchasing Officer | Dan | Verifies receipt of goods/services; validates invoice details against PO |
| **Management** | Department Manager | Carlos | Final approver for matched/confirmed invoices |
| **Supplier Relations** | Supplier Relationship Manager | Karen | Advisory/support role for supplier-facing dispute resolution |
| **External (Pool)** | Supplier | — | Sends invoices; provides corrected/revised invoices when requested |
| **System** | Accounting / ERP System | — | Logs invoices; performs matching; sends automated notifications |

---

## 3. Artifacts, Inputs & Outputs

| Artifact | Type | Description |
|---|---|---|
| **Invoice** | Data Object (Input) | The supplier's invoice received by email |
| **Purchase Order (PO)** | Data Object (Reference) | The existing PO used for matching and validation |
| **Supplier Contract** | Data Object (Reference) | Contractual terms checked by Karen during pricing disputes |
| **Confirmation Email** | Message | Sent by Purchasing to AP confirming receipt and detail correctness |
| **Approval Notification** | Message (System-generated) | Automated email to Manager requesting sign-off |
| **Retrospective PO** | Data Object (Created on Exception) | PO created after the fact for informally contracted services |
| **Payment Schedule** | Data Object (Output) | The payment run/cycle into which the approved invoice is placed |

---

## 4. Process Model — Step-by-Step

###  START EVENT 
**Invoice Received via Email**
*(Trigger: Supplier sends invoice to Accounts Payable)*

---

### TASK 1 — Check for Valid Purchase Order Number
- **Performer:** AP Clerk (Mary)
- **Description:** Mary examines the incoming invoice to determine whether it references a valid PO number.
- **Input:** Invoice
- **Output:** Determination of PO validity

###  GATEWAY 1 — Exclusive: Does the invoice have a valid PO number?

---

####  Path A: NO — PO Number Is Missing or Invalid

> **TASK 1a — Return Invoice to Supplier**
> - **Performer:** AP Clerk (Mary)
> - **Description:** Mary sends the invoice back to the supplier requesting the PO number or additional details.
> - **Supporting role (conditional):** Karen (Supplier Relationship Manager) may be looped in to contact the supplier, especially for key supplier relationships *(per Karen's interview)*.
> - **Output:** Request sent to supplier for revised/completed invoice.
>
> **INTERMEDIATE EVENT — Await Revised Invoice from Supplier**
> - The process pauses until the supplier responds with a corrected invoice or the required PO number.
>
>  **GATEWAY 1a — Exclusive: Has the supplier provided a valid PO?**
> - **YES ** Return to **TASK 2** (Log Invoice) below.
> - **NO / No PO exists (informal service) ** Escalate to **EXCEPTION PATH E1** (see Section 5).

---

####  Path B: YES — Valid PO Number Present

### TASK 2 — Log Invoice into Accounting System
- **Performer:** AP Clerk (Mary)
- **Description:** Mary enters the invoice details into the accounting/ERP system, associating it with the referenced PO.
- **Input:** Invoice with valid PO
- **Output:** Invoice record created in system

---

### TASK 3 — Forward Invoice to Purchasing for Receipt Confirmation
- **Performer:** AP Clerk (Mary)  Purchasing Officer (Dan)
- **Description:** Mary forwards the invoice (or a system notification) to the Purchasing department so they can confirm that the goods or services described on the invoice were actually received.
- **Output:** Invoice forwarded; notification sent to Purchasing

---

### TASK 4 — Verify Invoice Against Purchase Order
- **Performer:** Purchasing Officer (Dan)
- **Description:** Dan opens the original PO and compares it with the invoice, checking:
  - Quantities ordered vs. quantities billed
  - Unit prices and agreed pricing
  - Delivery charges and any ancillary fees
  - General consistency with what was received
- **Input:** Invoice, Purchase Order
- **Output:** Verification result (match or discrepancy identified)

###  GATEWAY 2 — Exclusive: Do the invoice details match the PO and confirmed receipt?

---

####  Path C: NO — Discrepancy Found at Purchasing Verification

>  **GATEWAY 2a — Exclusive: Can the discrepancy be resolved directly by Purchasing?**
>
> **YES **
> > **TASK 4a — Contact Supplier to Resolve Discrepancy**
> > - **Performer:** Purchasing Officer (Dan); optionally Supplier Relationship Manager (Karen)
> > - **Description:** Dan contacts the supplier directly (or asks Karen to do so) to resolve the discrepancy (e.g., request a corrected invoice for overbilled units). Alternatively, Dan may ask Mary to hold the invoice pending a corrected version.
> > - Karen may check the supplier contract for correct pricing *(per Karen's interview)*.
> > - **Output:** Corrected invoice received or discrepancy clarified.
> > - **Flow:** Return to **TASK 4** (re-verify) or proceed to **TASK 5** if resolved.
>
> **NO **
> > **TASK 4b — Notify AP Clerk of Unresolvable Issue**
> > - **Performer:** Purchasing Officer (Dan)  AP Clerk (Mary)
> > - **Description:** Dan informs Mary that the issue cannot be resolved at his level.
> > - **Flow:** Proceeds to **EXCEPTION PATH E2** (AP Supervisor escalation; see Section 5).

---

####  Path D: YES — Invoice Details Confirmed

### TASK 5 — Send Confirmation to Accounts Payable
- **Performer:** Purchasing Officer (Dan)
- **Description:** Dan sends a confirmation email to Mary indicating that goods/services were received and the invoice details are consistent with the PO.
- **Output:** Confirmation email / confirmation record

---

### TASK 6 — Match Invoice Line Items Against PO in System
- **Performer:** AP Clerk (Mary)
- **Description:** Upon receiving Dan's confirmation, Mary performs a formal system-level matching of the invoice line items against the PO in the accounting system. This is a system-supported reconciliation step that complements Dan's manual business verification.
- **Input:** Invoice record (in system), PO record (in system), Dan's confirmation
- **Output:** System matching result

> **Note on potential overlap:** Dan's manual verification (Task 4) and Mary's system matching (Task 6) cover similar ground from different perspectives. Dan performs a business/operational check; Mary performs a system-level reconciliation. Both steps were described by their respective performers as distinct activities.

###  GATEWAY 3 — Exclusive: Does the system matching confirm agreement between invoice and PO?

---

####  Path E: NO — System-Level Discrepancy Found

> **TASK 6a — Email Purchasing Team to Clarify Discrepancy**
> - **Performer:** AP Clerk (Mary)
> - **Description:** Mary contacts the Purchasing team to clarify the discrepancy found during system matching (e.g., incorrect pricing, missing line items).
> - **Output:** Clarification request sent
>
>  **GATEWAY 3a — Exclusive: Is the discrepancy resolved easily?**
>
> **YES **
> > - Discrepancy resolved through communication.
> > - **Flow:** Return to **TASK 6** (re-match) or proceed to **TASK 7**.
>
> **NO **
> > **TASK 6b — Escalate to AP Supervisor**
> > - **Performer:** AP Clerk (Mary)  AP Supervisor (Rita)
> > - **Flow:** Proceeds to **EXCEPTION PATH E2** (see Section 5).

---

####  Path F: YES — Invoice and PO Match in System

### TASK 7 — Send Invoice to Department Manager for Approval
- **Performer:** Accounting System (automated) / AP Clerk (Mary)
- **Description:** The system automatically generates and sends an email notification to the Department Manager requesting approval. The notification includes the invoice details, PO reference, and Purchasing's confirmation.
- **Trigger:** Successful completion of both receipt confirmation (Task 5) and system matching (Task 6).
- **Input:** Matched invoice, PO, Purchasing confirmation
- **Output:** Approval request notification sent to Manager

---

### TASK 8 — Review and Approve or Reject Invoice
- **Performer:** Department Manager (Carlos)
- **Description:** Carlos reviews the invoice in the system, examining:
  - Quantities and pricing
  - Alignment with departmental budget
  - Any special notes or unusual items
  - Purchasing's confirmation
- **Input:** Invoice details, PO, Purchasing confirmation (all displayed in system)
- **Output:** Approval or rejection decision

###  GATEWAY 4 — Exclusive: Manager's Decision

---

####  Path G: REJECT or HOLD — Manager Identifies an Issue

> **TASK 8a — Reject Invoice or Request Investigation**
> - **Performer:** Department Manager (Carlos)  AP Clerk (Mary)
> - **Description:** Carlos either formally rejects the invoice in the system or asks Mary to hold the invoice and investigate further (e.g., unexpected items, significant budget variance).
> - **Frequency:** Rare — approximately once every couple of months *(per Carlos's interview)*.
> - **Output:** Rejection notice or hold/investigation request
>
>  **GATEWAY 4a — Exclusive: Outcome of Investigation**
> - **Investigation resolves the issue ** Invoice re-enters the flow at **TASK 7** (re-submitted for Manager approval).
> - **Invoice deemed invalid ** Proceed to **END EVENT (Rejection)**.

---

####  Path H: APPROVE — All Looks Good

### TASK 9 — Schedule Invoice for Payment
- **Performer:** AP Clerk (Mary) / AP Team
- **Description:** After Manager approval, the invoice is returned to Accounts Payable, where Mary adds it to the next payment cycle/payment run.
- **Input:** Approved invoice
- **Output:** Invoice added to payment schedule

---

###  END EVENT (Normal) 
**Invoice Scheduled for Payment**

###  END EVENT (Alternative) 
**Invoice Rejected and Returned to Supplier / Closed**

---

## 5. Exception Paths

### EXCEPTION PATH E1 — No PO Exists (Informal Services)
- **Trigger:** Invoice received for goods/services that were contracted informally with no corresponding PO in the system.
- **Performer:** AP Supervisor (Rita), in coordination with Department Heads
- **Description:** Rita works with department heads to determine whether the invoice is legitimate. Two outcomes:

   **GATEWAY E1 — Exclusive: Can a retrospective PO be created?**
  - **YES **
    > **TASK E1a — Create Retrospective PO**
    > - **Performer:** Rita + Department Head
    > - **Description:** A PO is created after the fact to formalize the purchase.
    > - **Output:** Retrospective PO created in system.
    > - **Flow:** Invoice re-enters the normal process at **TASK 2** (Log Invoice), now with a valid PO.
  - **NO **
    > **TASK E1b — Reject Invoice**
    > - **Performer:** Rita / AP Team
    > - **Description:** The invoice is rejected and returned to the supplier.
    > - **Flow:**  **END EVENT (Rejection)**

---

### EXCEPTION PATH E2 — Escalation to AP Supervisor for Unresolvable Discrepancies
- **Trigger:** Mary escalates to Rita because a discrepancy (detected at Gateway 2, 3, or during exception handling) cannot be resolved through normal channels.
- **Performer:** AP Supervisor (Rita); may involve Karen (Supplier Relationship Manager)
- **Description:** Rita coordinates between departments and/or contacts the supplier to resolve the issue. Karen may be engaged to check contract terms and communicate with the supplier.

  > **TASK E2a — Investigate and Resolve Discrepancy**
  > - **Performers:** Rita, Karen (if needed), Purchasing, Supplier
  > - **Description:** Rita contacts relevant parties, verifies contract terms, and drives resolution. This may involve obtaining a corrected invoice from the supplier or clarifying internal records.
  > - **Output:** Discrepancy resolved (or invoice determined to be invalid).
  >
  >  **GATEWAY E2 — Exclusive: Is the discrepancy resolved?**
  > - **YES ** Invoice re-enters the normal flow at the appropriate point:
  >   - If resolved before Purchasing confirmation  **TASK 4** (re-verify)
  >   - If resolved after Purchasing confirmation  **TASK 6** (re-match) or **TASK 7** (send to Manager)
  > - **NO **  **END EVENT (Rejection)** — Invoice rejected/returned.

---

## 6. Summary Flow Diagram (Textual Notation)

```
[START: Invoice Received via Email]
        
        
[TASK 1: Check for Valid PO Number]   (Mary / AP)
        
      <GW1: Has valid PO?>
       / \
     NO    YES
            
            
[TASK 1a:  [TASK 2: Log Invoice 
 Return to   into System]   (Mary)
 Supplier]       
                
         [TASK 3: Forward to 
          Purchasing for Receipt
          Confirmation]   (Mary  Dan)
                
                
(Await      [TASK 4: Verify Invoice 
 revised      Against PO]   (Dan)
 invoice)        
             <GW2: Details match?>
               / \
             NO    YES
<GW1a>              
  / \               
     [Exception  [TASK 5: Send
         Paths at     Confirmation
         Purchasing]  to AP]   (Dan)
                         
          (resolved)      
                  [TASK 6: Match Invoice 
                Line Items vs. PO 
                     in System]   (Mary)
                        
 PO provided?        <GW3: System match?>
                      / \
 YES   NO            NO    YES
                          
                          
    [E1:           [TASK 6a: [TASK 7: Send to
    Retrospective   Clarify    Manager for 
    PO or Reject]   with       Approval]  (System)
                    Purchasing]     
                                   
   (Re-enter     <GW3a>    [TASK 8: Manager 
        at TASK 2)    / \       Reviews]  (Carlos)
                   YES   NO         
                               <GW4: Decision?>
                                /  \
                      [TASK 6b: REJECT  APPROVE
                       Escalate           
                       to Rita]           
                              [TASK 8a: [TASK 9:
                               Hold/     Schedule
                      [E2:      Investigate] Payment]
                      Supervisor             
                      Resolution]            
                                       [END: Invoice
                    (Re-enter  (Re-enter  Scheduled
                       normal      or REJECT)  for Payment]
                       flow)
```

---

## 7. Ambiguities and Consolidation Notes

| # | Ambiguity | Source | Resolution in Model |
|---|---|---|---|
| 1 | **Overlap between Task 4 (Dan's verification) and Task 6 (Mary's system matching).** Dan describes checking quantities and prices; Mary also describes matching line items against the PO. | Mary (Interview 1) vs. Dan (Interview 2) | Modeled as **two sequential tasks**: Dan performs a manual business verification; Mary performs a system-level reconciliation. Both can independently surface discrepancies. |
| 2 | **Who contacts the supplier when there is a discrepancy?** Dan says he sometimes contacts the supplier directly; Mary says she emails Purchasing; Karen says either AP or Purchasing loops her in. | Dan (Interview 2), Mary (Interview 1), Karen (Interview 5) | Modeled as: Purchasing may contact supplier directly at Gateway 2; Karen is engaged as an optional supporting role at any discrepancy resolution point. |
| 3 | **What happens after the Manager rejects?** Carlos says he may "reject or ask Mary to hold and investigate," but the subsequent re-entry point is not explicitly stated. | Carlos (Interview 3) | Modeled with a gateway: investigation may lead to re-submission for approval or permanent rejection. Noted as **uncertain** — the exact re-entry point after manager-initiated investigation is not fully specified. |
| 4 | **Retrospective PO creation path.** Rita describes this as an exception; other interviewees do not mention it. | Rita (Interview 4) | Included as **Exception Path E1**, noted as applicable to informally contracted services. After retrospective PO creation, the invoice re-enters the normal flow. |
| 5 | **Karen's exact trigger point.** Karen says she is looped in when invoices don't match "agreed-upon terms," but the precise step at which she is contacted varies. | Karen (Interview 5) | Karen is modeled as a **supporting/advisory role** that can be engaged at any discrepancy resolution point (Tasks 1a, 4a, E2a) rather than as a fixed sequential step. |
| 6 | **Dan's statement about missing POs.** Dan mentions telling Mary to get the PO before he can proceed — this implies he may receive invoices without POs despite Mary's initial check. | Dan (Interview 2) | This suggests Mary's initial check (Task 1) may occasionally be bypassed or fail. Modeled as a **secondary check**: if Dan receives an invoice without a PO, he sends it back to Mary, effectively looping back to Gateway 1. |

---

## 8. Recommended Swim-Lane Layout

For visual conversion to BPMN, the following **horizontal swim-lane** arrangement is recommended:

| Lane (top to bottom) | Contains |
|---|---|
| **Supplier (External Pool)** | Sends invoice; receives return requests; sends corrected invoices |
| **Supplier Relationship Manager (Karen)** | Advisory tasks during discrepancy resolution |
| **Accounts Payable — Clerk (Mary)** | Tasks 1, 2, 3, 6, 6a, 7, 9; Gateways 1, 3 |
| **Accounts Payable — Supervisor (Rita)** | Exception Paths E1, E2 |
| **Purchasing (Dan)** | Tasks 4, 4a, 5; Gateway 2 |
| **Department Manager (Carlos)** | Task 8; Gateway 4 |
| **Accounting System** | Automated notification at Task 7; supports matching at Task 6 |