# **Comprehensive Process Mining & Queue Mining Approach for Outpatient Clinic Optimization**

## **1. Queue Identification and Characterization**

### **1.1 Calculating Waiting Times (Queue Times)**
In this context, **waiting time (queue time)** is defined as the time elapsed between the **completion of one activity** and the **start of the next activity** for the same patient visit (Case ID). This represents the time a patient spends idle, waiting for the next step in their care journey.

Using the event log data:
- For each patient visit (Case ID), identify all activities in chronological order.
- For each consecutive pair of activities (A  B), calculate the waiting time as:
  **Waiting Time (AB) = Start Time of B – Completion Time of A**
- If the start time of B is *before* the completion time of A, the waiting time is zero (indicating overlap or parallel processing, which is rare in sequential care flows).

**Example (from the provided log):**
- **Registration (Complete)  Nurse Assessment (Start):**
  `09:15:20 - 09:08:45 = 6 minutes 35 seconds` (waiting time for V1001)

### **1.2 Key Queue Metrics**
To characterize queues, we calculate the following metrics **per transition (e.g., Registration  Nurse Assessment, Nurse Assessment  Doctor Consultation)** and **per patient type (New, Follow-up, Urgent)**:

| **Metric**                     | **Description**                                                                 | **Why It Matters**                                                                 |
|---------------------------------|---------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| **Average Waiting Time**        | Mean waiting time across all cases for a given transition.                      | Highlights systemic delays.                                                        |
| **Median Waiting Time**         | Middle value of waiting times (less sensitive to outliers).                     | Better reflects typical patient experience.                                        |
| **90th Percentile Waiting Time**| Waiting time exceeded by only 10% of cases.                                     | Identifies worst-case scenarios (critical for patient satisfaction).               |
| **Maximum Waiting Time**        | Longest observed waiting time for a transition.                                 | Reveals extreme outliers (e.g., patients waiting hours).                           |
| **Queue Frequency**             | % of cases experiencing *any* waiting time for a transition.                    | Indicates how often a bottleneck occurs.                                           |
| **Excessive Wait Rate**         | % of cases where waiting time exceeds a predefined threshold (e.g., >15 min).   | Helps prioritize interventions.                                                    |
| **Total Wait Time per Visit**   | Sum of all waiting times for a single patient visit.                            | Measures overall inefficiency in patient flow.                                     |
| **Wait Time Variability**       | Standard deviation of waiting times.                                            | High variability suggests inconsistent processes (e.g., staffing fluctuations).    |

### **1.3 Identifying Critical Queues**
To prioritize queues for intervention, we use a **multi-criteria scoring system** combining:

1. **Impact on Patient Experience:**
   - High **90th percentile waiting times** (e.g., >30 min) are particularly damaging to satisfaction.
   - Transitions with **high excessive wait rates** (e.g., >20% of cases waiting >15 min).

2. **Frequency of Occurrence:**
   - Transitions where **>50% of cases experience waiting** are more critical than rare delays.

3. **Downstream Effects:**
   - Queues that **propagate delays** (e.g., a long wait for a nurse delays the doctor, which delays diagnostics).
   - Queues affecting **high-volume patient types** (e.g., new patients vs. follow-ups).

4. **Urgency Sensitivity:**
   - Queues where **urgent patients** experience long waits (e.g., urgent cases waiting for registration).

**Example Critical Queues (Hypothetical Findings):**
| **Transition**               | **Avg Wait (min)** | **90th %ile (min)** | **Excessive Wait Rate** | **Frequency** | **Priority** |
|------------------------------|--------------------|---------------------|-------------------------|---------------|--------------|
| Registration  Nurse         | 12                 | 25                  | 30% (>15 min)           | 85%           | High         |
| Nurse  Doctor (Cardiology)  | 20                 | 45                  | 45%                     | 90%           | Critical     |
| Doctor  ECG Test            | 8                  | 20                  | 15%                     | 70%           | Medium       |
| ECG Test  Check-out         | 5                  | 10                  | 5%                      | 60%           | Low          |

**Justification for Prioritization:**
- **Nurse  Doctor (Cardiology)** is the most critical due to:
  - High average and 90th percentile waits.
  - High frequency (90% of cases affected).
  - Likely cascading delays (e.g., doctor unavailability affects downstream tests).
- **Registration  Nurse** is also high-priority due to its early position in the flow (delays here propagate downstream).

---

## **2. Root Cause Analysis**

### **2.1 Potential Root Causes of Queues**
Queues arise from **mismatches between demand (patient arrivals) and capacity (resources, process design)**. Key root causes include:

| **Category**               | **Potential Root Causes**                                                                 | **How Process Mining Helps Identify**                                                                 |
|----------------------------|------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------|
| **Resource Bottlenecks**   | - Insufficient staff (clerks, nurses, doctors).<br>- Room/equipment shortages (e.g., ECG machines).<br>- Staff unavailability (breaks, meetings). | - **Resource Utilization Analysis:** Calculate % time each resource is busy.<br>- **Workload Balancing:** Compare wait times by resource (e.g., Nurse 1 vs. Nurse 2).<br>- **Idle Time Analysis:** Identify periods when resources are underutilized. |
| **Activity Dependencies**  | - Sequential processes where one step must finish before the next starts (e.g., nurse assessment before doctor).<br>- Handovers between departments (e.g., doctor  diagnostics). | - **Process Variant Analysis:** Compare wait times for different process paths (e.g., Cardiology vs. Orthopedics).<br>- **Dependency Mapping:** Visualize handoffs between activities. |
| **Variability in Service Times** | - Inconsistent activity durations (e.g., some doctors take 10 min, others 30 min).<br>- Patient complexity (e.g., new patients take longer). | - **Activity Duration Analysis:** Calculate mean, median, and variance of service times.<br>- **Patient Type Segmentation:** Compare wait times for new vs. follow-up patients. |
| **Appointment Scheduling** | - Overbooking or underbooking of slots.<br>- Mismatch between scheduled and actual arrival times.<br>- Lack of buffer time between appointments. | - **Arrival Pattern Analysis:** Compare scheduled vs. actual arrival times.<br>- **Slot Utilization:** Calculate % of slots filled and no-show rates. |
| **Patient Arrival Patterns** | - Peak arrival times (e.g., 9–11 AM).<br>- Bunching of urgent cases.<br>- No-shows or late arrivals. | - **Time-of-Day Analysis:** Plot wait times by hour.<br>- **Urgency Segmentation:** Compare wait times for normal vs. urgent cases. |
| **Process Inefficiencies** | - Redundant steps (e.g., double registration).<br>- Lack of parallelization (e.g., nurse and doctor tasks could overlap).<br>- Poor coordination (e.g., diagnostics not ready when patient arrives). | - **Process Discovery:** Use tools like Disco or Celonis to visualize the "as-is" process.<br>- **Bottleneck Analysis:** Identify steps with the longest queues. |

### **2.2 Process Mining Techniques for Root Cause Analysis**
Beyond basic queue calculation, we apply:

1. **Process Discovery:**
   - Use **Directly-Follows Graphs (DFGs)** or **Petri nets** to visualize the actual patient flow (not just the ideal flow).
   - Identify **deviations** (e.g., patients skipping steps, looping back).

2. **Bottleneck Analysis:**
   - **Performance Spectrum:** Highlight transitions with the longest waiting times.
   - **Resource-Activity Heatmaps:** Show which resources are overloaded (e.g., Dr. Smith is a bottleneck for cardiology).

3. **Variant Analysis:**
   - Group cases by **process variants** (e.g., "Registration  Nurse  Doctor  Check-out" vs. "Registration  Nurse  ECG  Doctor  Check-out").
   - Compare **wait times and durations** across variants to identify inefficient paths.

4. **Social Network Analysis:**
   - Map **handoffs between resources** (e.g., how often Nurse 1 hands off to Dr. Smith).
   - Identify **communication bottlenecks** (e.g., delays in test results reaching doctors).

5. **Time-of-Day Analysis:**
   - Plot **wait times by hour** to identify peak congestion periods.
   - Correlate with **staffing levels** (e.g., are waits longer during shift changes?).

6. **Predictive Modeling:**
   - Use **machine learning** to predict wait times based on:
     - Patient type (new/follow-up/urgent).
     - Time of day.
     - Resource availability.
   - Identify **key drivers** of long waits (e.g., "urgent patients wait 2x longer when Dr. Smith is on duty").

**Example Findings (Hypothetical):**
- **Root Cause 1:** The **Nurse  Doctor (Cardiology)** queue is caused by:
  - **Doctor unavailability:** Dr. Smith is overbooked (utilization >90%).
  - **Variability in service times:** Cardiology consults range from 10–40 min.
  - **Poor scheduling:** Urgent cases are not prioritized, leading to delays for normal patients.
- **Root Cause 2:** The **Registration  Nurse** queue is caused by:
  - **Peak arrivals:** 60% of patients arrive between 8–10 AM.
  - **Staffing mismatch:** Only 2 clerks handle registration during peak hours.
  - **New patient complexity:** New patients take 50% longer to register than follow-ups.

---

## **3. Data-Driven Optimization Strategies**

### **Strategy 1: Dynamic Resource Allocation Based on Predictive Demand**
**Target Queue:** *Registration  Nurse* and *Nurse  Doctor (Cardiology)*
**Root Cause Addressed:**
- **Peak arrival times** (e.g., 8–10 AM) overwhelm registration clerks and nurses.
- **Doctor unavailability** due to fixed schedules not matching demand.

**Proposed Solution:**
- Use **predictive modeling** to forecast hourly patient arrivals by type (new/follow-up/urgent).
- Implement **flexible staffing**:
  - **Registration:** Add a 3rd clerk during peak hours (8–11 AM).
  - **Nurses:** Assign an extra nurse during high-demand periods (e.g., 9–11 AM).
  - **Doctors:** Adjust cardiology schedules to match predicted demand (e.g., Dr. Smith sees 20% more patients on Mondays when demand is highest).
- **Technology Aid:** Deploy a **real-time dashboard** showing current wait times and staffing levels, allowing managers to reallocate resources dynamically.

**Data Support:**
- **Time-of-day analysis** shows 60% of arrivals occur between 8–10 AM.
- **Resource utilization** shows clerks are at 95% capacity during peak hours.
- **Predictive model** forecasts a 15% increase in arrivals on Mondays.

**Expected Impact:**
- **Registration  Nurse wait time:** 30% reduction (from 12 min to 8 min avg).
- **Nurse  Doctor wait time:** 25% reduction (from 20 min to 15 min avg).
- **Patient satisfaction:** Improved due to shorter early-stage waits.

**Trade-offs:**
- **Cost:** Hiring temporary staff or paying overtime.
- **Staff workload:** Risk of burnout if not managed carefully.

---

### **Strategy 2: Parallel Processing for Low-Dependency Activities**
**Target Queue:** *Doctor  ECG Test*
**Root Cause Addressed:**
- **Sequential dependency:** Patients must see the doctor before getting an ECG, even if the ECG could be done first.
- **Underutilized ECG machines:** Machines sit idle while patients wait for the doctor.

**Proposed Solution:**
- **Redesign patient flow** to allow **parallel processing** for low-dependency activities:
  - **New Rule:** If a patient’s doctor visit is delayed >15 min, send them to **pre-approved diagnostics** (e.g., ECG, blood tests) first.
  - **Prerequisite:** Doctors flag patients who need specific tests during triage (e.g., "ECG likely for chest pain patients").
- **Technology Aid:** Use a **mobile app** to notify patients when to proceed to diagnostics if their doctor is delayed.

**Data Support:**
- **Process variant analysis** shows that 40% of cardiology patients get an ECG after the doctor visit.
- **ECG machine utilization** is only 50% during peak hours.
- **Doctor wait times** often exceed 15 min (90th percentile = 45 min).

**Expected Impact:**
- **Doctor  ECG wait time:** 50% reduction (from 8 min to 4 min avg).
- **ECG machine utilization:** Increase from 50% to 70%.
- **Total visit time:** 10% reduction (parallelizing steps).

**Trade-offs:**
- **Care quality risk:** Some patients may get unnecessary tests if not properly triaged.
- **Coordination complexity:** Requires clear communication between nurses, doctors, and diagnostics.

---

### **Strategy 3: Smart Appointment Scheduling with Buffer Times**
**Target Queue:** *Nurse  Doctor (Cardiology)* and *Doctor  Check-out*
**Root Cause Addressed:**
- **Overbooking:** Doctors are scheduled back-to-back with no buffer time.
- **Variability in service times:** Some consults take 10 min, others 40 min.
- **No-shows and late arrivals:** Disrupt the schedule.

**Proposed Solution:**
- **Implement a "buffer-aware" scheduling algorithm**:
  - **Buffer time:** Add 5–10 min between appointments to absorb variability.
  - **Patient segmentation:** Schedule new patients (longer consults) in the morning, follow-ups in the afternoon.
  - **Urgency prioritization:** Reserve slots for urgent cases (e.g., 2 urgent slots per hour).
  - **No-show prediction:** Use historical data to overbook slots with high no-show rates (e.g., 10% overbooking for follow-ups).
- **Technology Aid:** Deploy an **AI-powered scheduler** that adjusts buffers dynamically based on real-time delays.

**Data Support:**
- **Service time analysis** shows cardiology consults have a standard deviation of 12 min.
- **No-show rates** are 15% for follow-ups, 5% for new patients.
- **Current schedule** has no buffers, leading to cascading delays.

**Expected Impact:**
- **Nurse  Doctor wait time:** 40% reduction (from 20 min to 12 min avg).
- **Doctor  Check-out wait time:** 30% reduction (from 5 min to 3.5 min avg).
- **Patient throughput:** 15% increase in daily visits.

**Trade-offs:**
- **Revenue impact:** Fewer appointments per day (but higher completion rates).
- **Staff resistance:** Doctors may dislike fixed buffers (perceived as "wasted time").

---

## **4. Consideration of Trade-offs and Constraints**

### **4.1 Potential Trade-offs**
| **Strategy**               | **Benefits**                                  | **Trade-offs**                                                                 | **Mitigation**                                                                 |
|----------------------------|-----------------------------------------------|--------------------------------------------------------------------------------|--------------------------------------------------------------------------------|
| **Dynamic Resource Allocation** | Shorter waits, higher satisfaction.           | Higher labor costs (overtime, temp staff).                                     | Use part-time staff during peaks; cross-train clerks to assist nurses.         |
| **Parallel Processing**    | Faster diagnostics, shorter visits.           | Risk of unnecessary tests; coordination complexity.                           | Implement strict triage rules; use checklists for nurses.                      |
| **Smart Scheduling**       | Fewer delays, higher throughput.              | Fewer appointments per day; doctor resistance.                                | Pilot with willing doctors; demonstrate revenue gains from reduced no-shows.   |

### **4.2 Balancing Conflicting Objectives**
1. **Wait Time vs. Cost:**
   - **Challenge:** Reducing waits often requires more staff or technology, increasing costs.
   - **Solution:** Start with **low-cost interventions** (e.g., smart scheduling) before adding resources. Use **ROI analysis** to justify investments (e.g., "Reducing waits by 20% increases patient volume by 10%, offsetting staffing costs").

2. **Wait Time vs. Care Quality:**
   - **Challenge:** Parallel processing or shorter consults may reduce thoroughness.
   - **Solution:** **Monitor clinical outcomes** (e.g., readmission rates) post-implementation. Use **checklists** to ensure critical steps aren’t missed.

3. **Staff Workload vs. Patient Experience:**
   - **Challenge:** Adding buffers or parallel processing may increase staff stress.
   - **Solution:** **Engage staff in redesign** (e.g., let nurses suggest workflow improvements). Use **workload balancing** (e.g., rotate high-stress roles).

---

## **5. Measuring Success**

### **5.1 Key Performance Indicators (KPIs)**
| **KPI**                          | **Measurement Method**                                                                 | **Target**                                                                 |
|-----------------------------------|---------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
| **Average Waiting Time per Transition** | Calculate mean wait time for each transition (e.g., Registration  Nurse).            | Reduce by 20–30% from baseline.                                            |
| **90th Percentile Waiting Time**  | Track the 90th percentile wait time for critical transitions.                         | Reduce by 30–40% (e.g., from 45 min to 30 min for Nurse  Doctor).         |
| **Total Visit Duration**          | Sum of all activity durations + waiting times per visit.                              | Reduce by 15–20% (e.g., from 120 min to 100 min avg).                      |
| **Patient Satisfaction (Wait Time)** | Post-visit survey question: "How satisfied were you with your wait times?" (1–5 scale). | Increase score by 0.5–1.0 points.                                         |
| **Resource Utilization**          | % time staff/rooms are busy (e.g., doctor utilization).                                | Maintain 70–80% utilization (avoid overloading).                           |
| **Excessive Wait Rate**           | % of cases with wait times >15 min for any transition.                                | Reduce by 50% (e.g., from 30% to 15%).                                     |
| **Patient Throughput**            | Number of patients seen per day.                                                      | Increase by 10–15%.                                                        |
| **No-Show Rate**                  | % of scheduled patients who do not arrive.                                            | Reduce by 20% (e.g., from 15% to 12%).                                     |

### **5.2 Ongoing Process Monitoring**
To ensure sustained improvement, implement:

1. **Real-Time Dashboards:**
   - Display **current wait times** for each transition (e.g., "Current wait for Nurse: 12 min").
   - Alert managers when **wait times exceed thresholds** (e.g., >20 min for Nurse  Doctor).

2. **Weekly/Monthly Reports:**
   - Track **KPI trends** (e.g., "Average wait time for Registration  Nurse decreased by 15% this month").
   - Compare **performance by department** (e.g., Cardiology vs. Orthopedics).

3. **Process Mining Tools:**
   - Use **Celonis, Disco, or PM4Py** to:
     - Continuously **discover process variants**.
     - Identify **new bottlenecks** as they emerge.
     - Simulate **impact of changes** before implementation.

4. **Patient Feedback Loop:**
   - **Post-visit surveys** with questions like:
     - "How long did you wait for [Activity]?" (to validate event log data).
     - "How satisfied were you with your wait times?" (1–5 scale).
   - **Complaint analysis:** Track complaints related to wait times.

5. **Staff Feedback:**
   - **Regular check-ins** with nurses, doctors, and clerks to identify **pain points**.
   - **Workload surveys** to ensure changes aren’t increasing stress.

### **5.3 Continuous Improvement Cycle**
1. **Measure:** Track KPIs using event logs and surveys.
2. **Analyze:** Use process mining to identify new bottlenecks.
3. **Improve:** Pilot small changes (e.g., adjust buffer times, reallocate staff).
4. **Evaluate:** Compare KPIs before/after changes.
5. **Scale:** Roll out successful changes clinic-wide.

---

## **Conclusion**
By applying **queue mining and process optimization**, the clinic can **systematically reduce wait times, improve patient satisfaction, and increase throughput** without sacrificing care quality. The key steps are:

1. **Identify critical queues** using waiting time metrics.
2. **Diagnose root causes** with process mining techniques.
3. **Implement data-driven strategies** (dynamic staffing, parallel processing, smart scheduling).
4. **Monitor KPIs** to ensure sustained improvement.
5. **Iterate** based on feedback and new data.

This approach ensures that **optimizations are evidence-based, measurable, and aligned with both patient and business goals**.