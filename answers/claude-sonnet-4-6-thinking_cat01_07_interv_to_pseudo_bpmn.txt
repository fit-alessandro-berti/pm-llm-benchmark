# BPMN-Like Textual Process Model: Invoice Approval Process

---

## 1. Overview

**Process Name:** Invoice Approval and Payment Scheduling Process
**Process Scope:** From invoice receipt to payment scheduling
**Trigger:** An invoice arrives (typically via email) in the Accounts Payable inbox
**End States:**
- **(Success)** Invoice scheduled for payment run
- **(Termination)** Invoice rejected (definitively unresolvable discrepancy or no valid PO found)

---

## 2. Participants (Pools / Lanes)

| Role | Name | Lane |
|---|---|---|
| Accounts Payable Clerk | Mary | Accounts Payable |
| Accounts Payable Supervisor | Rita | Accounts Payable |
| Purchasing Officer | Dan | Purchasing Department |
| Department Manager | Carlos | Department Management |
| Supplier Relationship Manager | Karen | Supplier Relations |
| Supplier | (External) | External Pool |
| Accounting System | (IT System) | Systems (implied) |

> **Note:** Mary and Rita share the Accounts Payable lane but are distinguished by their sub-roles. Karen operates in a supporting/advisory capacity and does not interact directly with the approval system.

---

## 3. Data Objects / Artifacts

| Artifact | Description | Origin |
|---|---|---|
| **Invoice** | Received document from supplier; contains line items, pricing, quantities | Supplier |
| **Purchase Order (PO)** | Internal reference document authorizing the purchase | Accounting System / Purchasing |
| **Confirmation Record** | Email/system record confirming goods or services were received | Purchasing (Dan) |
| **Discrepancy Note** | Record of identified mismatches between invoice and PO | AP Clerk / Purchasing |
| **Corrected Invoice** | Revised invoice submitted by supplier after identified errors | Supplier |
| **Retrospective PO** | PO created after-the-fact for informally contracted services | AP Supervisor / Department Head |
| **Supplier Contract** | Reference document used to verify agreed pricing and terms | Supplier Relations (Karen) |
| **Payment Schedule Entry** | System record confirming invoice is queued for payment | Accounting System |

---

## 4. Process Flow Description

---

###  START EVENT
**Trigger:** Invoice received in Accounts Payable inbox (typically via email).
**Actor:** Accounts Payable Clerk (Mary)
**Output Artifact:** Raw Invoice

---

### TASK 1 — Check Invoice for Valid PO Number
**Actor:** Accounts Payable Clerk (Mary)
**Description:** Mary reviews the incoming invoice to verify whether it references a valid Purchase Order (PO) number already recorded in the accounting system.
**Input:** Received Invoice
**Output:** Determination of PO validity

####  GATEWAY 1 — Exclusive Gateway: *"Does the invoice contain a valid PO number?"*

---

**[BRANCH A — NO: PO number missing or invalid]**

> #### TASK 1a — Request Additional Information from Supplier
> **Actor:** Accounts Payable Clerk (Mary) — *optionally supported by Supplier Relationship Manager (Karen)*
> **Description:** Mary sends a message (email) back to the supplier requesting the missing PO number or corrected invoice details. Karen may be engaged to expedite this via the supplier relationship channel.
> **Output:** Communication sent to supplier; Invoice placed on hold.
>
> #### INTERMEDIATE EVENT — Await Supplier Response
> **Description:** Process waits for the supplier to respond with a revised invoice or missing PO reference.
>
> ####  GATEWAY 1a — Exclusive Gateway: *"Has the supplier provided a valid PO reference or corrected invoice?"*
>
> - **YES ** Loop back to **TASK 1** (re-examine invoice with new information)
> - **NO / Unresolvable ** Escalate to **TASK 5b** (AP Supervisor Rita handles exception — see Exception Path below)

---

**[BRANCH B — YES: Valid PO number present]**

> Proceed to **TASK 2**

---

### TASK 2 — Log Invoice into Accounting System
**Actor:** Accounts Payable Clerk (Mary)
**Description:** Mary creates a formal record of the invoice in the accounting system, associating it with the identified PO number.
**Input:** Invoice with valid PO reference
**Output:** Logged Invoice record in system

---

### TASK 3 — Forward Invoice to Purchasing for Receipt Confirmation
**Actor:** Accounts Payable Clerk (Mary)
**Description:** Mary forwards the logged invoice to the Purchasing department, requesting confirmation that the referenced goods or services were actually received.
**Input:** Logged Invoice, associated PO
**Output:** Forwarded invoice / confirmation request to Purchasing Officer

---

### TASK 4 — Verify Goods/Services Receipt and Review Invoice Against PO
**Actor:** Purchasing Officer (Dan)
**Description:** Dan opens the PO in the system and cross-checks the invoice for accuracy across quantities, unit prices, delivery charges, and any other relevant terms. He also confirms that the goods or services were indeed received.
**Input:** Invoice, Purchase Order
**Output:** Confirmation or Discrepancy Report

####  GATEWAY 2 — Exclusive Gateway: *"Do invoice details match the PO, and is receipt confirmed?"*

---

**[BRANCH A — YES: Match confirmed, goods/services received]**

> #### TASK 4a — Send Confirmation to Accounts Payable
> **Actor:** Purchasing Officer (Dan)
> **Description:** Dan sends a confirmation email to Mary indicating that the invoice is accurate and receipt is verified.
> **Output:** Confirmation Record
>
> Proceed to **TASK 5**

---

**[BRANCH B — NO: Discrepancy identified (e.g., incorrect pricing, wrong quantities, extra charges)]**

> ####  GATEWAY 2a — Exclusive Gateway: *"Can the discrepancy be resolved by contacting the supplier?"*
>
> **[SUB-BRANCH B1 — YES: Supplier contact can resolve it]**
>
>> #### TASK 4b — Contact Supplier for Corrected Invoice / Place Invoice on Hold
>> **Actor:** Purchasing Officer (Dan) — *optionally with Supplier Relationship Manager (Karen)*
>> **Description:** Dan (and/or Karen, who verifies terms against the supplier contract) contacts the supplier to request a corrected invoice or clarification. The invoice is placed on hold in the system.
>> **Input:** Invoice, PO, Supplier Contract (Karen's reference)
>> **Output:** Corrected Invoice (from supplier) OR clarification note
>>
>> #### INTERMEDIATE EVENT — Await Corrected Invoice / Supplier Clarification
>>
>>  Loop back to **TASK 4** once corrected invoice or clarification is received
>
> **[SUB-BRANCH B2 — NO: Discrepancy cannot be resolved at this level]**
>
>>  Escalate to **TASK 5b** (AP Supervisor exception handling — see Exception Path below)

---

**[BRANCH C — MISSING PO INFORMATION (edge case noted by Dan)]**

> #### TASK 4c — Notify AP Clerk to Obtain PO Information
> **Actor:** Purchasing Officer (Dan)
> **Description:** Dan informs Mary that he cannot proceed without a valid PO reference and returns the item.
> **Output:** Notification to Mary
>
>  Loop back to **TASK 1a** (supplier is contacted to provide PO details)

---

### TASK 5 — Match Invoice Line Items Against PO in System
**Actor:** Accounts Payable Clerk (Mary)
**Description:** After receiving Purchasing's confirmation, Mary performs a formal three-way match in the accounting system: Invoice vs. PO vs. Receipt Confirmation. This validates quantities, unit prices, and totals.
**Input:** Invoice, Purchase Order, Confirmation Record from Purchasing
**Output:** Match Result (full match or discrepancy record)

####  GATEWAY 3 — Exclusive Gateway: *"Does the invoice fully match the PO (three-way match successful)?"*

---

**[BRANCH A — YES: Full match]**

>  Proceed to **TASK 6** (Manager Approval)

---

**[BRANCH B — NO: Discrepancy identified at matching stage]**

> #### TASK 5a — Email Purchasing Team for Clarification
> **Actor:** Accounts Payable Clerk (Mary)
> **Description:** Mary contacts Dan and/or the broader Purchasing team to investigate and clarify the mismatch.
> **Output:** Clarification request sent; Invoice on hold
>
> ####  GATEWAY 3a — Exclusive Gateway: *"Is the discrepancy resolvable by Purchasing / AP Clerk collaboration?"*
>
> - **YES ** Discrepancy is clarified  Loop back to **TASK 5** (re-match)
> - **NO ** Proceed to **TASK 5b** (escalation to Rita)

---

###  EXCEPTION PATH — TASK 5b: Escalate to AP Supervisor
**Actor:** Accounts Payable Supervisor (Rita) — *supported by Karen and/or Department Heads as needed*
**Description:** Rita takes ownership of complex exceptions that Mary or Purchasing cannot resolve independently. Rita coordinates between departments and/or directly contacts suppliers. If an invoice lacks any associated PO (e.g., services contracted informally), Rita engages the relevant Department Head.
**Input:** Problematic Invoice, Discrepancy Notes, PO (if any)

####  GATEWAY 3b — Exclusive Gateway: *"Does a valid PO exist for this invoice?"*

**[SUB-BRANCH 1 — YES, PO exists but has issues]**

> #### TASK 5c — Coordinate Resolution Between Departments and/or Supplier
> **Actor:** Rita — *with Karen (supplier/contract verification) as needed*
> **Description:** Rita contacts the relevant parties (supplier, AP, Purchasing, Karen for contract verification) to resolve the mismatch or obtain missing information.
> **Output:** Resolved discrepancy or corrected invoice
>
>  Return to normal flow: **TASK 5** (re-match)  **TASK 6** (Manager Approval)  **TASK 7** (Payment)

**[SUB-BRANCH 2 — NO, No PO exists (informally contracted service)]**

> ####  GATEWAY 3c — Exclusive Gateway: *"Is a retrospective PO justifiable?"*
>
> - **YES **
>
>> #### TASK 5d — Create Retrospective PO
>> **Actor:** Rita + Department Head
>> **Description:** Rita works with the relevant department head to create a retrospective PO to legitimize the invoice.
>> **Output:** Retrospective PO created in system
>>  Return to normal flow: **TASK 4** (Purchasing verifies against retrospective PO)
>
> - **NO **
>
>> #### TASK 5e — Reject Invoice
>> **Actor:** Rita
>> **Description:** Invoice is formally rejected; supplier is notified.
>> **Output:** Rejection notice to supplier
>>  **END EVENT (Invoice Rejected)**

---

### TASK 6 — Department Manager Reviews and Approves Invoice
**Actor:** Department Manager (Carlos)
**Description:** Carlos receives an automated system notification containing the invoice details, associated PO, and Purchasing's confirmation. He reviews all information — quantities, pricing, budget alignment, and any special notes — before making an approval decision.
**Input:** Invoice, PO, Confirmation Record (presented via system notification)
**Trigger:** Automatic email/system notification sent after successful three-way match (per Mary's account)
**Output:** Approval decision

####  GATEWAY 4 — Exclusive Gateway: *"Does the Department Manager approve the invoice?"*

---

**[BRANCH A — YES: Approved]**

> Carlos clicks "Approve" in the system.
>  Proceed to **TASK 7**

---

**[BRANCH B — NO: Manager rejects or flags for investigation]**

> #### TASK 6a — Manager Requests Hold / Investigation
> **Actor:** Department Manager (Carlos); notifies Accounts Payable Clerk (Mary)
> **Description:** Carlos flags the invoice as suspicious (e.g., total amount significantly exceeds budget, unexpected line items) and requests that Mary investigate. *Per Carlos, this occurs approximately once every couple of months.*
> **Output:** Hold notification; Investigation request sent to Mary
>
> ####  GATEWAY 4a — Exclusive Gateway: *"Can the issue be resolved through investigation?"*
>
> - **YES ** Escalate to **TASK 5b** (Rita leads exception resolution)  Return to **TASK 6** once resolved
> - **NO ** Proceed to **TASK 5e** (formal rejection)

---

### TASK 7 — Schedule Invoice for Payment Run
**Actor:** Accounts Payable Clerk (Mary)
**Description:** Mary adds the approved invoice to the next scheduled payment run in the accounting system.
**Input:** Approved Invoice
**Output:** Payment Schedule Entry (invoice queued in payment cycle)

---

###  END EVENT (Success)
**State:** Invoice is approved, logged, and scheduled for payment.

---

## 5. Visual Summary: Sequence Flow at a Glance

```
[START: Invoice Received]
        |
        
[T1: Check PO Number] (No PO) [T1a: Request Info from Supplier]
        |                                    |
      (PO OK)                   (Resolved)   (Unresolvable) [T5b: Escalate to Rita]
        |
        
[T2: Log Invoice in System]
        |
        
[T3: Forward to Purchasing]
        |
        
[T4: Purchasing Verifies Receipt & PO Match]
        |
   (Match OK)
        |                                                                           |
   (Discrepancy)                                                                    |
        |                                                                           |
[T4b: Contact Supplier / Hold] (Resolvable)                                     |
        |           (Unresolvable) [T5b: Escalate to Rita]                      |
   (Corrected)  loop back to T4                                                 |
                                                                                   
                                                                    [T5: Three-Way Match in System]
                                                                           |
                                                                      (Match OK)
                                                                           |
                                                                      (Discrepancy) [T5a: Clarify w/ Purchasing]
                                                                                              |
                                                                                    (Resolved) loop back to T5
                                                                                    (Unresolvable) [T5b: Rita Exception Handling]
                                                                                                              |
                                                                                                    (PO exists)  [T5c: Coordinate Resolution]  back to T5
                                                                                                    (No PO)  [T5d: Retrospective PO]  back to T4
                                                                                                              [T5e: Reject Invoice]  END (Rejected)
                                                                           |
                                                                           
                                                                [T6: Manager Reviews & Approves]
                                                                           |
                                                                     (Approved)
                                                                           |
                                                                     (Rejected/Hold) [T6a: Hold & Investigate]
                                                                                               |
                                                                                     (Resolved) back to T6
                                                                                     (Unresolved) T5e (Reject)
                                                                           |
                                                                           
                                                                [T7: Schedule for Payment]
                                                                           |
                                                                           
                                                                    [END: Payment Scheduled]
```

---

## 6. Exceptions, Variations, and Noted Ambiguities

| # | Description | Source | Modelling Decision |
|---|---|---|---|
| 1 | **Sequence of matching steps:** Mary describes checking the PO at intake AND performing a formal line-item match after Purchasing confirms. Dan describes a similar check from his side. It is possible this is a **two-stage match** (initial PO validation by Mary + formal three-way match after Purchasing confirmation), or that the descriptions partially overlap. | Mary (Int. 1), Dan (Int. 2) | Modelled as two distinct tasks: T1 (PO check at intake) and T5 (formal three-way match post-confirmation). |
| 2 | **Who contacts the supplier about discrepancies:** Both Dan (Purchasing) and Karen (Supplier Relations) describe reaching out to suppliers. Karen explicitly states she does not touch the approval system. | Dan (Int. 2), Karen (Int. 5) | Modelled as a joint/optional step: Dan leads contact; Karen supports when contract-level verification is needed. |
| 3 | **Manager rejection frequency:** Carlos estimates manager rejections occur "once every couple of months," suggesting this is rare but a formally recognized path. | Carlos (Int. 3) | Included as a valid gateway branch with low-frequency annotation. |
| 4 | **Rita's exact re-entry point after exception resolution:** Rita states resolved invoices return to "confirmation from Purchasing, approval by the Manager." It is unclear whether the invoice restarts fully from T4 or rejoins at T5. | Rita (Int. 4) | Modelled conservatively: if a retrospective PO is created, the invoice returns to T4 (Purchasing must re-confirm); if a discrepancy is resolved, it returns to T5 (re-match). |
| 5 | **System automation:** Mary and Carlos mention an automated system notification triggering manager approval. The system's role in other steps (logging, matching) is implied but not fully detailed. | Mary (Int. 1), Carlos (Int. 3) | Noted as system-assisted tasks; the accounting system is included as a supporting participant where relevant. |
| 6 | **Karen's formal process entry point:** Karen describes being "looped in" but does not describe a formal handoff mechanism. It is unclear whether AP or Purchasing initiates this. | Karen (Int. 5) | Modelled as an informal/optional support role invoked during T4b and T5b/T5c; not a mandatory sequential task. |

---

## 7. Key Design Notes for BPMN Conversion

- **Pools:** Two pools recommended — *Internal Organisation* (with lanes for AP, Purchasing, Management, Supplier Relations) and *External Supplier*.
- **Gateways:** All decision points above are **Exclusive (XOR) Gateways** unless noted otherwise. No parallel paths were explicitly described.
- **Loops:** Three rework loops are present: (1) supplier information request  invoice re-check; (2) discrepancy resolution  re-match; (3) retrospective PO creation  Purchasing re-verification.
- **Message Flows:** Supplier communications (invoice submission, correction requests) should be represented as **Message Flows** across pool boundaries.
- **Intermediate Events:** Waiting periods (awaiting supplier response, awaiting corrected invoice) should be modelled as **Intermediate Message Catch Events**.
- **Collapsed Sub-Process:** The Rita-led exception handling block (T5b  T5c/T5d/T5e) could be collapsed into a **Sub-Process** for diagram clarity.