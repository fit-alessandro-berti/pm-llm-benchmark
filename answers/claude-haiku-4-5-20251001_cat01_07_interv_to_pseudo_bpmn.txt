# BPMN-Like Textual Process Model: Invoice Approval Process

## **Process Overview**
This process manages the receipt, validation, matching, and approval of supplier invoices before payment scheduling. It involves multiple roles (Accounts Payable Clerk, Purchasing Officer, Department Manager, AP Supervisor, and Supplier Relationship Manager) and includes exception handling loops for discrepancies and missing information.

---

## **Process Flow Description**

### **START EVENT**
- **Trigger:** Invoice received (typically via email)
- **Artifact:** Invoice document

---

### **PHASE 1: Initial Intake & PO Validation**

**Task 1.1: Check PO Association**
- **Actor:** Accounts Payable Clerk (Mary)
- **Description:** Verify that the incoming invoice contains a valid purchase order number.
- **Inputs:** Invoice document
- **Decision Point (Gateway 1.1):** PO number present?
  
  - **IF NO (PO Missing):**
    - **Task 1.2a: Request PO Details**
      - Actor: Accounts Payable Clerk (Mary) OR Supplier Relationship Manager (Karen)
      - Action: Send email to supplier requesting PO number or corrected invoice
      - Loop back to Task 1.1 (await corrected invoice)
      - *Note:* Some invoices may be rejected at this stage if supplier does not respond or provides invalid PO.

  - **IF YES (PO Present):**
    - **Task 1.2b: Log Invoice into System**
      - Actor: Accounts Payable Clerk (Mary)
      - Description: Enter invoice into accounting system with PO reference
      - Outputs: System record created; Invoice logged

---

### **PHASE 2: Receipt Confirmation**

**Task 2.1: Forward to Purchasing for Goods/Services Verification**
- **Actor:** Accounts Payable Clerk (Mary)
- **Description:** Send invoice to Purchasing Officer to confirm that goods/services were actually received as ordered.
- **Recipient:** Purchasing Officer (Dan)
- **Outputs:** Confirmation request artifact

**Task 2.2: Verify Receipt Against PO**
- **Actor:** Purchasing Officer (Dan)
- **Description:** Cross-check invoice details (quantities, prices, delivery charges) against the Purchase Order in the system.
- **Inputs:** Invoice, PO record
- **Decision Point (Gateway 2.1):** Do invoice details match the PO?

  - **IF NO (Discrepancy Detected):**
    - **Task 2.2a: Document Discrepancy**
      - Actor: Purchasing Officer (Dan)
      - Description: Identify specific mismatches (e.g., extra units billed, incorrect pricing).
      - Outputs: Discrepancy note

    - **Task 2.2b: Attempt Resolution (First Level)**
      - Actor: Purchasing Officer (Dan) OR Supplier Relationship Manager (Karen)
      - Actions: 
        - Contact supplier directly to request corrected invoice, OR
        - Request Accounts Payable to hold invoice pending supplier correction
      - Outputs: Supplier response / corrected invoice OR hold status
    
    - **Task 2.2c: Re-evaluate After Correction**
      - Actor: Purchasing Officer (Dan)
      - Decision Point (Gateway 2.2): Can discrepancy be resolved?
        - **IF YES:** Return to Gateway 2.1 (re-check corrected invoice)
        - **IF NO (Unresolvable):** Proceed to Task 2.3

    - **Task 2.3: Escalate to AP Supervisor**
      - Actor: Purchasing Officer (Dan)  Accounts Payable Clerk (Mary)  AP Supervisor (Rita)
      - Description: Escalate unresolved discrepancies to Rita for higher-level intervention.
      - Outputs: Escalation record

  - **IF YES (All Details Match):**
    - **Task 2.4: Send Confirmation to AP**
      - Actor: Purchasing Officer (Dan)
      - Description: Send confirmation email to Accounts Payable confirming goods/services receipt and PO match.
      - Outputs: Confirmation artifact; Receipt verified status

---

### **PHASE 3: Exception Handling (Escalation Path)**

*Note: This path is triggered when discrepancies cannot be resolved at the Purchasing level or when invoices lack standard PO references.*

**Task 3.1: Receive Escalation**
- **Actor:** Accounts Payable Supervisor (Rita)
- **Description:** Receive escalated invoice from Mary or Dan.
- **Inputs:** Escalation notification; Problem invoice

**Task 3.2: Investigate Exception**
- **Actor:** AP Supervisor (Rita) OR Supplier Relationship Manager (Karen)
- **Actions:**
  - Contact supplier to clarify discrepancy or obtain missing information
  - Verify contract terms or pricing agreements
  - Coordinate with department heads if PO is missing (e.g., for informal service contracts)
- **Decision Point (Gateway 3.1):** Can exception be resolved?

  - **IF NO (Invoice Rejected):**
    - **Task 3.3a: Reject Invoice**
      - Actor: AP Supervisor (Rita)
      - Description: Determine that invoice cannot be matched or approved; communicate rejection to supplier and department.
      - Outputs: Rejection notification; Process ends for this invoice (or stored as dispute record)

  - **IF YES (Exception Resolved):**
    - **Task 3.3b: Create Retrospective PO (if applicable)**
      - Actor: AP Supervisor (Rita) in coordination with Department Manager
      - Description: If invoice lacks PO due to informal contracting, create a PO retroactively to document the transaction.
      - Outputs: New PO record; Invoice now associated with valid PO

    - **Task 3.3c: Return to Normal Flow**
      - Actor: AP Supervisor (Rita)
      - Description: Re-insert invoice into standard approval flow.
      - Outputs: Invoice resubmitted for confirmation and matching

---

### **PHASE 4: Invoice Matching & Line Item Reconciliation**

*Note: This phase occurs after Purchasing confirmation is received (Task 2.4) or exception is resolved (Task 3.3c).*

**Task 4.1: Match Invoice Against PO**
- **Actor:** Accounts Payable Clerk (Mary)
- **Description:** Perform detailed line-item matching of invoice against PO and Purchasing confirmation in the system.
- **Inputs:** Invoice, PO record, Purchasing confirmation
- **Decision Point (Gateway 4.1):** Do all line items match (quantities, prices, terms)?

  - **IF NO (Mismatch Found):**
    - **Task 4.2a: Document Discrepancy Details**
      - Actor: Accounts Payable Clerk (Mary)
      - Description: Note specific mismatches (e.g., incorrect pricing, missing items, extra charges).
      - Outputs: Discrepancy report

    - **Task 4.2b: Contact Purchasing for Clarification**
      - Actor: Accounts Payable Clerk (Mary)
      - Description: Email Purchasing Officer with specific discrepancy details requesting investigation.
      - Outputs: Clarification request artifact

    - **Task 4.2c: Receive Purchasing Response**
      - Actor: Purchasing Officer (Dan)
      - Description: Respond to clarification request with resolution (e.g., confirmation of correct terms, request for supplier correction).
      - Outputs: Resolution response

    - **Task 4.2d: Evaluate Resolution**
      - Actor: Accounts Payable Clerk (Mary)
      - Decision Point (Gateway 4.2): Is discrepancy resolved satisfactorily?
        - **IF YES:** Return to Gateway 4.1 (re-check invoice match)
        - **IF NO (Unresolvable):** Proceed to Task 4.3

    - **Task 4.3: Escalate to AP Supervisor**
      - Actor: Accounts Payable Clerk (Mary)  AP Supervisor (Rita)
      - Description: Escalate persistent matching issues to Rita.
      - Outputs: Escalation record (re-enter exception handling at Task 3.1)

  - **IF YES (All Line Items Match):**
    - **Task 4.4: Update Matching Status in System**
      - Actor: Accounts Payable Clerk (Mary)
      - Description: Mark invoice as "matched" in accounting system.
      - Outputs: System status update; Invoice marked as ready for approval

---

### **PHASE 5: Manager Approval**

**Task 5.1: Trigger Manager Approval Notification**
- **Actor:** System (automated)
- **Description:** System sends automatic email notification to Department Manager with invoice details, PO, and Purchasing confirmation attached.
- **Trigger:** Invoice successfully matched (Task 4.4 completion)
- **Recipient:** Department Manager (Carlos)
- **Outputs:** Approval request notification; Manager-visible invoice record in system

**Task 5.2: Manager Reviews & Approves**
- **Actor:** Department Manager (Carlos)
- **Description:** Manager reviews invoice, PO, quantities, pricing, and any special notes against budget and departmental expectations.
- **Inputs:** Invoice, PO, Purchasing confirmation, budgetary data
- **Decision Point (Gateway 5.1):** Does manager approve?

  - **IF REJECT (Manager Rejects or Requests Hold):**
    - **Task 5.2a: Request Investigation/Hold**
      - Actor: Department Manager (Carlos)
      - Description: Manager rejects invoice or requests hold (e.g., due to budgetary concern, unexpected items, pricing discrepancy).
      - Actions: Send rejection/hold note to Accounts Payable Clerk
      - Outputs: Rejection/hold artifact

    - **Task 5.2b: Return to Investigation**
      - Actor: Accounts Payable Clerk (Mary)
      - Description: Re-investigate invoice based on manager feedback; contact Purchasing or escalate as needed.
      - Logic: Return to Task 4.2 (re-clarification) or Task 3.1 (escalation), depending on nature of concern.

  - **IF APPROVE (Manager Approves):**
    - **Task 5.3: Record Manager Approval**
      - Actor: System (automated)
      - Description: System records approval timestamp and manager identity in invoice record.
      - Outputs: System status update; Invoice marked as "approved"

---

### **PHASE 6: Payment Scheduling**

**Task 6.1: Schedule for Payment Run**
- **Actor:** Accounts Payable Clerk (Mary)
- **Description:** After manager approval, schedule invoice for inclusion in the next payment cycle/run.
- **Inputs:** Approved invoice record
- **Outputs:** Payment schedule update; Invoice ready for processing

**Task 6.2: Process Payment (out of scope for this model, but final destination)**
- **Actor:** Accounts Payable / Treasury
- **Description:** Payment is processed according to payment schedule.

---

## **END EVENT**
- **Status:** Invoice fully approved, scheduled, and ready for payment.
- **Artifact:** Approved, matched invoice record with payment schedule.

---

## **Summary of Key Roles**

| Role | Primary Responsibilities |
|------|--------------------------|
| **Accounts Payable Clerk (Mary)** | Initial intake, PO verification, system logging, invoice matching, escalation management, payment scheduling |
| **Purchasing Officer (Dan)** | Verify receipt of goods/services, match invoice to PO, identify and attempt to resolve discrepancies, provide confirmation |
| **Department Manager (Carlos)** | Final approval based on invoice details, PO confirmation, and budgetary alignment; authority to reject or request investigation |
| **AP Supervisor (Rita)** | Handle exceptions, escalations, supplier coordination, retrospective PO creation, complex discrepancy resolution |
| **Supplier Relationship Manager (Karen)** | Indirect support—supplier contact for missing information, pricing clarification, contract verification (not system-level approver) |

---

## **Key Decision Points (Gateways)**

| Gateway | Decision Condition | Outcomes |
|---------|-------------------|----------|
| **Gateway 1.1** | PO number present? | YES  Log in system; NO  Request PO / Hold |
| **Gateway 2.1** | Invoice details match PO? | YES  Confirm; NO  Attempt resolution |
| **Gateway 2.2** | Can discrepancy be resolved? | YES  Re-check; NO  Escalate |
| **Gateway 3.1** | Can exception be resolved? | YES  Create retrospective PO / Return to flow; NO  Reject invoice |
| **Gateway 4.1** | Line items match? | YES  Update status; NO  Clarify |
| **Gateway 4.2** | Is clarification resolved? | YES  Re-check; NO  Escalate |
| **Gateway 5.1** | Manager approves? | YES  Record approval / Schedule payment; NO  Request investigation / Hold |

---

## **Notable Exceptions & Variations**

1. **Missing PO Number:**
   - Invoices without PO are held until supplier provides PO reference or AP Supervisor creates a retrospective PO in coordination with department heads.
   - Rare case: Invoices for informal service contracts may be approved via supervisor review and retrospective PO creation.

2. **Unresolvable Discrepancies:**
   - If Purchasing and supplier coordination cannot resolve a mismatch, the invoice may be rejected or held indefinitely.
   - AP Supervisor has authority to escalate to senior management if the discrepancy involves significant amounts or key suppliers.

3. **Manager Rejection/Hold:**
   - Manager may reject or place invoice on hold if they identify budgetary concerns or unexpected items (estimated frequency: ~once every two months per Carlos).
   - This triggers re-investigation and potential rework through earlier phases.

4. **Supplier Involvement:**
   - Supplier Relationship Manager may be looped in proactively for recurring discrepancies or key supplier issues.
   - Direct supplier contact may occur at Purchasing or AP Supervisor level for correction/clarification.

---

## **Artifacts/Data Objects**

- **Invoice document** (input)
- **Purchase Order (PO) record** (reference)
- **Discrepancy report** (internal)
- **Purchasing confirmation** (artifact)
- **System invoice record** (electronic)
- **Manager approval notification** (automated message)
- **Payment schedule** (output)

---

## **Ambiguities & Clarifications**

1. **Manager Approval Timing:** Interviewees indicate that manager approval is triggered automatically after receipt confirmation and matching are complete, but the exact timing within the system workflow is not explicitly detailed.

2. **Supervisor Authority:** Rita (AP Supervisor) has broad exception-handling authority but does not perform final approval; her role is problem-solving and escalation rather than gate-keeping.

3. **Supplier Relationship Manager Scope:** Karen's involvement is ad-hoc and reactive (supplier contact) rather than part of the standard sequential flow. She is looped in when needed for discrepancy resolution.

4. **Payment Run Frequency:** The timing and frequency of payment runs is not specified; scheduling at Task 6.1 assumes invoices are batched into regular cycles.

5. **Rejection Protocol:** The process does not explicitly detail what happens to rejected invoices (stored as dispute records, communicated to supplier, etc.).

---

This textual model provides sufficient detail to be translated into a formal BPMN diagram, accommodating the multi-role, iterative nature of the invoice approval workflow with its multiple exception-handling paths.