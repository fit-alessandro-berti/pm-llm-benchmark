## 1. Queue Identification and Characterization

### 1.1. Using the event log to derive waiting times

From the log you have:

- Case ID = visit
- Activity
- Timestamp
- Timestamp type = START / COMPLETE
- Resource (staff/room)
- Patient attributes (type, urgency, etc.)

**Definition of waiting time (queue time)**  
For a given visit and sequence of activities:

- Let activity A complete at time `t_complete(A)`
- Let the next activity B for that visit start at time `t_start(B)`

Then, for that visit:

> **Waiting time between A and B** = `t_start(B) – t_complete(A)`

This waiting time is **pure non-service time** from the patient’s perspective. This is what patients experience as “waiting” between stages.

We compute this for each consecutive pair of activities in a case (based on timestamp order). Examples:

- `Registration  Nurse Assessment`
- `Nurse Assessment  Doctor Consultation (Cardio)`
- `Doctor Consultation (Cardio)  ECG`
- `ECG  Check-out`

If you have appointment time or arrival time (often not in the process log itself), you can also define:

- **Pre-visit waiting**: `Registration START – scheduled appointment time`
- **Door-to-first-service waiting**: `Registration START – physical arrival time`

If those timestamps are not in the log, focus on **inter-activity waiting times**.

Additionally, for **queue mining per resource group** (e.g., “Nurse team”, “Cardio doctors”, “ECG rooms”), approximate:

- **Arrival to the queue** at a resource group = completion time of the previous activity that routes to this resource group.
- **Service start** = START timestamp of the activity at that resource.

The difference is the **queue waiting time for that resource**.

### 1.2. Key metrics per queue

For each transition (A  B) or resource queue (e.g., “queue for nurses”), compute:

1. **Volume / frequency**
   - `N_cases` : number of visits that pass through this transition.
   - `% of all visits` using this transition.

2. **Descriptive waiting-time statistics**
   - Mean waiting time.
   - Median waiting time.
   - 90th percentile waiting time (P90) – robust to outliers, patient-relevant.
   - 95th or 99th percentile for extreme delays.
   - Maximum waiting time.

3. **Excessive-wait indicators**
   - Define clinical/experience thresholds per stage (e.g., >15 min for registration, >30 min for doctor).
   - `% of visits with waiting time > threshold`.
   - `N_cases_excessive` : absolute count exceeding threshold.

4. **Contribution to total visit time**
   - For each visit: total visit duration = `last COMPLETE – first START`.
   - Fraction of visit time spent waiting in queue X:
     - For each case and transition X: `wait_X / total_visit_time`.
   - Aggregate: average proportion of total visit time attributable to each queue.

5. **Temporal patterns**
   - Compute the above per:
     - Hour-of-day.
     - Day-of-week.
     - Physician or specialty.
   - Helps detect peaks and misaligned capacity.

6. **Segmentation by patient attributes**
   - Same metrics split by:
     - Patient type: New vs Follow-up.
     - Urgency: Urgent vs Normal.
     - Specialty: Cardio vs Ortho vs General.
   - This reveals inequities or unexpected delays for certain groups.

### 1.3. Identifying the most critical queues

Use a multi-criteria approach rather than just “longest average wait.” For each queue (A  B), score based on:

1. **Impact on many patients**
   - High `N_cases` and high `% of visits` using this queue.

2. **Severity of delay**
   - High **median** and **P90** waiting times.
   - High `% of visits above threshold`.

3. **Contribution to total visit duration**
   - High share of total visit time attributable to this queue.

4. **Clinical / satisfaction impact**
   - Long waits before critical steps (e.g., doctor, urgent imaging) are more harmful than before check-out.
   - Long waits for “Urgent” or high-risk patients.

5. **Variability**
   - High variance suggests unstable process; may cause unpredictable patient experience.

Combine these into a **priority ranking**, e.g.:

- Score = (normalized P90) × (volume %) × (excessive-wait %) × (clinical weight).

Top 3–5 queues by this composite score become your **critical queues** for deep analysis and intervention.

---

## 2. Root Cause Analysis Using Process and Queue Mining

Once critical queues are identified (e.g.: Registration  Nurse, Nurse  Doctor, Doctor  Diagnostics), the next step is to understand **why** they occur.

### 2.1. Resource bottlenecks and utilization

Use resource-oriented process mining:

1. **Service times per resource**
   - For each activity and resource (e.g., “Dr. Smith – Cardio consult”):
     - Mean, median, distribution of **service duration** = `COMPLETE – START`.
   - Compare across doctors/nurses/clerks for the same activity.
     - E.g., some doctors systematically longer consultations.

2. **Utilization per resource / resource group**
   - For each resource:
     - “Busy time” = sum of all service durations during their scheduled working hours.
     - Utilization = Busy time / Available time.
   - For resource groups (e.g., all registration clerks):
     - Use pooled capacity and aggregate service demand.
   - High utilization (e.g., consistently >85–90%) is usually associated with long queues in queueing theory.

3. **Queue mining per station**
   - From event logs, reconstruct **virtual queues**:
     - Patients “arrive” at a station when their previous activity completes.
     - Patients “start service” when the activity at that station starts.
     - Plot queue length over time and by time-of-day.
   - Observe:
     - Morning peaks?
     - Persistent queues for specific doctors or imaging rooms?

This helps confirm whether long waits are due to **insufficient capacity**, poor **distribution of work** across resources, or **temporal mismatch** (capacity at wrong times).

### 2.2. Activity dependencies and handovers

Use standard process-mining visualizations (e.g., dotted charts, directly-follows graph with performance annotations):

1. **Process map with performance**
   - Graph nodes = activities.
   - Edges = observed transitions (A  B).
   - Annotate edges with mean / P90 waiting times.
   - Thick / red edges identify problematic handovers.

2. **Handover-of-work networks**
   - Build a social network of resource handovers:
     - Edge from Resource X to Resource Y if activities by X are followed by activities by Y in the same case.
   - Identify:
     - Many handovers for a single visit (fragmentation).
     - Handover to specific roles/people associated with longer waits.
   - E.g., certain lab technicians or imaging rooms show systematic delays after specific doctors.

3. **Synchronisation and dependencies**
   - Identify activities that must complete before another can start (e.g., labs  doctor review).
   - If one of the prerequisite activities has high variability or long service time, it propagates wait to downstream steps.

### 2.3. Variability in service times

From the log:

- Compute the distribution of service times (per activity, per resource, per patient type).

Look for:

- High variance and occasional extremely long consultations or assessments.
- Systematic longer service times for:
  - New patients vs follow-up.
  - Certain specialties (e.g., Cardio vs Dermatology).

High variability makes waiting times particularly sensitive to utilization; even with adequate average capacity, peaks cause long queues.

### 2.4. Appointment scheduling and arrival patterns

Use start times to infer **arrival rate** to each stage:

1. **Inter-arrival times for first activity (e.g., Registration START)**
   - Compute per day/hour to see arrival patterns.
   - Check if appointment slots create “batch arrivals” (e.g., multiple patients all booked at 09:00 for the same doctor).

2. **Mismatch between arrivals and capacity**
   - Compare per hour:
     - Number of arriving patients needing nurses, doctors, tests.
     - Available capacity (number of staff scheduled and their throughput).
   - If many doctor visits are booked on the half-hour but nurse capacity is flat, nurse queues spike just before those times.

3. **Walk-ins vs appointments**
   - If type is logged, compare waiting times and arrival patterns between walk-ins and scheduled patients.
   - Walk-ins can overload specific times if not managed.

### 2.5. Differences by patient type / urgency / specialty (variant analysis)

Use **variant analysis**:

- Each “variant” is a distinct path patients follow (sequence of activities).
- Compare variants for:
  - New vs Follow-up.
  - Urgent vs Normal.
  - Specific specialties.

Look for:

- Do urgent patients actually get faster pathways, or are they stuck in the same queues?
- Are new patients systematically routed through more steps (e.g., extra tests), causing lengthier visits and queues at specific stations?
- Are some specialties overloading diagnostic resources more than others?

Variant analysis clarifies **which flows are driving the critical queues**.

### 2.6. Conformance and rework

Use conformance checking against a reference model (clinical guidelines / intended flow):

- Identify deviations:
  - Repeated Registration.
  - Nurse Assessment repeated if documentation incomplete.
  - Patients sent back and forth between doctor and tests.
- Rework extends visit length and increases load on certain resources, inflating queues.

---

## 3. Data-Driven Optimization Strategies

Below are **four concrete strategies**, each tied to a specific type of queue and root cause, supported by analyses described above.

### Strategy 1 – Align staffing and resource allocation with demand patterns

**Target queues:**
- Registration  Nurse.
- Nurse  Doctor.
- Doctor  Diagnostics (especially peak hours).

**Root causes addressed:**
- Resource bottlenecks (high utilization and persistent queues) during specific hours.
- Temporal mismatch between demand (arrival patterns) and capacity (staff schedules).

**Data/analysis support:**

From queue mining and resource analysis, you can:

- Show that, e.g., between 08:30–10:30:
  - Registration queue P90 waiting = 25 minutes, utilization of clerks = 95%.
  - Doctor consultations begin later, causing a build-up in nurse and doctor queues mid-morning.
- Show that after 14:00, utilization drops to 60–70%, with short queues.

**Actions:**

1. **Dynamic staffing for peak periods**
   - Add one extra registration clerk between 08:00–10:00.
   - Reassign cross-trained staff (e.g., a float nurse) to help with nurse assessments during 09:00–11:00.
   - Use part-time or staggered shifts so that staff coverage matches demand curve.

2. **Resource pooling**
   - Where possible, pool resources (e.g., multiple ECG rooms or technicians) instead of siloed ownership to reduce variability and shorten queues.

3. **Room/equipment allocation**
   - Identify underused rooms/equipment (from log resource utilization) and reallocate or share them during busy periods (e.g., opening an additional ECG room during morning rush).

**Expected impact:**

- Queueing theory: moving utilization from ~95% to ~80–85% at critical stations can easily reduce waiting times by **30–50%** in high-traffic intervals.
- Pilot analysis via discrete-event simulation on log-derived parameters can estimate specific reductions.

---

### Strategy 2 – Redesign appointment scheduling to smooth arrivals

**Target queues:**
- Registration  Nurse.
- Nurse  Doctor (especially at start of morning and afternoon sessions).
- Potentially Diagnostics  Specialist Review if diagnostic slots are batched.

**Root causes addressed:**
- Appointment policies causing “batch arrivals” (e.g., multiple patients booked at same time).
- Overbooking certain doctors/time slots without corresponding capacity.

**Data/analysis support:**

- Arrival-rate analysis shows spikes at 09:00, 10:00, etc., with corresponding queue spikes at registration and nursing.
- Inter-arrival times are very short around slot boundaries and longer in between; capacity is constant.

**Actions:**

1. **Staggered appointment times**
   - For each doctor, instead of booking all patients on the hour, distribute over the hour in **staggered intervals** (e.g., 5–10 minute offsets).
   - Align appointment slots with actual **average plus variability-adjusted** consultation times per doctor, as measured from logs.

2. **Load-based scheduling limits**
   - Cap the number of simultaneous starts per 15-minute interval across the clinic, based on historical throughput of registration and nursing.
   - Use log-derived data to set maximum safe bookings per interval.

3. **Different templates for New vs Follow-up**
   - Use event-log-derived service times:
     - E.g., new Cardio consults average 25 min, follow-ups 12 min.
   - Create distinct slot lengths and scheduling rules by patient type so new patients do not systematically delay follow-ups.

**Expected impact:**

- Smoothing arrivals can substantially reduce registration and nursing queue peaks, leading to **10–30% reduction** in average waits and larger reductions in P90.
- More predictable flows also reduce staff stress and overtime.

---

### Strategy 3 – Parallelization and pre-visit activities (where clinically safe)

**Target queues:**
- Doctor  Diagnostics (blood test, ECG, X-ray).
- Diagnostics  Specialist Review.
- Pre-registration / Registration  Nurse (where forms and data collection cause delays).

**Root causes addressed:**
- Sequential dependencies that could be parallel or shifted earlier.
- Bottlenecks created by “everything after the doctor visit” pattern.
- Non-clinical administrative tasks consuming face-to-face time.

**Data/analysis support:**

- Process maps show frequent path: Registration  Nurse  Doctor  Lab/ECG  Doctor Review  Check-out.
- Variant analysis reveals:
  - For many predictable conditions, tests ordered by doctors are highly standardized.
- Waiting times:
  - Long waits after doctor for tests (doctor  diagnostics).
  - Rework where patients must return to doctor after tests done late.

**Actions:**

1. **Pre-visit online/phone registration**
   - Move demographic, insurance, and symptom questionnaires online or via phone prior to visit.
   - Event logs after implementation would show shorter Registration service times and shorter Registration  Nurse waits.

2. **Standing pre-test protocols**
   - For certain specialties and types (e.g., routine Cardio follow-up), define standardized pre-visit tests (e.g., ECG before doctor).
   - Nurse or scheduling staff order tests in advance, based on protocols and previous visit notes.
   - Flow becomes: Registration  Nurse & Pre-tests (in parallel where possible)  Doctor  Check-out.

3. **Parallel use of diagnostics**
   - Allow some diagnostics to be performed in parallel with waiting time for doctor if clinically appropriate and if results turnaround is quick.
   - Example: while patient is waiting for doctor, simple point-of-care tests are done.

**Expected impact:**

- Reduce the **doctor  diagnostics  doctor review** loop time.
- For selected pathways, total visit duration could decrease by **20–40 minutes** for those cases.
- Also spreads demand on diagnostic resources more evenly across the day, reducing queue peaks.

---

### Strategy 4 – Fast-track pathways for simple follow-ups and low-acuity visits

**Target queues:**
- Registration  Nurse  Doctor, particularly for follow-up, low-complexity cases.
- General congestion in high-volume general specialties.

**Root causes addressed:**
- Heterogeneous case mix: simple follow-ups waiting behind complex new or urgent patients.
- Overloading general pathway with all patient types.

**Data/analysis support:**

- Variant analysis shows:
  - Follow-up visits often have fewer activities and shorter service times.
- Yet waiting times between stages for simple follow-ups are similar to more complex visits, suggesting they are not prioritized.
- Queue mining indicates simple follow-ups account for large volume at key bottlenecks.

**Actions:**

1. **Define fast-track criteria**
   - Based on data and clinical input: e.g., stable chronic disease follow-up with no new complaints, standard lab trends.
   - These patients route through:
     - Express check-in (simplified registration, possibly kiosk-based).
     - Nurse “lite” assessment (only vitals, quick check).
     - Short, focused doctor visit or advanced practice provider.

2. **Dedicated fast-track capacity**
   - Reserve a percentage of daily slots and some nurse/doctor time for fast-track.
   - Use separate waiting area or virtual queue to avoid mixing with more complex cases.

3. **Process adjustments**
   - Allow fast-track patients to skip certain steps (e.g., full nurse assessment or lengthy questionnaires) when clinically safe.

**Expected impact:**

- For fast-track-eligible patients (often 30–50% of visits), expected reduction in:
  - Total visit time by **30–50%**.
  - And reduction in their contribution to congestion in the main queues, indirectly benefiting others.

---

## 4. Trade-offs and Constraints

Each strategy has potential side effects.

### Strategy 1 – Align staffing with demand

- **Trade-offs:**
  - More staff or shifted hours may increase labor costs or reduce flexibility.
  - High staffing at peaks may cause underutilization during off-peak if not carefully planned.
- **Balance:**
  - Use cost-per-minute of patient waiting vs cost-per-hour of staff to justify changes.
  - Start with small, targeted changes (e.g., two hours of extra coverage) and evaluate impact before scaling.

### Strategy 2 – Appointment scheduling redesign

- **Trade-offs:**
  - Doctors may resist longer or variable appointment slot lengths.
  - Staggered scheduling may create perception of more idle time if utilization metrics not well understood.
  - More complex scheduling rules can be harder for call-center staff.
- **Balance:**
  - Use event log data to demonstrate that per-visit time is more predictable and overtime decreases.
  - Implement changes gradually and monitor no-show patterns and patient satisfaction.

### Strategy 3 – Parallelization and pre-visit activities

- **Trade-offs:**
  - Pre-tests might lead to occasional unnecessary tests if the doctor would not have ordered them after seeing the patient.
  - Online pre-registration may disadvantage patients with low digital literacy.
  - Increased coordination complexity (ensuring results are ready and available in EMR at visit time).
- **Balance:**
  - Limit pre-tests to well-defined protocols with very high likelihood of being needed.
  - Provide alternative support (telephone or kiosk assistance) for non-digital patients.
  - Monitor test utilization rates and the proportion of tests not referenced in consultations.

### Strategy 4 – Fast-track pathways

- **Trade-offs:**
  - Perceived inequity if some patients are seen much faster.
  - Risk of mis-triage: patients sent to fast-track who actually need more complex assessment.
  - Need for clear criteria and training.
- **Balance:**
  - Clinically define and validate inclusion/exclusion criteria.
  - Regularly review fast-track cases with unexpected outcomes or re-visits.
  - Communicate clearly to patients why some visits are shorter (complexity, safety).

### Overall balancing of objectives

- Use a **multi-objective framework**:
  - Minimize average and P90 waiting times.
  - Keep staff utilization within a healthy band (70–85%).
  - Maintain or improve quality/safety metrics.
  - Control incremental costs.

- Use **simulation based on event logs** to test combinations of changes before real-world deployment, quantifying trade-offs.

---

## 5. Measuring Success and Ongoing Monitoring

### 5.1. Key Performance Indicators (KPIs)

#### Patient experience and flow

1. **Waiting time per stage**
   - Mean, median, P90, P95 for:
     - Registration  Nurse.
     - Nurse  Doctor.
     - Doctor  Diagnostics.
     - Diagnostics  Review.
     - Final  Check-out.

2. **Total visit duration**
   - Mean, median, P90 from first START to last COMPLETE.
   - Segmented by:
     - Patient type (New vs Follow-up).
     - Urgency.
     - Specialty.

3. **Proportion of visits exceeding thresholds**
   - % of visits with total duration > X minutes (e.g., >120 minutes).
   - % of visits with any single queue > stage-specific threshold.

4. **Patient satisfaction metrics**
   - Overall satisfaction.
   - Specific questions on waiting times and flow.
   - Net promoter score (NPS), if used.

#### Operational and resource KPIs

5. **Resource utilization**
   - For each key resource group:
     - Utilization rate.
     - Overtime hours.
     - Number of visits handled per day.

6. **Throughput**
   - Number of completed visits per clinic day/session.
   - Stability (variance) across days.

7. **Rework / deviation rates**
   - % of visits with repeated activities (re-registration, repeated imaging, extra nurse assessments beyond protocol).
   - Deviations from target pathway for fast-track or urgent patients.

#### Quality and safety KPIs

8. **Return visit / complication rates**
   - 7-day or 30-day unplanned re-visits.
   - Adverse events potentially linked to rushed assessments.

### 5.2. Ongoing process monitoring with event logs

1. **Continuous process mining dashboards**
   - Re-mine the process monthly or weekly:
     - Update performance-annotated process maps.
     - Trend waiting time statistics per stage and patient segment.
   - Detect shifts (concept drift) in process behavior.

2. **Control charts / alerts for queues**
   - For key queues (e.g., Nurse  Doctor):
     - Track daily/weekly P90 waiting times.
     - Use control charts to identify statistically significant deviations.
   - Real-time or near-real-time monitoring (if system allows):
     - Alert charge nurse / operations when queue lengths exceed thresholds so they can intervene (reassign staff, open extra rooms).

3. **Before–after comparison**
   - For each implemented strategy:
     - Define baseline period (e.g., 3 months pre-change).
     - Compare to post-change period using statistical tests (e.g., changes in medians, P90, and distributions of waiting times and visit durations).
     - Control for seasonality (day-of-week, month).

4. **Segmented evaluation**
   - Evaluate impact per:
     - Specialty.
     - Patient type.
     - Urgency.
   - Ensure no patient group experiences deterioration while overall averages improve.

5. **Feedback loop with clinicians and managers**
   - Regularly review dashboards with clinicians and front-line staff.
   - Use their qualitative insights with the quantitative findings to refine process changes.

---

By systematically mining the event log to quantify where patients are waiting, why those queues exist, and how they differ by time, resource, and patient type, the clinic can implement targeted interventions—staffing realignment, smarter scheduling, parallelization, and fast-track pathways—and then use the same data infrastructure for continuous monitoring and refinement.