Process name: Invoice Approval and Payment Scheduling

Participants (Lanes):
- Supplier
- Accounts Payable Clerk (AP Clerk)
- Purchasing Department (Purchasing Officer)
- Accounts Payable Supervisor (AP Supervisor)
- Supplier Relationship Manager (SRM)
- Department Manager (Manager)
- Accounting System

Data Objects:
- Incoming Invoice (possibly missing PO)
- Purchase Order (PO)
- Goods/Services Receipt Confirmation
- Discrepancy Notes/Clarifications
- Corrected/Updated Invoice
- Manager Approval Record
- Payment Schedule Entry

Start Event:
- Invoice received by email from Supplier

Main Flow (Happy Path):
1. AP Clerk: Receive invoice (email) [Data: Incoming Invoice].
2. AP Clerk: Check for valid PO number on invoice [Gateway: PO present?].
   - If Yes:
     3. AP Clerk: Log invoice in Accounting System [System record created].
     4. AP Clerk: Forward invoice to Purchasing for receipt confirmation and matching trigger [Data: Invoice + PO].
     5. Purchasing Officer: Verify goods/services receipt and compare invoice vs PO (quantities, prices, delivery charges) [Gateway: Discrepancy?].
        - If No discrepancy:
          6. Purchasing Officer: Send confirmation to AP [Data: Confirmation].
          7. AP Clerk: Perform system 3-way match (invoice, PO, receipt) and confirm match [Gateway: System match successful?].
             - If Match successful:
               8. Accounting System: Trigger Manager approval request (automated email/notification) [Data: Approval request].
               9. Manager: Review invoice, PO, confirmation [Gateway: Manager decision].
                  - If Approve:
                    10. Manager: Approve invoice [Data: Manager Approval Record].
                    11. AP Clerk: Schedule invoice for next payment run in Accounting System [Data: Payment Schedule Entry].
                    12. End Event: Invoice scheduled for payment.
                  - If Reject/Hold:
                    9a. Manager: Request hold/investigation (via AP Clerk) [Data: Investigation request].
                    9b. AP Clerk: Investigate or coordinate with Purchasing/SRM/AP Supervisor as needed (see Exception Handling) then return to step 7 (re-match) once resolved.
             - If Match fails:
               7a. AP Clerk: Initiate discrepancy resolution with Purchasing (and possibly SRM) (see Exception Handling).
               7b. After resolution, AP Clerk updates records and returns to step 7 (re-match).
        - If Discrepancy found by Purchasing:
          5a. Purchasing Officer: Contact supplier for clarification/correction OR request AP to hold invoice until corrected [Data: Discrepancy Notes].
          5b. If corrected invoice received, AP Clerk updates invoice record [Data: Corrected/Updated Invoice] and return to step 5 for verification.
   - If No (PO missing):
     2a. AP Clerk: Return invoice to Supplier requesting PO or additional details [Data: PO request].
     2b. Supplier: Provide PO or revised invoice [Data: Corrected/Updated Invoice].
     2c. AP Clerk: Loop back to step 2 PO check.
     2d. Note: If missing PO relates to informal service procurement, see Exception Handling for retrospective PO.

Exception Handling and Variations:
A. Discrepancies unresolved between AP/Purchasing/Supplier:
   A1. AP Clerk: Escalate to AP Supervisor.
   A2. AP Supervisor: Coordinate across Purchasing, Supplier, and SRM to resolve issues (pricing, quantities, missing info).
   A3. SRM: Validate contract terms, obtain corrected invoice or confirm correct pricing/terms with supplier.
   A4. Outcome Gateway: Resolved?
       - If Resolved: Return to step 7 (system match) or step 5 (Purchasing verification) as appropriate.
       - If Not Resolved: AP Supervisor decides to reject invoice or keep on hold pending further supplier action. If rejected, process ends with notification to supplier; if hold, periodic review loop continues until resolution.

B. Invoices without any PO (e.g., informally contracted services):
   B1. AP Clerk: Identify no-PO scenario; inform AP Supervisor.
   B2. AP Supervisor: Work with Department Head/Manager and Purchasing to create retrospective PO or decide on rejection.
   B3. Gateway: Retrospective PO created?
       - If Yes: Return to main flow at step 3 (log invoice with PO) then proceed.
       - If No: Reject invoice; notify Supplier; End.

C. Manager rejects or flags for investigation:
   C1. Manager: Rejects or requests hold due to budget variance or suspicious items.
   C2. AP Clerk: Investigate with Purchasing and SRM; may escalate to AP Supervisor if needed.
   C3. After resolution, AP Clerk updates invoice/PO info; return to step 7 (system match) and then to Manager approval.

D. Purchasing requests AP to hold pending corrected invoice:
   D1. AP Clerk: Place invoice on hold in system.
   D2. Supplier (via SRM or Purchasing): Send corrected invoice.
   D3. AP Clerk: Replace/update invoice record; resume at step 5 (Purchasing verification).

Roles and Responsibilities Summary:
- AP Clerk: Intake, PO presence check, logging, routing, system matching, scheduling payment, coordinating clarifications, initiating escalations.
- Purchasing Officer: Verify receipt and alignment with PO, request corrections, confirm to AP.
- AP Supervisor: Handle escalations, coordinate cross-department, decide on retrospective PO or rejection for non-PO cases.
- SRM: Engage suppliers to correct invoices, confirm contractual pricing/terms, expedite corrections.
- Manager: Final approval after receipt confirmation and match; can reject/hold for investigation.
- Supplier: Provide PO details, corrected invoices, clarification.
- Accounting System: Record invoices, support matching, trigger manager approval notification, store approvals, schedule payments.

Gateways (Decision Points):
G1: PO present on invoice? (Yes -> Log; No -> Request PO/retrospective PO path)
G2: Purchasing discrepancy found? (No -> Confirm; Yes -> Resolve with supplier/AP/SRM)
G3: System 3-way match successful? (Yes -> Manager approval; No -> Discrepancy resolution)
G4: Manager decision (Approve vs Reject/Hold)
G5: Exception resolution outcome (Resolved vs Not Resolved)
G6: Retrospective PO created? (Yes -> Resume; No -> Reject)

Artifacts/Inputs/Outputs Movement:
- Incoming Invoice from Supplier to AP Clerk.
- Invoice + PO to Purchasing for verification.
- Confirmation from Purchasing to AP Clerk.
- Discrepancy Notes between AP, Purchasing, SRM, Supplier.
- Corrected/Updated Invoice from Supplier to AP Clerk.
- Manager Approval Record stored in system.
- Payment Schedule Entry created by AP Clerk in system.

Noted Ambiguities/Assumptions:
- Goods receipt confirmation: Mary mentions AP seeks confirmation; Dan implies Purchasing validates receipt during verification. Modeled as Purchasing verifying receipt and confirming to AP.
- Matching order: Mary performs matching after receipt confirmation; Dan verifies before formal AP system match. Modeled as Purchasing pre-check followed by AP system 3-way match.
- Rejection endpoints: If unresolved discrepancies or no retrospective PO, process ends with supplier notification; organization’s formal rejection notification method not specified.
- Timing of payment run scheduling: After manager approval; exact batching cadence unspecified.